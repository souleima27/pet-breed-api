(()=>{"use strict";const n="7.3.1_832b543",t="https://t.teads.tv/track",e="https://cm.teads.tv/v2/advertiser",o="tag",i="outbrain",a="teads",c="js-web",r="js-gtm";let d=!1;function s(){return window.advertiser_domain}function u(){return window.teads_buyer_pixel_id}function l(){return!0===window.teads_post_message_event_to_opener}function p(){return!0===window.teads_post_message_event_to_window}function _(n){window.teads_iab_tcf_consent_data=n}function w(){return window.teads_iab_tcf_consent_data}function v(n){window.teads_iab_gpp_consent_data=n}function g(){return window.teads_iab_gpp_consent_data}function f(n){window.teads_usp_consent_data=n}function m(){return window.teads_usp_consent_data}function y(n){window.teads_gtm_consent_data=n}function h(n){window.teads_didomi_consent_data=n}function I(n){window.teads_cookiebot_consent_data=n}function b(n){window.teads_onetrust_consent_data=n}function E(){return window.teads_gdpr_advertiser}function A(){return window.teads_ccpa_advertiser}function k(){return!0===window.teads_tracking_allowed}function C(n){window.teads_auction_id=n}function P(){return window.teads_auction_id}function S(n){const t=window.teads_auction_id_forwarded_by||{};t[n]=!0,window.teads_auction_id_forwarded_by=t}function N(n){window.teads_session_id=n}function T(){return window.teads_session_id}function O(){return window.teads_viewer_id}function L(){return!0!==window.teads_disable_first_party_cookie&&window.first_party_cookie_allowed}function R(n){window.teads_tracking_events_sent||(window.teads_tracking_events_sent=[]),window.teads_tracking_events_sent.push(n)}const D=n=>{d=n};function U(){if(void 0!==window.teads&&void 0!==window.teads.advertiserId){if("number"==typeof window.teads.advertiserId)return window.teads.advertiserId}else{if(void 0===window.teads_cv||void 0===window.teads_cv.advertiserId)return window.teads_adv_id;if("number"==typeof window.teads_cv.advertiserId)return window.teads_cv.advertiserId}}function x(){return window.teads_env&&[c,r].includes(window.teads_env)?window.teads_env:c}const X="https://l.teads.tv/performance/http-source",j={INTERNAL:"internal",BAD_INTEGRATION:"bad_integration"};function F(n){return"[object Function]"===toString.call(n)}function M(n){let t="";const e=function(n){let t=n,e=!1;try{for(let n=0;t.parent.document!==t.document||n<50;n+=1){if(!t.parent.document){e=!0;break}t=t.parent}}catch(n){e=!0}return{topFrame:t,err:e}}(n),{topFrame:o}=e;if(e.err)try{t=o.top.location.href}catch(n){t=o.location.href}else t=o.location.href;return t}function V(t,e,o){try{const i={errorMessage:t,topUrl:M(window),userAgent:void 0!==window.navigator&&void 0!==window.navigator.userAgent?window.navigator.userAgent:"",exception:e||"",version:n,type:o||j.BAD_INTEGRATION};t=JSON.stringify(i)}catch(n){}document.createElement("img").src="".concat(X,"?").concat(encodeURIComponent(t))}function B(n){const t=["account","password","pass","secret","secretkey","username","user","login","ordernumber","orderid","email","mail","user.email","user.password","user.name","user.mail","user.lastname","user.firstname","user.phone","user.phonenumber","lastname","firstname","name","address","phonenumber","phone","client_secret","guid"];if(""!==n){const e=n.split("?").length>1?n.split("?")[1]:void 0;if(void 0!==e){let o="".concat(n.split("?")[0],"?");const i=e.split("&");for(let n=0;n<i.length;n+=1){const e=i[n].split(/=(.+)/);o="".concat(o+(0===n?"":"&")+e[0],"=").concat(t.indexOf(e[0])>=0?"XXXXXXXX":e[1])}n=o}}return n}function G(n){try{const t=new RegExp("(?:\\?|&|%3F|%26)auctid(?:=|%3D)([0-9a-zA-Z-_]*)").exec(n);if(t&&t.length>=2)return t[1]}catch(n){V("Error when extracting Auction ID from url",null==n?void 0:n.message,j.INTERNAL)}}function J(t,e){var i,a;const c=U(),r=u(),d=x(),s=function(n){const t=[];return Object.keys(n).forEach((e=>{t.push("".concat(e,"=").concat(encodeURIComponent(n[e])))})),t.join("&")}(e),l=M(window),p=function(n){let t=P();if(!t){let e=n;n||(e=M(window)),t=G(e),t&&(C(t),S("url"))}return t}(l),_=function(){const n=window.teads_auction_id_forwarded_by;return n?Object.keys(n).join(","):void 0}(),v=T(),g=O(),f=w(),y=m(),h=E(),I=A(),b=B(l);let k="?action=".concat(t,"&env=").concat(encodeURIComponent(d),"&tag_version=").concat(encodeURIComponent(n),"&provider=").concat(o);return s.length>0&&(k="".concat(k,"&").concat(s)),void 0!==r?k="".concat(k,"&buyer_pixel_id=").concat(encodeURIComponent(r)):void 0!==c&&(k="".concat(k,"&advertiser_id=").concat(encodeURIComponent(c))),k="".concat(k,"&referer=").concat(encodeURIComponent(b)),void 0!==p&&(k="".concat(k,"&auctid=").concat(p)),void 0!==_&&(k="".concat(k,"&cohort_id=").concat(_)),void 0!==v&&(k="".concat(k,"&user_session_id=").concat(v)),void 0!==g&&(k="".concat(k,"&firstPartyCookieTeadsId=").concat(g)),void 0!==(null==f||null===(i=f.data)||void 0===i?void 0:i.tcString)&&(k="".concat(k,"&gdpr_consent=").concat(f.data.tcString)),null!=h&&h.apply?k="".concat(k,"&gdpr_status=12"):void 0!==(null==h?void 0:h.apply)&&(k="".concat(k,"&gdpr_status=0")),h&&(void 0!==h.apply&&(k="".concat(k,"&gdpr_apply=").concat(h.apply)),void 0!==h.teadsConsent&&(k="".concat(k,"&gtc=").concat(h.teadsConsent)),void 0!==h.isServiceSpecific&&(k="".concat(k,"&gdpr_is_service_specific=").concat(h.isServiceSpecific)),void 0!==h.cmpId&&(k="".concat(k,"&gdpr_cmp_id=").concat(h.cmpId)),void 0!==h.apiVersion&&(k="".concat(k,"&gdpr_api_version=").concat(h.apiVersion))),void 0!==(null==y||null===(a=y.data)||void 0===a?void 0:a.usPrivacy)&&(k="".concat(k,"&ccpa_consent=").concat(y.data.usPrivacy)),I&&(void 0!==I.apply&&(k="".concat(k,"&ca=").concat(I.apply)),void 0!==I.teadsConsent&&(k="".concat(k,"&ctc=").concat(I.teadsConsent))),k}const K=n=>(document.getElementsByTagName("head")[0]||document.getElementsByTagName("body")[0]||document.getElementsByTagName("script")[0].parentNode).insertBefore(n,null),W={auctionId:{key:"tfpai",maxAge:2592e3,isJson:!0},sessionId:{key:"tfpsi",maxAge:1800,isJson:!1},viewerId:{key:"tfpvi",maxAge:7776e3,isJson:!1}};function q(n){try{$(n,"",s(),0,"/","none",!0)}catch(t){V('Error while deleting cookie on domain with key "'.concat(n,'"'),null==t?void 0:t.message,j.INTERNAL)}}function z(n,t,e){try{$(n,t,s(),e,"/","none",!0)}catch(t){V('Error while setting cookie on domain with key "'.concat(n,'"'),null==t?void 0:t.message,j.INTERNAL)}}function H(n){const t="".concat(n,"="),e=document.cookie.split(";");for(let n=0;n<e.length;n+=1)if(e[n]=e[n].trim(),0===e[n].indexOf(t))return e[n].substring(t.length,e[n].length)}function Z(){let n=H(W.auctionId.key);try{n?(JSON.parse(atob(n)),n=atob(n)):n="{ }"}catch(t){n='{"'.concat(a,'":"').concat(n,'"}')}return n}function Q(){const n=Z(),t=P();if(L()&&t)try{const e=JSON.parse(n);e[a]=t,z(W.auctionId.key,btoa(JSON.stringify(e)),W.auctionId.maxAge)}catch(n){console.log(n),V("Error while updating auction ID in first-party cookie",null==n?void 0:n.message,j.INTERNAL)}}function Y(){const n=T();L()&&n&&z(W.sessionId.key,n,W.sessionId.maxAge)}function $(n,t,e,o,i,a,c){let r="".concat(n,"=").concat(t);i&&(r+=";path=".concat(i)),"number"==typeof o&&(r+=";max-age=".concat(o)),e&&(r+=";domain=.".concat(e)),a&&(r+=";samesite=".concat(a)),c&&(r+=";secure"),document.cookie=r}function nn(n){try{const t=H(n.key);if(!t)return"";if(!n.isJson)return t;try{return JSON.parse(atob(t))[a]}catch(n){return t}}catch(t){V('Error while reading first-party cookie with key "'.concat(n.key,'"'),null==t?void 0:t.message,j.INTERNAL)}return""}const tn={PIXEL_LOADED:"TEADS_PIXEL_LOADED",PIXEL_DEBUG:"TEADS_PIXEL_DEBUG",PIXEL_EVENT:"TEADS_PIXEL_EVENT",SDK_PARAMETERS:"TEADS_SDK_PARAMETERS",ASK_PIXEL_INFO:"TEADS_ASK_PIXEL_INFO",PIXEL_INFO:"TEADS_PIXEL_INFO",CONSENT_INFO_LOADED:"TEADS_CONSENT_INFO_LOADED"};function en(n){var t,e;let o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return{type:n,id:null===(t=window)||void 0===t?void 0:t.name,ts:Date.now(),host:null===(e=window)||void 0===e||null===(e=e.location)||void 0===e?void 0:e.host,...o}}function on(n){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"*";try{var o,i;const a=(null===(o=window)||void 0===o||null===(o=o.opener)||void 0===o?void 0:o.top)||(null===(i=window)||void 0===i?void 0:i.opener);F(a.postMessage)&&a.postMessage(en(n,t),e)}catch(n){}}function an(n){var t;let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"/";if(F(null===(t=window)||void 0===t?void 0:t.postMessage))try{window.postMessage(en(n,e),o)}catch(n){}}function cn(n){var t,e,o,i,a;null!==(t=window)&&void 0!==t&&t.opener&&((null==n||null===(o=n.data)||void 0===o?void 0:o.type)===tn.PIXEL_DEBUG&&(window.teads_post_message_event_to_opener=true),(null==n||null===(i=n.data)||void 0===i?void 0:i.type)===tn.SDK_PARAMETERS&&null!=n&&null!==(a=n.data)&&void 0!==a&&a.teadsClickId&&(C(n.data.teadsClickId),S("postMessage"),Q())),(null==n||null===(e=n.data)||void 0===e?void 0:e.type)===tn.ASK_PIXEL_INFO&&(an(tn.PIXEL_INFO,{buyerPixelId:u(),advertiserId:U(),trackingAllowed:k(),firstPartyCookieAllowed:L(),gdprAdvertiser:E(),ccpaAdvertiser:A(),advertiserDomain:s(),auctionId:P(),env:x(),iabData:w(),uspData:m(),gppIabData:g(),referer:B(M(window)),trackingEventsSent:window.teads_tracking_events_sent||[],request:n.data}),window.teads_post_message_event_to_window=!0)}function rn(n){!function(n){const t=document.createElement("img");t.width=0,t.height=0,t.alt="",t.style.position="absolute",t.src=n,K(t)}(n),l()&&on(tn.PIXEL_EVENT,{trackingUrl:n}),p()&&an(tn.PIXEL_EVENT,{trackingUrl:n})}async function dn(n,t){try{await fetch(n,{browsingTopics:!0,cache:"no-cache",credentials:"include",keepalive:!0}).then((()=>{l()&&on(tn.PIXEL_EVENT,{trackingUrl:n}),p()&&an(tn.PIXEL_EVENT,{trackingUrl:n})}))}catch(e){!1===t?V("Unable to fire a log using fetch API",null==e?void 0:e.message,j.BAD_INTEGRATION):rn(n)}}function sn(n,t,e){let o,i,a=e;for(;!o;){try{if("function"==typeof a[n]){i=a[n],o=a;break}}catch(n){}try{if(a.frames[t]){o=a;break}}catch(n){}if(a===e.top)break;a=a.parent}return{cmpFrame:o,cmpFunction:i}}function un(n,t){function e(e,o){o?!1!==e.gdprApplies&&"tcloaded"!==e.eventStatus&&"useractioncomplete"!==e.eventStatus||n(e):t("CMP unable to register callback function. Please check CMP setup.")}const o="__tcfapi",i={};function a(n){const t="".concat(o,"Return"),e="string"==typeof n.data&&"".concat(n.data).includes(t)?JSON.parse(n.data):n.data;if(e[t]&&e[t].callId){const n=e[t];void 0!==i[n.callId]&&i[n.callId](n.returnValue,n.success)}}function c(n,t,e){const c="".concat(o,"Call");window[o]=(n,e,o,a)=>{const r="".concat(Math.random()),d={[c]:{command:n,version:e,parameter:a,callId:r}};i[r]=o,t.postMessage(d,"*")},window.addEventListener("message",a,!1),window[o](n,2,e)}const{cmpFrame:r,cmpFunction:d}=sn("__tcfapi","__tcfapiLocator",window);return!!r&&(new Promise(((n,t)=>{F(d)?d("ping",2,(()=>n())):c("ping",r,(()=>n())),setTimeout((()=>t()),100)})).catch((()=>t("Unable to ping the CMP"))),F(d)?d("addEventListener",2,e):c("addEventListener",r,e),!0)}function ln(n,t){const e={};function o(n){const t=n&&n.data&&n.data.__uspapiReturn;t&&t.callId&&void 0!==e[t.callId]&&(e[t.callId](t.returnValue,t.success),delete e[t.callId])}let i=!1;function a(n,t,a){i||(window.addEventListener("message",o,!1),i=!0),function(n,o,i){const a="".concat(Math.random()),c={__uspapiCall:{command:n,version:1,callId:a}};e[a]=i,t.postMessage(c,"*")}(n,0,a)}const{cmpFrame:c,cmpFunction:r}=sn("__uspapi","__uspapiLocator",window);if(!c)return!1;new Promise(((n,t)=>{F(r)?r("getUSPData",1,(()=>n())):a("getUSPData",c,(()=>n())),setTimeout((()=>t()),100)})).catch((()=>t("Unable to ping the USP")));const d=function(){const e={};return{consentDataCallback:(o,i)=>{i&&o.uspString&&(e.usPrivacy=o.uspString),e.usPrivacy?n(e):t("Unable to get USP consent string.")}}}();return F(r)?r("getUSPData",1,d.consentDataCallback):a("getUSPData",c,d.consentDataCallback),!0}let pn=function(n){return n.Ping="ping",n.AddEventListener="addEventListener",n.RemoveEventListener="removeEventListener",n}({}),_n=function(n){return n.Ready="ready",n.NotReady="Not ready",n}({});function wn(n,t,e){return new Promise(((o,i)=>{if(void 0!==n)switch(t){case pn.Ping:n(t,((n,t)=>{t?o(n):i(new Error("Ping command failed"))}));break;case pn.AddEventListener:n(t,((n,t)=>{t?o(n):i(new Error("AddEventListener command failed"))}));break;case pn.RemoveEventListener:"number"==typeof e&&n(t,e,(()=>{}));break;default:i(new Error("Invalid GPP command"))}}))}const vn=n=>n===_n.Ready,gn=n=>null!=n;class fn{constructor(){var n,t,e;n=this,e=!1,(t=function(n){var t=function(n,t){if("object"!=typeof n||!n)return n;var e=n[Symbol.toPrimitive];if(void 0!==e){var o=e.call(n,"string");if("object"!=typeof o)return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(n)}(n);return"symbol"==typeof t?t:t+""}(t="isGppAvailable"))in n?Object.defineProperty(n,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):n[t]=e;const{cmpFunction:o,cmpFrame:i}=sn("__gpp","__gppLocator",window);F(o)?this.gpp=o:i&&(this.gpp=fn.buildCmpFunctionWithPostMessage(i)),this.isGppAvailable="function"==typeof this.gpp}static buildCmpFunctionWithPostMessage(n){const t={},e="__gpp",o="".concat(e,"Call");return n.addEventListener("message",(function(n){const o="".concat(e,"Return"),i="string"==typeof n.data&&"".concat(n.data).includes(o)?JSON.parse(n.data):n.data;if(i[o]&&i[o].callId){const n=i[o];"function"==typeof t[n.callId]&&t[n.callId](n.returnValue,n.success)}}),!1),(e,i,a)=>{const c="".concat(Math.random()),r={[o]:{command:e,version:"1.1",callId:c}};e===pn.RemoveEventListener?t[c]=a:t[c]=i,n.postMessage(r,"*")}}async retrieveConsent(n,t){if(this.isGppAvailable)try{let e;const o=await Promise.race([wn(this.gpp,pn.Ping),new Promise(((n,o)=>{e=setTimeout((()=>{t("GPP ping timed out"),o("Unable to ping the GPP CMP")}),100)}))]);if(clearTimeout(e),vn(o.signalStatus)&&gn(o.gppString))return void n({applicableSections:o.applicableSections,gppString:o.gppString});const i=await wn(this.gpp,pn.AddEventListener);wn(this.gpp,pn.RemoveEventListener,i.listenerId);const{pingData:a}=i;if(!vn(a.signalStatus))return void t("CMP is expecting changes, consent data is not available yet");if(!gn(a.gppString))return void t("Expected gppString to be a string but got null or undefined");const c=i.pingData;n({applicableSections:c.applicableSections,gppString:c.gppString})}catch(n){t("Error during GPP command call: ".concat(n))}}retrieveConsentWithoutHolding(n,t){let e=!1,o=!1;this.retrieveConsent((t=>{o||(e=!0,n(t))}),(n=>{e||(o=!0,t(n))}))}}function mn(n,t){const e=new fn;return e.isGppAvailable&&e.retrieveConsentWithoutHolding(n,t),e.isGppAvailable}function yn(n,t){if(window.google_tag_data){var e;const a=window.google_tag_data;var o,i;return null!=a&&null!==(e=a.ics)&&void 0!==e&&e.entries?(n({hasConsent:null!==(o=a.ics.entries.ad_storage.update)&&void 0!==o&&o&&null!==(i=a.ics.entries.ad_user_data.update)&&void 0!==i&&i}),!0):(t("Unable to get consent data from GTM"),!1)}return!1}function hn(n){if(window.didomiState){const t=window.didomiState;return!!t&&(t.didomiPurposesConsent||n({hasConsent:!1}),n({hasConsent:t.didomiPurposesConsent.indexOf("cookies")>-1&&t.didomiPurposesConsent.indexOf("measure_ad_performance")>-1}),!0)}return!1}function In(n){if(window.Cookiebot){const o=window.Cookiebot;var t,e;return!!o&&(n({hasConsent:null!==(t=null===(e=o.consent)||void 0===e?void 0:e.marketing)&&void 0!==t&&t}),!0)}return!1}function bn(n){if(window.OnetrustActiveGroups){var t;const e=null===(t=window.OnetrustActiveGroups)||void 0===t?void 0:t.toUpperCase();return!!e&&(n({hasConsent:e.indexOf("C0004")>-1}),!0)}return!1}function En(n,t){return new Promise((e=>{n((n=>{t({data:n}),e()}),(n=>{t({error:n}),e()}))||e()}))}const An={conversionType:"conversion_type",price:"aepp",currency:"aepc",name:"aepn"};async function kn(n){if(!k())return;const e=function(n,t){const e={};return Object.keys(n).forEach((t=>{const o=t,i=n[t];Object.prototype.hasOwnProperty.call(An,o)?e[An[o]]=i+"":V("Invalid parameter specified in event: ".concat(o))})),e}(n),o=t+J("conversion",e);rn(o),R(o),async function(n){if(window.obApi&&function(n){return["AddToCart","AddToWishlist","CompleteRegistration","InitiateCheckout","Lead","Purchase","ViewContent","Search"].includes(n.conversionType)}(n)){const t={...n};delete t.conversionType,Object.keys(t).length>0?window.obApi("track",n.conversionType,t):window.obApi("track",n.conversionType)}}(n)}const Cn=n=>{const{auctionId:t,gdpr:e,ccpa:o,firstPartyCookieAllowed:i,domain:a,trackingAllowed:c}=n;var r,d,s,u;r=i,window.first_party_cookie_allowed=r,d=c,window.teads_tracking_allowed=d,e&&(s=e,window.teads_gdpr_advertiser=s),o&&function(n){window.teads_ccpa_advertiser=n}(o),a&&(u=a,window.advertiser_domain=u),t&&(C(t),S("url"))},Pn=n=>{if(n){const n=nn(W.auctionId);if(n){const t=P();t&&t!==n||S("cookie"),t||C(n)}return Q(),n}return q(W.auctionId.key),null},Sn=(n,t,e,o)=>{if(n){const n=nn(W.sessionId);t&&e&&t!==e?N(o):n?N(n):o&&N(o),Y()}else o&&N(o),q(W.sessionId.key)},Nn=(n,t)=>{if(t&&n){const n=nn(W.viewerId);e=n||t,window.teads_viewer_id=e,function(){const n=O();L()&&n&&z(W.viewerId.key,n,W.viewerId.maxAge)}()}else q(W.viewerId.key);var e};async function Tn(){try{const n=await async function(){const n=M(window),t=function(n){var t,e,o;const i=U(),a=u();let c="referer=".concat(encodeURIComponent(n));void 0!==a?c+="&buyer_pixel_id=".concat(encodeURIComponent(a)):void 0!==i&&(c+="&advertiser_id=".concat(encodeURIComponent(i)));const r=w();var d,s;r&&(void 0!==(null==r||null===(d=r.data)||void 0===d?void 0:d.gdprApplies)&&(c+="&gdpr_applies=".concat(encodeURIComponent(r.data.gdprApplies))),null!=r&&null!==(s=r.data)&&void 0!==s&&s.tcString&&(c+="&gdpr_consent=".concat(encodeURIComponent(r.data.tcString))),null!=r&&r.error&&(c+="&gdpr_error=".concat(encodeURIComponent(r.error))));const l=m();null!=l&&null!==(t=l.data)&&void 0!==t&&t.usPrivacy&&(c+="&ccpa_consent=".concat(encodeURIComponent(l.data.usPrivacy))),null!=l&&l.error&&(c+="&ccpa_error=".concat(encodeURIComponent(l.error)));const p=g();null!=p&&null!==(e=p.data)&&void 0!==e&&e.applicableSections&&(c+="&gpp_applicable_sections=".concat(encodeURIComponent(p.data.applicableSections.join(",")))),null!=p&&null!==(o=p.data)&&void 0!==o&&o.gppString&&(c+="&gpp_consent=".concat(encodeURIComponent(p.data.gppString))),null!=p&&p.error&&(c+="&gpp_error=".concat(encodeURIComponent(p.error)));const _=function(){const n=H("optout");if(n)return"1"===n}();void 0!==_&&(c+="&web_opt_out=".concat(encodeURIComponent(_)));const v=window.teads_gtm_consent_data;v&&(v.data&&(c+="&gtm_consent=".concat(encodeURIComponent(v.data.hasConsent))),v.error&&(c+="&gtm_error=".concat(encodeURIComponent(v.error))));const f=window.teads_didomi_consent_data;f&&(f.data&&(c+="&didomi_consent=".concat(encodeURIComponent(f.data.hasConsent))),f.error&&(c+="&didomi_error=".concat(encodeURIComponent(f.error))));const y=window.teads_cookiebot_consent_data;y&&(y.data&&(c+="&cookiebot_consent=".concat(encodeURIComponent(y.data.hasConsent))),y.error&&(c+="&cookiebot_error=".concat(encodeURIComponent(y.error))));const h=window.teads_onetrust_consent_data;return h&&(h.data&&(c+="&onetrust_consent=".concat(encodeURIComponent(h.data.hasConsent))),h.error&&(c+="&onetrust_error=".concat(encodeURIComponent(h.error)))),c}(n);try{const n=await fetch("".concat(e,"?").concat(t),{cache:"no-cache"});if(200===(null==n?void 0:n.status)){var o,i,a,c,r,d,s,l;const t=await n.json();return{trackingAllowed:!1!==(null==t?void 0:t.tracking_allowed),firstPartyCookieAllowed:!0===(null==t?void 0:t.first_party_cookie_allowed),sessionId:null==t?void 0:t.session_id,auctionId:null==t?void 0:t.auction_id,viewerId:null==t?void 0:t.user_id,domain:null==t?void 0:t.domain,ccpa:null!=t&&t.ccpa?{apply:null===(o=t.ccpa)||void 0===o?void 0:o.apply,teadsConsent:null===(i=t.ccpa)||void 0===i?void 0:i.teads_consent}:void 0,gpp:null!=t&&t.gpp?{apply:null===(a=t.gpp)||void 0===a?void 0:a.apply,teadsConsent:null===(c=t.gpp)||void 0===c?void 0:c.teads_consent}:void 0,gdpr:null!=t&&t.gdpr?{apply:null===(r=t.gdpr)||void 0===r?void 0:r.apply,teadsConsent:null===(d=t.gdpr)||void 0===d?void 0:d.teads_consent,apiVersion:null===(s=t.gdpr)||void 0===s?void 0:s.api_version,cmpId:null===(l=t.gdpr)||void 0===l?void 0:l.cmp_id,isServiceSpecific:null==t?void 0:t.gdpr.is_service_specific}:void 0,outbrainAdvertiserId:null==t?void 0:t.outbrain_advertiser_id}}}catch(n){V("Error while trigger API to know advertiser information",null==n?void 0:n.message,j.INTERNAL)}const p=G(n);return p?{trackingAllowed:!0,firstPartyCookieAllowed:!1,auctionId:p}:{trackingAllowed:!0,firstPartyCookieAllowed:!1}}(),{sessionId:t,auctionId:o,viewerId:i,outbrainAdvertiserId:a}=n;a&&async function(n){const t='\n    !function(_window, _document) {\n        var OB_ADV_ID = "'.concat(n,"\";\n        if (_window.obApi) {\n          var toArray = function(object) {\n            return Object.prototype.toString.call(object) === '[object Array]' ? object : [object];\n          };\n          _window.obApi.marketerId = toArray(_window.obApi.marketerId).concat(toArray(OB_ADV_ID));\n          return;\n        }\n        var api = _window.obApi = function() {\n          api.dispatch ? api.dispatch.apply(api, arguments) : api.queue.push(arguments);\n        };\n        api.version = '3.0';\n        api.loaded = true;\n        api.loadedBy = 'teads';\n        api.marketerId = OB_ADV_ID;\n        api.queue = [];\n        var tag = _document.createElement('script');\n        tag.async = true;\n        tag.src = '//p.teads.tv/obtp/cp/obtp.js';\n        tag.type = 'text/javascript';\n        var script = _document.getElementsByTagName('script')[0];\n        script.parentNode.insertBefore(tag, script);\n      }(window, document);\n\n      obApi('track', 'PAGE_VIEW');\n    "),e=document.createElement("script");e.textContent=t,e.async=!0,e.defer=!0,e.type="text/javascript",document.head.appendChild(e)}(a).catch((n=>V("Error while injecting Outbrain pixel",null==n?void 0:n.message))),Cn(n);const c=L(),r=Pn(c);Sn(c,r,o,t),Nn(c,i),p()&&an(tn.CONSENT_INFO_LOADED,{trackingAllowed:k(),firstPartyCookieAllowed:L(),gdprAdvertiser:E(),ccpaAdvertiser:A(),advertiserDomain:s(),auctionId:P(),iabData:w(),uspData:m()})}catch(n){V("Error while initializing advertiser",null==n?void 0:n.message,j.INTERNAL)}}const On=async()=>{const n=t+J("pageView",{});rn(n),R(n),await dn(t+J("browser-topics",{}),!1)},Ln=()=>{const n=J("timeSpent",{}),e=t+n;D(!1),document.addEventListener("visibilitychange",(n=>()=>{"hidden"===document.visibilityState&&!0!==d&&(D(!0),async function(n,t){try{const t=navigator.sendBeacon&&navigator.sendBeacon.bind(navigator);if(!t||!t(n))throw new Error("Beacon not sent");l()&&on(tn.PIXEL_EVENT,{trackingUrl:n}),p()&&an(tn.PIXEL_EVENT,{trackingUrl:n})}catch(t){await dn(n,!0)}}(n),Y(),R(n))})(e))},Rn=()=>{const n=window.teads_e||[];window.teads_e=[],window.teads_e.push=function(){for(var n=arguments.length,t=new Array(n),e=0;e<n;e++)t[e]=arguments[e];return Array.prototype.push.apply(this,t),async function(){if(void 0!==window.teads_e){const n=[];for(;window.teads_e.length;)n.push(kn(window.teads_e.shift()));try{await Promise.all(n)}catch(n){V("Error while sending event based conversion",null==n?void 0:n.message,j.INTERNAL)}Y()}else V("The event queue is not defined.")}(),window.teads_e.length},window.teads_e.push(...n)};async function Dn(){const n=U(),t=u();"number"!=typeof n&&"number"!=typeof t||(await Tn(),await async function(){k()&&(await On(),await Ln(),Rn())}())}async function Un(){try{window.teads_adv_id||Object.defineProperty(window,"teads_adv_id",{set(n){this._teads_adv_id=n,Dn()},get(){return this._teads_adv_id},configurable:!0}),window.teads_buyer_pixel_id||Object.defineProperty(window,"teads_buyer_pixel_id",{set(n){this._teads_buyer_pixel_id=n,Dn()},get(){return this._teads_buyer_pixel_id},configurable:!0})}catch(n){V("Error while binding advertiser and pixel ids",null==n?void 0:n.message)}try{window.teads_setOutbrainCookieOnTeads||(window.teads_setOutbrainCookieOnTeads=function(n){const t=Z(),e=JSON.parse(t);e[i]=n,z(W.auctionId.key,btoa(JSON.stringify(e)),W.auctionId.maxAge)}),window.teads_getOutbrainCookieFromTeads||(window.teads_getOutbrainCookieFromTeads=function(){const n=Z();return JSON.parse(n)[i]})}catch(n){V("Error while loading Outbrain",null==n?void 0:n.message)}await Dn()}!async function(n){try{"undefined"!=typeof window&&(F(null===(t=window)||void 0===t?void 0:t.addEventListener)&&(on(tn.PIXEL_LOADED),an(tn.PIXEL_LOADED),window.addEventListener("message",cn)),await new Promise(((n,t)=>{setTimeout((()=>{Promise.all([En(un,_),En(ln,f),En(mn,v),En(In,I),En(yn,y),En(hn,h),En(bn,b)]).then((()=>Un())).then(n).catch(t)}),0)})))}catch(n){V("Unhandled exception",null==n?void 0:n.message,j.INTERNAL)}var t}()})();