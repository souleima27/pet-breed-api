/*! For license information please see apiframe.js.LICENSE.txt */
!function(t){var e={};function n(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)n.d(r,i,function(e){return t[e]}.bind(null,i));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="/static/bundles/widget/",n(n.s=67)}([function(t,e,n){"use strict";n.d(e,"b",(function(){return i})),n.d(e,"a",(function(){return o})),n.d(e,"d",(function(){return s})),n.d(e,"f",(function(){return a})),n.d(e,"c",(function(){return c})),n.d(e,"e",(function(){return u}));var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},r(t,e)};function i(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var o=function(){return o=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},o.apply(this,arguments)};function s(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n}function a(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function c(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(t){i={error:t}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s}function u(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(c(arguments[e]));return t}},,function(t,e,n){"use strict";n.d(e,"d",(function(){return r})),n.d(e,"f",(function(){return i})),n.d(e,"a",(function(){return o})),n.d(e,"e",(function(){return s})),n.d(e,"g",(function(){return a})),n.d(e,"b",(function(){return c})),n.d(e,"c",(function(){return u}));function r(t){return`?${Object.entries(t).map((([t,e])=>`${encodeURIComponent(t)}=${encodeURIComponent(e)}`)).join("&")}`}function i(t){const e=document.createElement("a");e.href=t;const n={protocol:e.protocol,hostname:e.hostname,href:e.href,pathname:e.pathname,host:e.host,port:e.port,origin:e.origin,search:e.search};return("443"===e.port&&"https:"===e.protocol||"80"===e.port&&"http:"===e.protocol)&&(n.port="",n.host=n.hostname),"/"!==e.pathname[0]&&(n.pathname="/"+n.pathname),n.origin=n.protocol+"//"+n.hostname+(n.port?":"+n.port:""),n}function o(t,e){let n="";t=t.split("."),e=e.split("."),t.reverse(),e.reverse();for(let r=0;r<t.length&&r<e.length&&t[r]===e[r];r++)n="."+t[r]+n;return n}function s(t){if(!t)return null;const e={};"?"===t[0]&&(t=t.substr(1));const n=t.replace(/\+/g," ").split("&");let r=!0;for(let t=0;t<n.length;t++){const i=n[t].split("="),o=decodeURIComponent(i[0]);o&&(i.length>2&&(i[1]=i.slice(1).join("=")),e[o]=decodeURIComponent(i[1]||""),r=!1)}return r?null:e}function a(t){const e=/^www\.(.*)/.exec(t);return e?e[1]:t}function c(t){return 0===t.indexOf("http://")||0===t.indexOf("https://")}function u(t){const e=t.indexOf("#");return-1===e?t:t.substring(0,e)}},function(t,e,n){"use strict";function r(t){switch(Object.prototype.toString.call(t)){case"[object Error]":case"[object Exception]":case"[object DOMException]":return!0;default:return _(t,Error)}}function i(t){return"[object ErrorEvent]"===Object.prototype.toString.call(t)}function o(t){return"[object DOMError]"===Object.prototype.toString.call(t)}function s(t){return"[object DOMException]"===Object.prototype.toString.call(t)}function a(t){return"[object String]"===Object.prototype.toString.call(t)}function c(t){return null===t||"object"!=typeof t&&"function"!=typeof t}function u(t){return"[object Object]"===Object.prototype.toString.call(t)}function l(t){return"undefined"!=typeof Event&&_(t,Event)}function d(t){return"undefined"!=typeof Element&&_(t,Element)}function p(t){return"[object RegExp]"===Object.prototype.toString.call(t)}function h(t){return Boolean(t&&t.then&&"function"==typeof t.then)}function f(t){return u(t)&&"nativeEvent"in t&&"preventDefault"in t&&"stopPropagation"in t}function _(t,e){try{return t instanceof e}catch(t){return!1}}n.d(e,"d",(function(){return r})),n.d(e,"e",(function(){return i})),n.d(e,"a",(function(){return o})),n.d(e,"b",(function(){return s})),n.d(e,"k",(function(){return a})),n.d(e,"i",(function(){return c})),n.d(e,"h",(function(){return u})),n.d(e,"f",(function(){return l})),n.d(e,"c",(function(){return d})),n.d(e,"j",(function(){return p})),n.d(e,"m",(function(){return h})),n.d(e,"l",(function(){return f})),n.d(e,"g",(function(){return _}))},function(t,e,n){"use strict";(function(t){n.d(e,"e",(function(){return o})),n.d(e,"i",(function(){return s})),n.d(e,"h",(function(){return a})),n.d(e,"d",(function(){return c})),n.d(e,"c",(function(){return u})),n.d(e,"b",(function(){return l})),n.d(e,"a",(function(){return d})),n.d(e,"f",(function(){return p})),n.d(e,"g",(function(){return f}));var r=n(12),i=(n(7),{});function o(){return Object(r.b)()?t:"undefined"!=typeof window?window:"undefined"!=typeof self?self:i}function s(){var t=o(),e=t.crypto||t.msCrypto;if(void 0!==e&&e.getRandomValues){var n=new Uint16Array(8);e.getRandomValues(n),n[3]=4095&n[3]|16384,n[4]=16383&n[4]|32768;var r=function(t){for(var e=t.toString(16);e.length<4;)e="0"+e;return e};return r(n[0])+r(n[1])+r(n[2])+r(n[3])+r(n[4])+r(n[5])+r(n[6])+r(n[7])}return"xxxxxxxxxxxx4xxxyxxxxxxxxxxxxxxx".replace(/[xy]/g,(function(t){var e=16*Math.random()|0;return("x"===t?e:3&e|8).toString(16)}))}function a(t){if(!t)return{};var e=t.match(/^(([^:/?#]+):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?$/);if(!e)return{};var n=e[6]||"",r=e[8]||"";return{host:e[4],path:e[5],protocol:e[2],relative:e[5]+n+r}}function c(t){if(t.message)return t.message;if(t.exception&&t.exception.values&&t.exception.values[0]){var e=t.exception.values[0];return e.type&&e.value?e.type+": "+e.value:e.type||e.value||t.event_id||"<unknown>"}return t.event_id||"<unknown>"}function u(t){var e=o();if(!("console"in e))return t();var n=e.console,r={};["debug","info","warn","error","log","assert"].forEach((function(t){t in e.console&&n[t].__sentry_original__&&(r[t]=n[t],n[t]=n[t].__sentry_original__)}));var i=t();return Object.keys(r).forEach((function(t){n[t]=r[t]})),i}function l(t,e,n){t.exception=t.exception||{},t.exception.values=t.exception.values||[],t.exception.values[0]=t.exception.values[0]||{},t.exception.values[0].value=t.exception.values[0].value||e||"",t.exception.values[0].type=t.exception.values[0].type||n||"Error"}function d(t,e){void 0===e&&(e={});try{t.exception.values[0].mechanism=t.exception.values[0].mechanism||{},Object.keys(e).forEach((function(n){t.exception.values[0].mechanism[n]=e[n]}))}catch(t){}}function p(){try{return document.location.href}catch(t){return""}}var h=6e4;function f(t,e){if(!e)return h;var n=parseInt(""+e,10);if(!isNaN(n))return 1e3*n;var r=Date.parse(""+e);return isNaN(r)?h:r-t}}).call(this,n(15))},function(t,e,n){"use strict";(function(t){n.d(e,"c",(function(){return u})),n.d(e,"f",(function(){return l})),n.d(e,"e",(function(){return h})),n.d(e,"d",(function(){return g})),n.d(e,"b",(function(){return y})),n.d(e,"a",(function(){return m}));var r=n(0),i=n(18),o=n(3),s=n(34),a=n(14),c=n(7);function u(t,e,n){if(e in t){var r=t[e],i=n(r);if("function"==typeof i)try{i.prototype=i.prototype||{},Object.defineProperties(i,{__sentry_original__:{enumerable:!1,value:r}})}catch(t){}t[e]=i}}function l(t){return Object.keys(t).map((function(e){return encodeURIComponent(e)+"="+encodeURIComponent(t[e])})).join("&")}function d(t){if(Object(o.d)(t)){var e=t,n={message:e.message,name:e.name,stack:e.stack};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}if(Object(o.f)(t)){var s=t,a={};a.type=s.type;try{a.target=Object(o.c)(s.target)?Object(i.a)(s.target):Object.prototype.toString.call(s.target)}catch(t){a.target="<unknown>"}try{a.currentTarget=Object(o.c)(s.currentTarget)?Object(i.a)(s.currentTarget):Object.prototype.toString.call(s.currentTarget)}catch(t){a.currentTarget="<unknown>"}for(var r in"undefined"!=typeof CustomEvent&&Object(o.g)(t,CustomEvent)&&(a.detail=s.detail),s)Object.prototype.hasOwnProperty.call(s,r)&&(a[r]=s);return a}return t}function p(t){return function(t){return~-encodeURI(t).split(/%..|./).length}(JSON.stringify(t))}function h(t,e,n){void 0===e&&(e=3),void 0===n&&(n=102400);var r=g(t,e);return p(r)>n?h(t,e-1,n):r}function f(e,n){return"domain"===n&&e&&"object"==typeof e&&e._events?"[Domain]":"domainEmitter"===n?"[DomainEmitter]":void 0!==t&&e===t?"[Global]":"undefined"!=typeof window&&e===window?"[Window]":"undefined"!=typeof document&&e===document?"[Document]":Object(o.l)(e)?"[SyntheticEvent]":"number"==typeof e&&e!=e?"[NaN]":void 0===e?"[undefined]":"function"==typeof e?"[Function: "+Object(a.a)(e)+"]":"symbol"==typeof e?"["+String(e)+"]":"bigint"==typeof e?"[BigInt: "+String(e)+"]":e}function _(t,e,n,r){if(void 0===n&&(n=1/0),void 0===r&&(r=new s.a),0===n)return function(t){var e=Object.prototype.toString.call(t);if("string"==typeof t)return t;if("[object Object]"===e)return"[Object]";if("[object Array]"===e)return"[Array]";var n=f(t);return Object(o.i)(n)?n:e}(e);if(null!=e&&"function"==typeof e.toJSON)return e.toJSON();var i=f(e,t);if(Object(o.i)(i))return i;var a=d(e),c=Array.isArray(e)?[]:{};if(r.memoize(e))return"[Circular ~]";for(var u in a)Object.prototype.hasOwnProperty.call(a,u)&&(c[u]=_(u,a[u],n-1,r));return r.unmemoize(e),c}function g(t,e){try{return JSON.parse(JSON.stringify(t,(function(t,n){return _(t,n,e)})))}catch(t){return"**non-serializable**"}}function y(t,e){void 0===e&&(e=40);var n=Object.keys(d(t));if(n.sort(),!n.length)return"[object has no keys]";if(n[0].length>=e)return Object(c.d)(n[0],e);for(var r=n.length;r>0;r--){var i=n.slice(0,r).join(", ");if(!(i.length>e))return r===n.length?i:Object(c.d)(i,e)}return""}function m(t){var e,n;if(Object(o.h)(t)){var i=t,s={};try{for(var a=Object(r.f)(Object.keys(i)),c=a.next();!c.done;c=a.next()){var u=c.value;void 0!==i[u]&&(s[u]=m(i[u]))}}catch(t){e={error:t}}finally{try{c&&!c.done&&(n=a.return)&&n.call(a)}finally{if(e)throw e.error}}return s}return Array.isArray(t)?t.map(m):t}}).call(this,n(15))},,function(t,e,n){"use strict";n.d(e,"d",(function(){return i})),n.d(e,"c",(function(){return o})),n.d(e,"b",(function(){return s})),n.d(e,"a",(function(){return a}));var r=n(3);function i(t,e){return void 0===e&&(e=0),"string"!=typeof t||0===e||t.length<=e?t:t.substr(0,e)+"..."}function o(t,e){var n=t,r=n.length;if(r<=150)return n;e>r&&(e=r);var i=Math.max(e-60,0);i<5&&(i=0);var o=Math.min(i+140,r);return o>r-5&&(o=r),o===r&&(i=Math.max(o-140,0)),n=n.slice(i,o),i>0&&(n="'{snip} "+n),o<r&&(n+=" {snip}"),n}function s(t,e){if(!Array.isArray(t))return"";for(var n=[],r=0;r<t.length;r++){var i=t[r];try{n.push(String(i))}catch(t){n.push("[value cannot be serialized]")}}return n.join(e)}function a(t,e){return!!Object(r.k)(t)&&(Object(r.j)(e)?e.test(t):"string"==typeof e&&-1!==t.indexOf(e))}},,function(t,e,n){"use strict";var r,i=n(49),o=n(50),s=n(51),a=n(52),c=n(26),u=n(10),l=n(53),d=Function,p=function(t){try{return d('"use strict"; return ('+t+").constructor;")()}catch(t){}},h=Object.getOwnPropertyDescriptor;if(h)try{h({},"")}catch(t){h=null}var f=function(){throw new u},_=h?function(){try{return f}catch(t){try{return h(arguments,"callee").get}catch(t){return f}}}():f,g=n(54)(),y=n(56)(),m=Object.getPrototypeOf||(y?function(t){return t.__proto__}:null),v={},b="undefined"!=typeof Uint8Array&&m?m(Uint8Array):r,w={__proto__:null,"%AggregateError%":"undefined"==typeof AggregateError?r:AggregateError,"%Array%":Array,"%ArrayBuffer%":"undefined"==typeof ArrayBuffer?r:ArrayBuffer,"%ArrayIteratorPrototype%":g&&m?m([][Symbol.iterator]()):r,"%AsyncFromSyncIteratorPrototype%":r,"%AsyncFunction%":v,"%AsyncGenerator%":v,"%AsyncGeneratorFunction%":v,"%AsyncIteratorPrototype%":v,"%Atomics%":"undefined"==typeof Atomics?r:Atomics,"%BigInt%":"undefined"==typeof BigInt?r:BigInt,"%BigInt64Array%":"undefined"==typeof BigInt64Array?r:BigInt64Array,"%BigUint64Array%":"undefined"==typeof BigUint64Array?r:BigUint64Array,"%Boolean%":Boolean,"%DataView%":"undefined"==typeof DataView?r:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":i,"%eval%":eval,"%EvalError%":o,"%Float32Array%":"undefined"==typeof Float32Array?r:Float32Array,"%Float64Array%":"undefined"==typeof Float64Array?r:Float64Array,"%FinalizationRegistry%":"undefined"==typeof FinalizationRegistry?r:FinalizationRegistry,"%Function%":d,"%GeneratorFunction%":v,"%Int8Array%":"undefined"==typeof Int8Array?r:Int8Array,"%Int16Array%":"undefined"==typeof Int16Array?r:Int16Array,"%Int32Array%":"undefined"==typeof Int32Array?r:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":g&&m?m(m([][Symbol.iterator]())):r,"%JSON%":"object"==typeof JSON?JSON:r,"%Map%":"undefined"==typeof Map?r:Map,"%MapIteratorPrototype%":"undefined"!=typeof Map&&g&&m?m((new Map)[Symbol.iterator]()):r,"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":"undefined"==typeof Promise?r:Promise,"%Proxy%":"undefined"==typeof Proxy?r:Proxy,"%RangeError%":s,"%ReferenceError%":a,"%Reflect%":"undefined"==typeof Reflect?r:Reflect,"%RegExp%":RegExp,"%Set%":"undefined"==typeof Set?r:Set,"%SetIteratorPrototype%":"undefined"!=typeof Set&&g&&m?m((new Set)[Symbol.iterator]()):r,"%SharedArrayBuffer%":"undefined"==typeof SharedArrayBuffer?r:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":g&&m?m(""[Symbol.iterator]()):r,"%Symbol%":g?Symbol:r,"%SyntaxError%":c,"%ThrowTypeError%":_,"%TypedArray%":b,"%TypeError%":u,"%Uint8Array%":"undefined"==typeof Uint8Array?r:Uint8Array,"%Uint8ClampedArray%":"undefined"==typeof Uint8ClampedArray?r:Uint8ClampedArray,"%Uint16Array%":"undefined"==typeof Uint16Array?r:Uint16Array,"%Uint32Array%":"undefined"==typeof Uint32Array?r:Uint32Array,"%URIError%":l,"%WeakMap%":"undefined"==typeof WeakMap?r:WeakMap,"%WeakRef%":"undefined"==typeof WeakRef?r:WeakRef,"%WeakSet%":"undefined"==typeof WeakSet?r:WeakSet};if(m)try{null.error}catch(t){var S=m(m(t));w["%Error.prototype%"]=S}var O=function t(e){var n;if("%AsyncFunction%"===e)n=p("async function () {}");else if("%GeneratorFunction%"===e)n=p("function* () {}");else if("%AsyncGeneratorFunction%"===e)n=p("async function* () {}");else if("%AsyncGenerator%"===e){var r=t("%AsyncGeneratorFunction%");r&&(n=r.prototype)}else if("%AsyncIteratorPrototype%"===e){var i=t("%AsyncGenerator%");i&&m&&(n=m(i.prototype))}return w[e]=n,n},x={__proto__:null,"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},E=n(17),k=n(27),j=E.call(Function.call,Array.prototype.concat),R=E.call(Function.apply,Array.prototype.splice),I=E.call(Function.call,String.prototype.replace),T=E.call(Function.call,String.prototype.slice),A=E.call(Function.call,RegExp.prototype.exec),L=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,P=/\\(\\)?/g,C=function(t,e){var n,r=t;if(k(x,r)&&(r="%"+(n=x[r])[0]+"%"),k(w,r)){var i=w[r];if(i===v&&(i=O(r)),void 0===i&&!e)throw new u("intrinsic "+t+" exists, but is not available. Please file an issue!");return{alias:n,name:r,value:i}}throw new c("intrinsic "+t+" does not exist!")};t.exports=function(t,e){if("string"!=typeof t||0===t.length)throw new u("intrinsic name must be a non-empty string");if(arguments.length>1&&"boolean"!=typeof e)throw new u('"allowMissing" argument must be a boolean');if(null===A(/^%?[^%]*%?$/,t))throw new c("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var n=function(t){var e=T(t,0,1),n=T(t,-1);if("%"===e&&"%"!==n)throw new c("invalid intrinsic syntax, expected closing `%`");if("%"===n&&"%"!==e)throw new c("invalid intrinsic syntax, expected opening `%`");var r=[];return I(t,L,(function(t,e,n,i){r[r.length]=n?I(i,P,"$1"):e||t})),r}(t),r=n.length>0?n[0]:"",i=C("%"+r+"%",e),o=i.name,s=i.value,a=!1,l=i.alias;l&&(r=l[0],R(n,j([0,1],l)));for(var d=1,p=!0;d<n.length;d+=1){var f=n[d],_=T(f,0,1),g=T(f,-1);if(('"'===_||"'"===_||"`"===_||'"'===g||"'"===g||"`"===g)&&_!==g)throw new c("property names with quotes must have matching quotes");if("constructor"!==f&&p||(a=!0),k(w,o="%"+(r+="."+f)+"%"))s=w[o];else if(null!=s){if(!(f in s)){if(!e)throw new u("base intrinsic for "+t+" exists, but the property is not available.");return}if(h&&d+1>=n.length){var y=h(s,f);s=(p=!!y)&&"get"in y&&!("originalValue"in y.get)?y.get:s[f]}else p=k(s,f),s=s[f];p&&!a&&(w[o]=s)}}return s}},function(t,e,n){"use strict";t.exports=TypeError},function(t,e,n){"use strict";t.exports=function(t){var e=[];return e.toString=function(){return this.map((function(e){var n=function(t,e){var n=t[1]||"",r=t[3];if(!r)return n;if(e&&"function"==typeof btoa){var i=(s=r,a=btoa(unescape(encodeURIComponent(JSON.stringify(s)))),c="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(a),"/*# ".concat(c," */")),o=r.sources.map((function(t){return"/*# sourceURL=".concat(r.sourceRoot||"").concat(t," */")}));return[n].concat(o).concat([i]).join("\n")}var s,a,c;return[n].join("\n")}(e,t);return e[2]?"@media ".concat(e[2]," {").concat(n,"}"):n})).join("")},e.i=function(t,n,r){"string"==typeof t&&(t=[[null,t,""]]);var i={};if(r)for(var o=0;o<this.length;o++){var s=this[o][0];null!=s&&(i[s]=!0)}for(var a=0;a<t.length;a++){var c=[].concat(t[a]);r&&i[c[0]]||(n&&(c[2]?c[2]="".concat(n," and ").concat(c[2]):c[2]=n),e.push(c))}},e}},function(t,e,n){"use strict";(function(t,r){n.d(e,"b",(function(){return i})),n.d(e,"a",(function(){return o}));n(3),n(5);function i(){return"[object process]"===Object.prototype.toString.call(void 0!==t?t:0)}function o(t,e){return t.require(e)}}).call(this,n(41),n(20)(t))},function(t,e,n){(function(t,r){var i;!function(o){e&&e.nodeType,t&&t.nodeType;var s="object"==typeof r&&r;s.global!==s&&s.window!==s&&s.self;var a,c=2147483647,u=36,l=1,d=26,p=38,h=700,f=72,_=128,g="-",y=/^xn--/,m=/[^\x20-\x7E]/,v=/[\x2E\u3002\uFF0E\uFF61]/g,b={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},w=u-l,S=Math.floor,O=String.fromCharCode;function x(t){throw new RangeError(b[t])}function E(t,e){for(var n=t.length,r=[];n--;)r[n]=e(t[n]);return r}function k(t,e){var n=t.split("@"),r="";return n.length>1&&(r=n[0]+"@",t=n[1]),r+E((t=t.replace(v,".")).split("."),e).join(".")}function j(t){for(var e,n,r=[],i=0,o=t.length;i<o;)(e=t.charCodeAt(i++))>=55296&&e<=56319&&i<o?56320==(64512&(n=t.charCodeAt(i++)))?r.push(((1023&e)<<10)+(1023&n)+65536):(r.push(e),i--):r.push(e);return r}function R(t){return E(t,(function(t){var e="";return t>65535&&(e+=O((t-=65536)>>>10&1023|55296),t=56320|1023&t),e+=O(t)})).join("")}function I(t,e){return t+22+75*(t<26)-((0!=e)<<5)}function T(t,e,n){var r=0;for(t=n?S(t/h):t>>1,t+=S(t/e);t>w*d>>1;r+=u)t=S(t/w);return S(r+(w+1)*t/(t+p))}function A(t){var e,n,r,i,o,s,a,p,h,y,m,v=[],b=t.length,w=0,O=_,E=f;for((n=t.lastIndexOf(g))<0&&(n=0),r=0;r<n;++r)t.charCodeAt(r)>=128&&x("not-basic"),v.push(t.charCodeAt(r));for(i=n>0?n+1:0;i<b;){for(o=w,s=1,a=u;i>=b&&x("invalid-input"),((p=(m=t.charCodeAt(i++))-48<10?m-22:m-65<26?m-65:m-97<26?m-97:u)>=u||p>S((c-w)/s))&&x("overflow"),w+=p*s,!(p<(h=a<=E?l:a>=E+d?d:a-E));a+=u)s>S(c/(y=u-h))&&x("overflow"),s*=y;E=T(w-o,e=v.length+1,0==o),S(w/e)>c-O&&x("overflow"),O+=S(w/e),w%=e,v.splice(w++,0,O)}return R(v)}function L(t){var e,n,r,i,o,s,a,p,h,y,m,v,b,w,E,k=[];for(v=(t=j(t)).length,e=_,n=0,o=f,s=0;s<v;++s)(m=t[s])<128&&k.push(O(m));for(r=i=k.length,i&&k.push(g);r<v;){for(a=c,s=0;s<v;++s)(m=t[s])>=e&&m<a&&(a=m);for(a-e>S((c-n)/(b=r+1))&&x("overflow"),n+=(a-e)*b,e=a,s=0;s<v;++s)if((m=t[s])<e&&++n>c&&x("overflow"),m==e){for(p=n,h=u;!(p<(y=h<=o?l:h>=o+d?d:h-o));h+=u)E=p-y,w=u-y,k.push(O(I(y+E%w,0))),p=S(E/w);k.push(O(I(p,0))),o=T(n,b,r==i),n=0,++r}++n,++e}return k.join("")}a={version:"1.4.1",ucs2:{decode:j,encode:R},decode:A,encode:L,toASCII:function(t){return k(t,(function(t){return m.test(t)?"xn--"+L(t):t}))},toUnicode:function(t){return k(t,(function(t){return y.test(t)?A(t.slice(4).toLowerCase()):t}))}},void 0===(i=function(){return a}.call(e,n,e,t))||(t.exports=i)}()}).call(this,n(66)(t),n(15))},function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));var r="<anonymous>";function i(t){try{return t&&"function"==typeof t&&t.name||r}catch(t){return r}}},function(t,e){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(t){"object"==typeof window&&(n=window)}t.exports=n},function(t,e,n){"use strict";var r=n(9)("%Object.defineProperty%",!0)||!1;if(r)try{r({},"a",{value:1})}catch(t){r=!1}t.exports=r},function(t,e,n){"use strict";var r=n(57);t.exports=Function.prototype.bind||r},function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));var r=n(3);function i(t){try{for(var e=t,n=[],r=0,i=0,s=void 0;e&&r++<5&&!("html"===(s=o(e))||r>1&&i+3*n.length+s.length>=80);)n.push(s),i+=s.length,e=e.parentNode;return n.reverse().join(" > ")}catch(t){return"<unknown>"}}function o(t){var e,n,i,o,s,a=t,c=[];if(!a||!a.tagName)return"";if(c.push(a.tagName.toLowerCase()),a.id&&c.push("#"+a.id),(e=a.className)&&Object(r.k)(e))for(n=e.split(/\s+/),s=0;s<n.length;s++)c.push("."+n[s]);var u=["type","name","title","alt"];for(s=0;s<u.length;s++)i=u[s],(o=a.getAttribute(i))&&c.push("["+i+'="'+o+'"]');return c.join("")}},,function(t,e){t.exports=function(t){if(!t.webpackPolyfill){var e=Object.create(t);e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),Object.defineProperty(e,"exports",{enumerable:!0}),e.webpackPolyfill=1}return e}},function(t,e,n){"use strict";var r=function(t){var e,n;function r(e,n,r){var i;return(i=t.call(this,e)||this).listener=n,i.context=r,i}return n=t,(e=r).prototype=Object.create(n.prototype),e.prototype.constructor=e,e.__proto__=n,r}(n(43));t.exports=r},function(t,e,n){"use strict";var r=function(t){};t.exports=function(t,e){for(var n=arguments.length,i=new Array(n>2?n-2:0),o=2;o<n;o++)i[o-2]=arguments[o];if(r(e),!t){var s;if(void 0===e)s=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var a=0;(s=new Error(e.replace(/%s/g,(function(){return String(i[a++])})))).name="Invariant Violation"}throw s.framesToPop=1,s}}},function(t,e,n){"use strict";var r=n(47),i="function"==typeof Symbol&&"symbol"==typeof Symbol("foo"),o=Object.prototype.toString,s=Array.prototype.concat,a=n(25),c=n(29)(),u=function(t,e,n,r){if(e in t)if(!0===r){if(t[e]===n)return}else if("function"!=typeof(i=r)||"[object Function]"!==o.call(i)||!r())return;var i;c?a(t,e,n,!0):a(t,e,n)},l=function(t,e){var n=arguments.length>2?arguments[2]:{},o=r(e);i&&(o=s.call(o,Object.getOwnPropertySymbols(e)));for(var a=0;a<o.length;a+=1)u(t,o[a],e[o[a]],n[o[a]])};l.supportsDescriptors=!!c,t.exports=l},function(t,e,n){"use strict";var r=Object.prototype.toString;t.exports=function(t){var e=r.call(t),n="[object Arguments]"===e;return n||(n="[object Array]"!==e&&null!==t&&"object"==typeof t&&"number"==typeof t.length&&t.length>=0&&"[object Function]"===r.call(t.callee)),n}},function(t,e,n){"use strict";var r=n(16),i=n(26),o=n(10),s=n(28);t.exports=function(t,e,n){if(!t||"object"!=typeof t&&"function"!=typeof t)throw new o("`obj` must be an object or a function`");if("string"!=typeof e&&"symbol"!=typeof e)throw new o("`property` must be a string or a symbol`");if(arguments.length>3&&"boolean"!=typeof arguments[3]&&null!==arguments[3])throw new o("`nonEnumerable`, if provided, must be a boolean or null");if(arguments.length>4&&"boolean"!=typeof arguments[4]&&null!==arguments[4])throw new o("`nonWritable`, if provided, must be a boolean or null");if(arguments.length>5&&"boolean"!=typeof arguments[5]&&null!==arguments[5])throw new o("`nonConfigurable`, if provided, must be a boolean or null");if(arguments.length>6&&"boolean"!=typeof arguments[6])throw new o("`loose`, if provided, must be a boolean");var a=arguments.length>3?arguments[3]:null,c=arguments.length>4?arguments[4]:null,u=arguments.length>5?arguments[5]:null,l=arguments.length>6&&arguments[6],d=!!s&&s(t,e);if(r)r(t,e,{configurable:null===u&&d?d.configurable:!u,enumerable:null===a&&d?d.enumerable:!a,value:n,writable:null===c&&d?d.writable:!c});else{if(!l&&(a||c||u))throw new i("This environment does not support defining a property as non-configurable, non-writable, or non-enumerable.");t[e]=n}}},function(t,e,n){"use strict";t.exports=SyntaxError},function(t,e,n){"use strict";var r=Function.prototype.call,i=Object.prototype.hasOwnProperty,o=n(17);t.exports=o.call(r,i)},function(t,e,n){"use strict";var r=n(9)("%Object.getOwnPropertyDescriptor%",!0);if(r)try{r([],"length")}catch(t){r=null}t.exports=r},function(t,e,n){"use strict";var r=n(16),i=function(){return!!r};i.hasArrayLengthDefineBug=function(){if(!r)return null;try{return 1!==r([],"length",{value:1}).length}catch(t){return!0}},t.exports=i},function(t,e,n){"use strict";var r=n(17),i=n(9),o=n(58),s=n(10),a=i("%Function.prototype.apply%"),c=i("%Function.prototype.call%"),u=i("%Reflect.apply%",!0)||r.call(c,a),l=n(16),d=i("%Math.max%");t.exports=function(t){if("function"!=typeof t)throw new s("a function is required");var e=u(r,c,arguments);return o(e,1+d(0,t.length-(arguments.length-1)),!0)};var p=function(){return u(r,a,arguments)};l?l(t.exports,"apply",{value:p}):t.exports.apply=p},function(t,e,n){"use strict";var r=n(59),i=n(60),o=i("Object.prototype.propertyIsEnumerable"),s=i("Array.prototype.push");t.exports=function(t){var e=r(t),n=[];for(var i in e)o(e,i)&&s(n,[i,e[i]]);return n}},function(t,e,n){"use strict";var r=n(31);t.exports=function(){return"function"==typeof Object.entries?Object.entries:r}},,function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));var r=function(){function t(){this._hasWeakSet="function"==typeof WeakSet,this._inner=this._hasWeakSet?new WeakSet:[]}return t.prototype.memoize=function(t){if(this._hasWeakSet)return!!this._inner.has(t)||(this._inner.add(t),!1);for(var e=0;e<this._inner.length;e++){if(this._inner[e]===t)return!0}return this._inner.push(t),!1},t.prototype.unmemoize=function(t){if(this._hasWeakSet)this._inner.delete(t);else for(var e=0;e<this._inner.length;e++)if(this._inner[e]===t){this._inner.splice(e,1);break}},t}()},function(t,e,n){var r={EventEmitter:n(42),EmitterSubscription:n(21)};t.exports=r},function(t,e,n){"use strict";var r=n(46),i=n(62),o=n(27),s=function(t){i(!1,t)},a=String.prototype.replace,c=String.prototype.split,u="||||",l=function(t){var e=t%100,n=e%10;return 11!==e&&1===n?0:2<=n&&n<=4&&!(e>=12&&e<=14)?1:2},d={pluralTypes:{arabic:function(t){if(t<3)return t;var e=t%100;return e>=3&&e<=10?3:e>=11?4:5},bosnian_serbian:l,chinese:function(){return 0},croatian:l,french:function(t){return t>=2?1:0},german:function(t){return 1!==t?1:0},russian:l,lithuanian:function(t){return t%10==1&&t%100!=11?0:t%10>=2&&t%10<=9&&(t%100<11||t%100>19)?1:2},czech:function(t){return 1===t?0:t>=2&&t<=4?1:2},polish:function(t){if(1===t)return 0;var e=t%10;return 2<=e&&e<=4&&(t%100<10||t%100>=20)?1:2},icelandic:function(t){return t%10!=1||t%100==11?1:0},slovenian:function(t){var e=t%100;return 1===e?0:2===e?1:3===e||4===e?2:3},romanian:function(t){if(1===t)return 0;var e=t%100;return 0===t||e>=2&&e<=19?1:2},ukrainian:l},pluralTypeToLanguages:{arabic:["ar"],bosnian_serbian:["bs-Latn-BA","bs-Cyrl-BA","srl-RS","sr-RS"],chinese:["id","id-ID","ja","ko","ko-KR","lo","ms","th","th-TH","zh"],croatian:["hr","hr-HR"],german:["fa","da","de","en","es","fi","el","he","hi-IN","hu","hu-HU","it","nl","no","pt","sv","tr"],french:["fr","tl","pt-br"],russian:["ru","ru-RU"],lithuanian:["lt"],czech:["cs","cs-CZ","sk"],polish:["pl"],icelandic:["is","mk"],slovenian:["sl-SL"],romanian:["ro"],ukrainian:["uk","ua"]}};function p(t,e){var n=function(t){for(var e={},n=r(t),i=0;i<n.length;i+=1)for(var o=n[i][0],s=n[i][1],a=0;a<s.length;a+=1)e[s[a]]=o;return e}(t.pluralTypeToLanguages);return n[e]||n[c.call(e,/-/,1)[0]]||n.en}function h(t){return t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}var f,_=(f={},function(t,e){var n=f[e];return n&&!t.pluralTypes[n]&&(n=null,f[e]=n),n||(n=p(t,e))&&(f[e]=n),n}),g=/%\{(.*?)\}/g;function y(t,e,n,r,i,s){if("string"!=typeof t)throw new TypeError("Polyglot.transformPhrase expects argument #1 to be string");if(null==e)return t;var l=t,p=r||g,h=s||a,f="number"==typeof e?{smart_count:e}:e;if(null!=f.smart_count&&t){var y=i||d,m=c.call(t,u),v=function(t,e,n){return t.pluralTypes[e](n)}(y,_(y,n||"en"),f.smart_count);l=a.call(m[v]||m[0],/^[^\S]*|[^\S]*$/g,"")}return l=h.call(l,p,(function(t,e){return o(f,e)&&null!=f[e]?f[e]:t}))}function m(t){var e=t||{};this.phrases={},this.extend(e.phrases||{}),this.currentLocale=e.locale||"en";var n=e.allowMissing?y:null;this.onMissingKey="function"==typeof e.onMissingKey?e.onMissingKey:n,this.warn=e.warn||s,this.replaceImplementation=e.replace||a,this.tokenRegex=function(t){var e=t&&t.prefix||"%{",n=t&&t.suffix||"}";if(e===u||n===u)throw new RangeError('"'+u+'" token is reserved for pluralization');return new RegExp(h(e)+"(.*?)"+h(n),"g")}(e.interpolation),this.pluralRules=e.pluralRules||d}m.prototype.locale=function(t){return t&&(this.currentLocale=t),this.currentLocale},m.prototype.extend=function(t,e){for(var n=r(t||{}),i=0;i<n.length;i+=1){var o=n[i][0],s=n[i][1],a=e?e+"."+o:o;"object"==typeof s?this.extend(s,a):this.phrases[a]=s}},m.prototype.unset=function(t,e){if("string"==typeof t)delete this.phrases[t];else for(var n=r(t||{}),i=0;i<n.length;i+=1){var o=n[i][0],s=n[i][1],a=e?e+"."+o:o;"object"==typeof s?this.unset(s,a):delete this.phrases[a]}},m.prototype.clear=function(){this.phrases={}},m.prototype.replace=function(t){this.clear(),this.extend(t)},m.prototype.t=function(t,e){var n,r,i=null==e?{}:e;if("string"==typeof this.phrases[t])n=this.phrases[t];else if("string"==typeof i._)n=i._;else if(this.onMissingKey){r=(0,this.onMissingKey)(t,i,this.currentLocale,this.tokenRegex,this.pluralRules,this.replaceImplementation)}else this.warn('Missing translation for key: "'+t+'"'),r=t;return"string"==typeof n&&(r=y(n,i,this.currentLocale,this.tokenRegex,this.pluralRules,this.replaceImplementation)),r},m.prototype.has=function(t){return o(this.phrases,t)},m.transformPhrase=function(t,e,n){return y(t,e,n)},t.exports=m},function(t,e){t.exports='<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" id="Capa_1" x="0px" y="0px" viewBox="0 0 511.626 511.626" style="enable-background:new 0 0 511.626 511.626;" xml:space="preserve"><g><path d="M477.371,127.44c-22.843-28.074-53.871-50.249-93.076-66.523c-39.204-16.272-82.035-24.41-128.478-24.41 c-34.643,0-67.762,4.805-99.357,14.417c-31.595,9.611-58.812,22.602-81.653,38.97c-22.845,16.37-41.018,35.832-54.534,58.385 C6.757,170.833,0,194.484,0,219.228c0,28.549,8.61,55.3,25.837,80.234c17.227,24.931,40.778,45.871,70.664,62.811 c-2.096,7.611-4.57,14.846-7.426,21.693c-2.855,6.852-5.424,12.474-7.708,16.851c-2.286,4.377-5.376,9.233-9.281,14.562 c-3.899,5.328-6.849,9.089-8.848,11.275c-1.997,2.19-5.28,5.812-9.851,10.849c-4.565,5.048-7.517,8.329-8.848,9.855 c-0.193,0.089-0.953,0.952-2.285,2.567c-1.331,1.615-1.999,2.423-1.999,2.423l-1.713,2.566c-0.953,1.431-1.381,2.334-1.287,2.707 c0.096,0.373-0.094,1.331-0.57,2.851c-0.477,1.526-0.428,2.669,0.142,3.433v0.284c0.765,3.429,2.43,6.187,4.998,8.277 c2.568,2.092,5.474,2.95,8.708,2.563c12.375-1.522,23.223-3.606,32.548-6.276c49.87-12.758,93.649-35.782,131.334-69.097 c14.272,1.522,28.072,2.286,41.396,2.286c46.442,0,89.271-8.138,128.479-24.417c39.208-16.272,70.233-38.448,93.072-66.517 c22.843-28.062,34.263-58.663,34.263-91.781C511.626,186.108,500.207,155.509,477.371,127.44z"></path></g></svg>'},function(t,e,n){t.exports=function(){"use strict";var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};"function"==typeof SuppressedError&&SuppressedError;var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",n="ARRAYBUFFER not supported by this environment",r="UINT8ARRAY not supported by this environment";function i(t,e,n,r){var i,o,s,a=e||[0],c=(n=n||0)>>>3,u=-1===r?3:0;for(i=0;i<t.length;i+=1)o=(s=i+c)>>>2,a.length<=o&&a.push(0),a[o]|=t[i]<<8*(u+r*(s%4));return{value:a,binLen:8*t.length+n}}function o(t,o,s){switch(o){case"UTF8":case"UTF16BE":case"UTF16LE":break;default:throw new Error("encoding must be UTF8, UTF16BE, or UTF16LE")}switch(t){case"HEX":return function(t,e,n){return function(t,e,n,r){var i,o,s,a;if(0!=t.length%2)throw new Error("String of HEX type must be in byte increments");var c=e||[0],u=(n=n||0)>>>3,l=-1===r?3:0;for(i=0;i<t.length;i+=2){if(o=parseInt(t.substr(i,2),16),isNaN(o))throw new Error("String of HEX type contains invalid characters");for(s=(a=(i>>>1)+u)>>>2;c.length<=s;)c.push(0);c[s]|=o<<8*(l+r*(a%4))}return{value:c,binLen:4*t.length+n}}(t,e,n,s)};case"TEXT":return function(t,e,n){return function(t,e,n,r,i){var o,s,a,c,u,l,d,p,h=0,f=n||[0],_=(r=r||0)>>>3;if("UTF8"===e)for(d=-1===i?3:0,a=0;a<t.length;a+=1)for(s=[],128>(o=t.charCodeAt(a))?s.push(o):2048>o?(s.push(192|o>>>6),s.push(128|63&o)):55296>o||57344<=o?s.push(224|o>>>12,128|o>>>6&63,128|63&o):(a+=1,o=65536+((1023&o)<<10|1023&t.charCodeAt(a)),s.push(240|o>>>18,128|o>>>12&63,128|o>>>6&63,128|63&o)),c=0;c<s.length;c+=1){for(u=(l=h+_)>>>2;f.length<=u;)f.push(0);f[u]|=s[c]<<8*(d+i*(l%4)),h+=1}else for(d=-1===i?2:0,p="UTF16LE"===e&&1!==i||"UTF16LE"!==e&&1===i,a=0;a<t.length;a+=1){for(o=t.charCodeAt(a),!0===p&&(o=(c=255&o)<<8|o>>>8),u=(l=h+_)>>>2;f.length<=u;)f.push(0);f[u]|=o<<8*(d+i*(l%4)),h+=2}return{value:f,binLen:8*h+r}}(t,o,e,n,s)};case"B64":return function(t,n,r){return function(t,n,r,i){var o,s,a,c,u,l,d=0,p=n||[0],h=(r=r||0)>>>3,f=-1===i?3:0,_=t.indexOf("=");if(-1===t.search(/^[a-zA-Z0-9=+/]+$/))throw new Error("Invalid character in base-64 string");if(t=t.replace(/=/g,""),-1!==_&&_<t.length)throw new Error("Invalid '=' found in base-64 string");for(o=0;o<t.length;o+=4){for(c=t.substr(o,4),a=0,s=0;s<c.length;s+=1)a|=e.indexOf(c.charAt(s))<<18-6*s;for(s=0;s<c.length-1;s+=1){for(u=(l=d+h)>>>2;p.length<=u;)p.push(0);p[u]|=(a>>>16-8*s&255)<<8*(f+i*(l%4)),d+=1}}return{value:p,binLen:8*d+r}}(t,n,r,s)};case"BYTES":return function(t,e,n){return function(t,e,n,r){var i,o,s,a,c=e||[0],u=(n=n||0)>>>3,l=-1===r?3:0;for(o=0;o<t.length;o+=1)i=t.charCodeAt(o),s=(a=o+u)>>>2,c.length<=s&&c.push(0),c[s]|=i<<8*(l+r*(a%4));return{value:c,binLen:8*t.length+n}}(t,e,n,s)};case"ARRAYBUFFER":try{new ArrayBuffer(0)}catch(t){throw new Error(n)}return function(t,e,n){return r=e,o=n,a=s,i(new Uint8Array(t),r,o,a);var r,o,a};case"UINT8ARRAY":try{new Uint8Array(0)}catch(t){throw new Error(r)}return function(t,e,n){return i(t,e,n,s)};default:throw new Error("format must be HEX, TEXT, B64, BYTES, ARRAYBUFFER, or UINT8ARRAY")}}function s(t,i,o,s){switch(t){case"HEX":return function(t){return function(t,e,n,r){var i,o,s="0123456789abcdef",a="",c=e/8,u=-1===n?3:0;for(i=0;i<c;i+=1)o=t[i>>>2]>>>8*(u+n*(i%4)),a+=s.charAt(o>>>4&15)+s.charAt(15&o);return r.outputUpper?a.toUpperCase():a}(t,i,o,s)};case"B64":return function(t){return function(t,n,r,i){var o,s,a,c,u,l="",d=n/8,p=-1===r?3:0;for(o=0;o<d;o+=3)for(c=o+1<d?t[o+1>>>2]:0,u=o+2<d?t[o+2>>>2]:0,a=(t[o>>>2]>>>8*(p+r*(o%4))&255)<<16|(c>>>8*(p+r*((o+1)%4))&255)<<8|u>>>8*(p+r*((o+2)%4))&255,s=0;s<4;s+=1)l+=8*o+6*s<=n?e.charAt(a>>>6*(3-s)&63):i.b64Pad;return l}(t,i,o,s)};case"BYTES":return function(t){return function(t,e,n){var r,i,o="",s=e/8,a=-1===n?3:0;for(r=0;r<s;r+=1)i=t[r>>>2]>>>8*(a+n*(r%4))&255,o+=String.fromCharCode(i);return o}(t,i,o)};case"ARRAYBUFFER":try{new ArrayBuffer(0)}catch(t){throw new Error(n)}return function(t){return function(t,e,n){var r,i=e/8,o=new ArrayBuffer(i),s=new Uint8Array(o),a=-1===n?3:0;for(r=0;r<i;r+=1)s[r]=t[r>>>2]>>>8*(a+n*(r%4))&255;return o}(t,i,o)};case"UINT8ARRAY":try{new Uint8Array(0)}catch(t){throw new Error(r)}return function(t){return function(t,e,n){var r,i=e/8,o=-1===n?3:0,s=new Uint8Array(i);for(r=0;r<i;r+=1)s[r]=t[r>>>2]>>>8*(o+n*(r%4))&255;return s}(t,i,o)};default:throw new Error("format must be HEX, B64, BYTES, ARRAYBUFFER, or UINT8ARRAY")}}function a(t){var e={outputUpper:!1,b64Pad:"=",outputLen:-1},n=t||{},r="Output length must be a multiple of 8";if(e.outputUpper=n.outputUpper||!1,n.b64Pad&&(e.b64Pad=n.b64Pad),n.outputLen){if(n.outputLen%8!=0)throw new Error(r);e.outputLen=n.outputLen}else if(n.shakeLen){if(n.shakeLen%8!=0)throw new Error(r);e.outputLen=n.shakeLen}if("boolean"!=typeof e.outputUpper)throw new Error("Invalid outputUpper formatting option");if("string"!=typeof e.b64Pad)throw new Error("Invalid b64Pad formatting option");return e}function c(t,e){return t<<e|t>>>32-e}function u(t,e,n){return t^e^n}function l(t,e,n){return t&e^t&n^e&n}function d(t,e){var n=(65535&t)+(65535&e);return(65535&(t>>>16)+(e>>>16)+(n>>>16))<<16|65535&n}function p(t,e,n,r,i){var o=(65535&t)+(65535&e)+(65535&n)+(65535&r)+(65535&i);return(65535&(t>>>16)+(e>>>16)+(n>>>16)+(r>>>16)+(i>>>16)+(o>>>16))<<16|65535&o}function h(t){return[1732584193,4023233417,2562383102,271733878,3285377520]}function f(t,e){var n,r,i,o,s,a,h,f,_=[];for(n=e[0],r=e[1],i=e[2],o=e[3],s=e[4],h=0;h<80;h+=1)_[h]=h<16?t[h]:c(_[h-3]^_[h-8]^_[h-14]^_[h-16],1),a=h<20?p(c(n,5),(f=r)&i^~f&o,s,1518500249,_[h]):h<40?p(c(n,5),u(r,i,o),s,1859775393,_[h]):h<60?p(c(n,5),l(r,i,o),s,2400959708,_[h]):p(c(n,5),u(r,i,o),s,3395469782,_[h]),s=o,o=i,i=c(r,30),r=n,n=a;return e[0]=d(n,e[0]),e[1]=d(r,e[1]),e[2]=d(i,e[2]),e[3]=d(o,e[3]),e[4]=d(s,e[4]),e}function _(t,e,n,r){for(var i,o=15+(e+65>>>9<<4),s=e+n;t.length<=o;)t.push(0);for(t[e>>>5]|=128<<24-e%32,t[o]=4294967295&s,t[o-1]=s/4294967296|0,i=0;i<t.length;i+=16)r=f(t.slice(i,i+16),r);return r}return function(e){function n(t,n,r){var i=this;if("SHA-1"!==t)throw new Error("Chosen SHA variant is not supported");var s=r||{};return(i=e.call(this,t,n,r)||this).t=!0,i.i=i.o,i.u=-1,i.h=o(i.v,i.l,i.u),i.p=f,i.A=function(t){return t.slice()},i.U=h,i.T=_,i.R=[1732584193,4023233417,2562383102,271733878,3285377520],i.m=512,i.F=160,i.g=!1,s.hmacKey&&i.B(function(t,e,n,r){var i=t+" must include a value and format";if(!e){if(!r)throw new Error(i);return r}if(void 0===e.value||!e.format)throw new Error(i);return o(e.format,e.encoding||"UTF8",n)(e.value)}("hmacKey",s.hmacKey,i.u)),i}return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}(n,e),n}(function(){function t(t,e,n){var r=n||{};if(this.v=e,this.l=r.encoding||"UTF8",this.numRounds=r.numRounds||1,isNaN(this.numRounds)||this.numRounds!==parseInt(this.numRounds,10)||1>this.numRounds)throw new Error("numRounds must a integer >= 1");this.Y=t,this.S=[],this.C=0,this.I=!1,this.H=0,this.L=!1,this.N=[],this.X=[]}return t.prototype.update=function(t){var e,n=0,r=this.m>>>5,i=this.h(t,this.S,this.C),o=i.binLen,s=i.value,a=o>>>5;for(e=0;e<a;e+=r)n+this.m<=o&&(this.R=this.p(s.slice(e,e+r),this.R),n+=this.m);return this.H+=n,this.S=s.slice(n>>>5),this.C=o%this.m,this.I=!0,this},t.prototype.getHash=function(t,e){var n,r,i=this.F,o=a(e);if(this.g){if(-1===o.outputLen)throw new Error("Output length must be specified in options");i=o.outputLen}var c=s(t,i,this.u,o);if(this.L&&this.i)return c(this.i(o));for(r=this.T(this.S.slice(),this.C,this.H,this.A(this.R),i),n=1;n<this.numRounds;n+=1)this.g&&i%32!=0&&(r[r.length-1]&=16777215>>>24-i%32),r=this.T(r,i,0,this.U(this.Y),i);return c(r)},t.prototype.setHMACKey=function(t,e,n){if(!this.t)throw new Error("Variant does not support HMAC");if(this.I)throw new Error("Cannot set MAC key after calling update");var r=o(e,(n||{}).encoding||"UTF8",this.u);this.B(r(t))},t.prototype.B=function(t){var e,n=this.m>>>3,r=n/4-1;if(1!==this.numRounds)throw new Error("Cannot set numRounds with MAC");if(this.L)throw new Error("MAC key already set");for(n<t.binLen/8&&(t.value=this.T(t.value,t.binLen,0,this.U(this.Y),this.F));t.value.length<=r;)t.value.push(0);for(e=0;e<=r;e+=1)this.N[e]=909522486^t.value[e],this.X[e]=1549556828^t.value[e];this.R=this.p(this.N,this.R),this.H=this.m,this.L=!0},t.prototype.getHMAC=function(t,e){var n=a(e);return s(t,this.F,this.u,n)(this.o())},t.prototype.o=function(){var t;if(!this.L)throw new Error("Cannot call getHMAC without first setting MAC key");var e=this.T(this.S.slice(),this.C,this.H,this.A(this.R),this.F);return t=this.p(this.X,this.U(this.Y)),this.T(e,this.F,this.m,t,this.F)},t}())}()},,,function(t,e){var n,r,i=t.exports={};function o(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}function a(t){if(n===setTimeout)return setTimeout(t,0);if((n===o||!n)&&setTimeout)return n=setTimeout,setTimeout(t,0);try{return n(t,0)}catch(e){try{return n.call(null,t,0)}catch(e){return n.call(this,t,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:o}catch(t){n=o}try{r="function"==typeof clearTimeout?clearTimeout:s}catch(t){r=s}}();var c,u=[],l=!1,d=-1;function p(){l&&c&&(l=!1,c.length?u=c.concat(u):d=-1,u.length&&h())}function h(){if(!l){var t=a(p);l=!0;for(var e=u.length;e;){for(c=u,u=[];++d<e;)c&&c[d].run();d=-1,e=u.length}c=null,l=!1,function(t){if(r===clearTimeout)return clearTimeout(t);if((r===s||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(t);try{return r(t)}catch(e){try{return r.call(null,t)}catch(e){return r.call(this,t)}}}(t)}}function f(t,e){this.fun=t,this.array=e}function _(){}i.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];u.push(new f(t,e)),1!==u.length||l||a(h)},f.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=_,i.addListener=_,i.once=_,i.off=_,i.removeListener=_,i.removeAllListeners=_,i.emit=_,i.prependListener=_,i.prependOnceListener=_,i.listeners=function(t){return[]},i.binding=function(t){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(t){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},function(t,e,n){"use strict";var r=n(21),i=n(44),o=n(22),s=n(45),a=function(){function t(){this._subscriber=new i,this._currentSubscription=null}var e=t.prototype;return e.addListener=function(t,e,n){return this._subscriber.addSubscription(t,new r(this._subscriber,e,n))},e.once=function(t,e,n){var r=this;return this.addListener(t,(function(){r.removeCurrentListener(),e.apply(n,arguments)}))},e.removeAllListeners=function(t){this._subscriber.removeAllSubscriptions(t)},e.removeCurrentListener=function(){this._currentSubscription||o(!1),this._subscriber.removeSubscription(this._currentSubscription)},e.listeners=function(t){var e=this._subscriber.getSubscriptionsForType(t);return e?e.filter(s.thatReturnsTrue).map((function(t){return t.listener})):[]},e.emit=function(t){var e=this._subscriber.getSubscriptionsForType(t);if(e){for(var n=Object.keys(e),r=0;r<n.length;r++){var i=e[n[r]];i&&(this._currentSubscription=i,this.__emitToSubscription.apply(this,[i].concat(Array.prototype.slice.call(arguments))))}this._currentSubscription=null}},e.__emitToSubscription=function(t,e){var n=Array.prototype.slice.call(arguments,2);t.listener.apply(t.context,n)},t}();t.exports=a},function(t,e,n){"use strict";var r=function(){function t(t){this.subscriber=t}return t.prototype.remove=function(){this.subscriber&&(this.subscriber.removeSubscription(this),this.subscriber=null)},t}();t.exports=r},function(t,e,n){"use strict";var r=n(22),i=function(){function t(){this._subscriptionsForType={},this._currentSubscription=null}var e=t.prototype;return e.addSubscription=function(t,e){e.subscriber!==this&&r(!1),this._subscriptionsForType[t]||(this._subscriptionsForType[t]=[]);var n=this._subscriptionsForType[t].length;return this._subscriptionsForType[t].push(e),e.eventType=t,e.key=n,e},e.removeAllSubscriptions=function(t){void 0===t?this._subscriptionsForType={}:delete this._subscriptionsForType[t]},e.removeSubscription=function(t){var e=t.eventType,n=t.key,r=this._subscriptionsForType[e];r&&delete r[n]},e.getSubscriptionsForType=function(t){return this._subscriptionsForType[t]},t}();t.exports=i},function(t,e,n){"use strict";function r(t){return function(){return t}}var i=function(){};i.thatReturns=r,i.thatReturnsFalse=r(!1),i.thatReturnsTrue=r(!0),i.thatReturnsNull=r(null),i.thatReturnsThis=function(){return this},i.thatReturnsArgument=function(t){return t},t.exports=i},function(t,e,n){"use strict";var r=n(23),i=n(30),o=n(31),s=n(32),a=n(61),c=i(s(),Object);r(c,{getPolyfill:s,implementation:o,shim:a}),t.exports=c},function(t,e,n){"use strict";var r=Array.prototype.slice,i=n(24),o=Object.keys,s=o?function(t){return o(t)}:n(48),a=Object.keys;s.shim=function(){if(Object.keys){var t=function(){var t=Object.keys(arguments);return t&&t.length===arguments.length}(1,2);t||(Object.keys=function(t){return i(t)?a(r.call(t)):a(t)})}else Object.keys=s;return Object.keys||s},t.exports=s},function(t,e,n){"use strict";var r;if(!Object.keys){var i=Object.prototype.hasOwnProperty,o=Object.prototype.toString,s=n(24),a=Object.prototype.propertyIsEnumerable,c=!a.call({toString:null},"toString"),u=a.call((function(){}),"prototype"),l=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],d=function(t){var e=t.constructor;return e&&e.prototype===t},p={$applicationCache:!0,$console:!0,$external:!0,$frame:!0,$frameElement:!0,$frames:!0,$innerHeight:!0,$innerWidth:!0,$onmozfullscreenchange:!0,$onmozfullscreenerror:!0,$outerHeight:!0,$outerWidth:!0,$pageXOffset:!0,$pageYOffset:!0,$parent:!0,$scrollLeft:!0,$scrollTop:!0,$scrollX:!0,$scrollY:!0,$self:!0,$webkitIndexedDB:!0,$webkitStorageInfo:!0,$window:!0},h=function(){if("undefined"==typeof window)return!1;for(var t in window)try{if(!p["$"+t]&&i.call(window,t)&&null!==window[t]&&"object"==typeof window[t])try{d(window[t])}catch(t){return!0}}catch(t){return!0}return!1}();r=function(t){var e=null!==t&&"object"==typeof t,n="[object Function]"===o.call(t),r=s(t),a=e&&"[object String]"===o.call(t),p=[];if(!e&&!n&&!r)throw new TypeError("Object.keys called on a non-object");var f=u&&n;if(a&&t.length>0&&!i.call(t,0))for(var _=0;_<t.length;++_)p.push(String(_));if(r&&t.length>0)for(var g=0;g<t.length;++g)p.push(String(g));else for(var y in t)f&&"prototype"===y||!i.call(t,y)||p.push(String(y));if(c)for(var m=function(t){if("undefined"==typeof window||!h)return d(t);try{return d(t)}catch(t){return!1}}(t),v=0;v<l.length;++v)m&&"constructor"===l[v]||!i.call(t,l[v])||p.push(l[v]);return p}}t.exports=r},function(t,e,n){"use strict";t.exports=Error},function(t,e,n){"use strict";t.exports=EvalError},function(t,e,n){"use strict";t.exports=RangeError},function(t,e,n){"use strict";t.exports=ReferenceError},function(t,e,n){"use strict";t.exports=URIError},function(t,e,n){"use strict";var r="undefined"!=typeof Symbol&&Symbol,i=n(55);t.exports=function(){return"function"==typeof r&&("function"==typeof Symbol&&("symbol"==typeof r("foo")&&("symbol"==typeof Symbol("bar")&&i())))}},function(t,e,n){"use strict";t.exports=function(){if("function"!=typeof Symbol||"function"!=typeof Object.getOwnPropertySymbols)return!1;if("symbol"==typeof Symbol.iterator)return!0;var t={},e=Symbol("test"),n=Object(e);if("string"==typeof e)return!1;if("[object Symbol]"!==Object.prototype.toString.call(e))return!1;if("[object Symbol]"!==Object.prototype.toString.call(n))return!1;for(e in t[e]=42,t)return!1;if("function"==typeof Object.keys&&0!==Object.keys(t).length)return!1;if("function"==typeof Object.getOwnPropertyNames&&0!==Object.getOwnPropertyNames(t).length)return!1;var r=Object.getOwnPropertySymbols(t);if(1!==r.length||r[0]!==e)return!1;if(!Object.prototype.propertyIsEnumerable.call(t,e))return!1;if("function"==typeof Object.getOwnPropertyDescriptor){var i=Object.getOwnPropertyDescriptor(t,e);if(42!==i.value||!0!==i.enumerable)return!1}return!0}},function(t,e,n){"use strict";var r={__proto__:null,foo:{}},i=Object;t.exports=function(){return{__proto__:r}.foo===r.foo&&!(r instanceof i)}},function(t,e,n){"use strict";var r=Object.prototype.toString,i=Math.max,o=function(t,e){for(var n=[],r=0;r<t.length;r+=1)n[r]=t[r];for(var i=0;i<e.length;i+=1)n[i+t.length]=e[i];return n};t.exports=function(t){var e=this;if("function"!=typeof e||"[object Function]"!==r.apply(e))throw new TypeError("Function.prototype.bind called on incompatible "+e);for(var n,s=function(t,e){for(var n=[],r=e||0,i=0;r<t.length;r+=1,i+=1)n[i]=t[r];return n}(arguments,1),a=i(0,e.length-s.length),c=[],u=0;u<a;u++)c[u]="$"+u;if(n=Function("binder","return function ("+function(t,e){for(var n="",r=0;r<t.length;r+=1)n+=t[r],r+1<t.length&&(n+=e);return n}(c,",")+"){ return binder.apply(this,arguments); }")((function(){if(this instanceof n){var r=e.apply(this,o(s,arguments));return Object(r)===r?r:this}return e.apply(t,o(s,arguments))})),e.prototype){var l=function(){};l.prototype=e.prototype,n.prototype=new l,l.prototype=null}return n}},function(t,e,n){"use strict";var r=n(9),i=n(25),o=n(29)(),s=n(28),a=n(10),c=r("%Math.floor%");t.exports=function(t,e){if("function"!=typeof t)throw new a("`fn` is not a function");if("number"!=typeof e||e<0||e>4294967295||c(e)!==e)throw new a("`length` must be a positive 32-bit integer");var n=arguments.length>2&&!!arguments[2],r=!0,u=!0;if("length"in t&&s){var l=s(t,"length");l&&!l.configurable&&(r=!1),l&&!l.writable&&(u=!1)}return(r||u||!n)&&(o?i(t,"length",e,!0,!0):i(t,"length",e)),t}},function(t,e,n){"use strict";var r=n(10);t.exports=function(t){if(null==t)throw new r(arguments.length>0&&arguments[1]||"Cannot call method on "+t);return t}},function(t,e,n){"use strict";var r=n(9),i=n(30),o=i(r("String.prototype.indexOf"));t.exports=function(t,e){var n=r(t,!!e);return"function"==typeof n&&o(t,".prototype.")>-1?i(n):n}},function(t,e,n){"use strict";var r=n(32),i=n(23);t.exports=function(){var t=r();return i(Object,{entries:t},{entries:function(){return Object.entries!==t}}),t}},function(t,e,n){"use strict";var r=function(){};t.exports=r},function(t,e,n){var r=n(64),i=n(65);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[t.i,i,""]]);var o={insert:"head",singleton:!1};r(i,o);t.exports=i.locals||{}},function(t,e,n){"use strict";var r,i=function(){return void 0===r&&(r=Boolean(window&&document&&document.all&&!window.atob)),r},o=function(){var t={};return function(e){if(void 0===t[e]){var n=document.querySelector(e);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(t){n=null}t[e]=n}return t[e]}}(),s=[];function a(t){for(var e=-1,n=0;n<s.length;n++)if(s[n].identifier===t){e=n;break}return e}function c(t,e){for(var n={},r=[],i=0;i<t.length;i++){var o=t[i],c=e.base?o[0]+e.base:o[0],u=n[c]||0,l="".concat(c," ").concat(u);n[c]=u+1;var d=a(l),p={css:o[1],media:o[2],sourceMap:o[3]};-1!==d?(s[d].references++,s[d].updater(p)):s.push({identifier:l,updater:g(p,e),references:1}),r.push(l)}return r}function u(t){var e=document.createElement("style"),r=t.attributes||{};if(void 0===r.nonce){var i=n.nc;i&&(r.nonce=i)}if(Object.keys(r).forEach((function(t){e.setAttribute(t,r[t])})),"function"==typeof t.insert)t.insert(e);else{var s=o(t.insert||"head");if(!s)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");s.appendChild(e)}return e}var l,d=(l=[],function(t,e){return l[t]=e,l.filter(Boolean).join("\n")});function p(t,e,n,r){var i=n?"":r.media?"@media ".concat(r.media," {").concat(r.css,"}"):r.css;if(t.styleSheet)t.styleSheet.cssText=d(e,i);else{var o=document.createTextNode(i),s=t.childNodes;s[e]&&t.removeChild(s[e]),s.length?t.insertBefore(o,s[e]):t.appendChild(o)}}function h(t,e,n){var r=n.css,i=n.media,o=n.sourceMap;if(i?t.setAttribute("media",i):t.removeAttribute("media"),o&&"undefined"!=typeof btoa&&(r+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(o))))," */")),t.styleSheet)t.styleSheet.cssText=r;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(r))}}var f=null,_=0;function g(t,e){var n,r,i;if(e.singleton){var o=_++;n=f||(f=u(e)),r=p.bind(null,n,o,!1),i=p.bind(null,n,o,!0)}else n=u(e),r=h.bind(null,n,e),i=function(){!function(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t)}(n)};return r(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap)return;r(t=e)}else i()}}t.exports=function(t,e){(e=e||{}).singleton||"boolean"==typeof e.singleton||(e.singleton=i());var n=c(t=t||[],e);return function(t){if(t=t||[],"[object Array]"===Object.prototype.toString.call(t)){for(var r=0;r<n.length;r++){var i=a(n[r]);s[i].references--}for(var o=c(t,e),u=0;u<n.length;u++){var l=a(n[u]);0===s[l].references&&(s[l].updater(),s.splice(l,1))}n=o}}}},function(t,e,n){"use strict";n.r(e);var r=n(11),i=n.n(r)()(!1);i.push([t.i,'body,html{height:100%;margin:0;padding:0}#surfly-splash{transition:height 1s,opacity .3s,top 1s;opacity:0;width:100%;height:100%;background-color:#e54747;height:686px;left:0;position:fixed;top:0;z-index:1234568;perspective-origin:794.5px 343px;-webkit-perspective-origin:794.5px 343px;-webkit-text-emphasis-color:#fff;-webkit-text-fill-color:#fff;-webkit-text-stroke-color:#fff;transform-origin:794.5px 343px;-webkit-transform-origin:794.5px 343px}#surfly-splash,#surfly-splash-msg{border-color:#fff;color:#fff;display:block;font-family:Lato,Arial,sans-serif;outline-color:#fff;-webkit-column-rule-color:#fff}#surfly-splash-msg{height:18px;margin-bottom:16px;margin-top:16px;text-align:center;perspective-origin:794.5px 9px;-webkit-perspective-origin:794.5px 9px;-webkit-text-emphasis-color:#fff;-webkit-text-fill-color:#fff;-webkit-text-stroke-color:#fff;transform-origin:794.5px 9px;-webkit-transform-origin:794.5px 9px}@media(max-width:767px){#surfly-splash-msg{height:auto}}#surfly-open{color:#fff}@media(max-width:767px){#surfly-open{margin-top:10px;display:inline-block}}@media(min-width:768px){#surfly-open{margin-left:30px}}#surfly-cancel{margin-left:30px;color:#fff}#surfly-blocker{transition:opacity .3s;background-color:#fff;display:block;left:0;-moz-opacity:.5;-khtml-opacity:.5;-ms-filter:progid:DXImageTransform.Microsoft.Alpha(Opacity=50);filter:alpha(opacity=50);opacity:.5;position:fixed;top:0;z-index:1234567;perspective-origin:794.5px 343px;-webkit-perspective-origin:794.5px 343px;transform-origin:794.5px 343px;-webkit-transform-origin:794.5px 343px}#surfly-blocker,.surfly-popup-iframe{width:100%;height:100%}.surfly-transparent-div{position:fixed;background:#000;width:100%;height:100%;opacity:.6;top:0;left:0;z-index:5}.surfly-popup-iframe-div{background-color:#fff;display:block;height:80%;left:0;position:fixed;top:0;z-index:123456;perspective-origin:794.5px 343px;transform-origin:794.5px 343px;width:80%;margin:auto;bottom:0;right:0}.surfly-popup-close{background-image:url("data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTQiIGhlaWdodD0iMTQiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik0uNDY2LjQ3YS43NS43NSAwIDAxMS4wNiAwbDUuNDcgNS40NyA1LjQ3LTUuNDdhLjc1Ljc1IDAgMTExLjA2IDEuMDZMOC4wNTYgN2w1LjQ3IDUuNDdhLjc1Ljc1IDAgMTEtMS4wNiAxLjA2bC01LjQ3LTUuNDctNS40NyA1LjQ3YS43NS43NSAwIDAxLTEuMDYtMS4wNkw1LjkzNiA3IC40NjUgMS41M2EuNzUuNzUgMCAwMTAtMS4wNnoiIGZpbGw9IiNEOERBREEiLz48L3N2Zz4=");background-repeat:no-repeat;width:15px;height:15px;cursor:pointer;position:absolute;right:10px;top:10px;font-size:30px}.surfly-button{background-color:#c00;background-position:18px;color:#fff;cursor:pointer;font-family:Lato,Arial,sans-serif;height:20px;line-height:20px;outline-color:#e54747;text-align:center;font-size:14px;width:164px;-moz-column-rule-color:#e54747;column-rule-color:#e54747;padding:3px}.surfly-button svg{height:14px;width:14px;margin-right:5px}.surfly-button.surfly-button-visible{display:block}.surfly-button.surfly-button-hidden{display:none}.surfly-button.surfly-button-position-middleright{transform:rotate(270deg) translate(-72px,-72px)}.surfly-button.surfly-button-position-middleleft{transform:rotate(90deg) translate(72px,72px)}.surfly-modal{position:fixed;z-index:1;left:0;top:0;width:100%;height:100%;overflow:auto;background-color:rgba(0,0,0,.4);display:flex;align-items:center;justify-content:center}.surfly-modal.fadein{animation-duration:.2s;animation-name:fadein}@keyframes fadein{0%{background-color:transparent}to{background-color:rgba(0,0,0,.4)}}.surfly-modal *{font-family:Lato,Arial,sans-serif;box-sizing:border-box}.surfly-modal .content{position:relative;width:100%;max-width:450px;background-color:#fff;border-radius:11px 11px 10px 10px;box-shadow:0 0 12px 2px rgba(0,0,0,.2)}.surfly-modal .content.easein{animation-duration:.4s;animation-name:easein}@keyframes easein{0%{top:25%;opacity:0}to{top:0;opacity:1}}.surfly-modal .title{border-radius:10px 10px 0 0;padding:.3em 20px;font-size:125%}.surfly-modal .body{width:100%;padding:30px 20px 20px;display:inline-block}.surfly-modal p{margin-top:0;text-align:center;line-height:1.4}.surfly-modal .pin{margin:.6em 0;text-align:center;font-weight:700;font-size:200%}.surfly-modal .buttons{text-align:center;width:100%}.surfly-modal button{min-width:200px;font-size:15px;margin:5px;padding:10px;border:0;border-radius:30px;transition:color .3s,background .3s;-webkit-transition:color .3s,background .3s}.surfly-modal button.cancel{background-color:grey;color:#fff}.surfly-modal button.cancel:hover{background-color:#555;color:#fff}.surfly-modal button .spin{display:inline-block;height:1em;width:1em;border-width:2px;border-radius:100%;border-style:solid;animation:rotation .6s linear infinite}@keyframes rotation{0%{transform:rotate(0deg)}to{transform:rotate(359deg)}}',""]),e.default=i},function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),t.webpackPolyfill=1),t}},function(t,e,n){"use strict";n.r(e);var r={};n.r(r),n.d(r,"FunctionToString",(function(){return a})),n.d(r,"InboundFilters",(function(){return C}));var i,o={};n.r(o),n.d(o,"GlobalHandlers",(function(){return te})),n.d(o,"TryCatch",(function(){return Qt})),n.d(o,"Breadcrumbs",(function(){return Xt})),n.d(o,"LinkedErrors",(function(){return ee})),n.d(o,"UserAgent",(function(){return re}));var s,a=function(){function t(){this.name=t.id}return t.prototype.setupOnce=function(){i=Function.prototype.toString,Function.prototype.toString=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=this.__sentry_original__||this;return i.apply(n,t)}},t.id="FunctionToString",t}(),c=n(0),u=n(3),l=n(69);!function(t){t.PENDING="PENDING",t.RESOLVED="RESOLVED",t.REJECTED="REJECTED"}(s||(s={}));var d=function(){function t(t){var e=this;this._state=s.PENDING,this._handlers=[],this._resolve=function(t){e._setResult(s.RESOLVED,t)},this._reject=function(t){e._setResult(s.REJECTED,t)},this._setResult=function(t,n){e._state===s.PENDING&&(Object(u.m)(n)?n.then(e._resolve,e._reject):(e._state=t,e._value=n,e._executeHandlers()))},this._attachHandler=function(t){e._handlers=e._handlers.concat(t),e._executeHandlers()},this._executeHandlers=function(){if(e._state!==s.PENDING){var t=e._handlers.slice();e._handlers=[],t.forEach((function(t){t.done||(e._state===s.RESOLVED&&t.onfulfilled&&t.onfulfilled(e._value),e._state===s.REJECTED&&t.onrejected&&t.onrejected(e._value),t.done=!0)}))}};try{t(this._resolve,this._reject)}catch(t){this._reject(t)}}return t.resolve=function(e){return new t((function(t){t(e)}))},t.reject=function(e){return new t((function(t,n){n(e)}))},t.all=function(e){return new t((function(n,r){if(Array.isArray(e))if(0!==e.length){var i=e.length,o=[];e.forEach((function(e,s){t.resolve(e).then((function(t){o[s]=t,0===(i-=1)&&n(o)})).then(null,r)}))}else n([]);else r(new TypeError("Promise.all requires an array as input."))}))},t.prototype.then=function(e,n){var r=this;return new t((function(t,i){r._attachHandler({done:!1,onfulfilled:function(n){if(e)try{return void t(e(n))}catch(t){return void i(t)}else t(n)},onrejected:function(e){if(n)try{return void t(n(e))}catch(t){return void i(t)}else i(e)}})}))},t.prototype.catch=function(t){return this.then((function(t){return t}),t)},t.prototype.finally=function(e){var n=this;return new t((function(t,r){var i,o;return n.then((function(t){o=!1,i=t,e&&e()}),(function(t){o=!0,i=t,e&&e()})).then((function(){o?r(i):t(i)}))}))},t.prototype.toString=function(){return"[object SyncPromise]"},t}(),p=n(4),h=function(){function t(){this._notifyingListeners=!1,this._scopeListeners=[],this._eventProcessors=[],this._breadcrumbs=[],this._user={},this._tags={},this._extra={},this._contexts={}}return t.clone=function(e){var n=new t;return e&&(n._breadcrumbs=Object(c.e)(e._breadcrumbs),n._tags=Object(c.a)({},e._tags),n._extra=Object(c.a)({},e._extra),n._contexts=Object(c.a)({},e._contexts),n._user=e._user,n._level=e._level,n._span=e._span,n._session=e._session,n._transactionName=e._transactionName,n._fingerprint=e._fingerprint,n._eventProcessors=Object(c.e)(e._eventProcessors)),n},t.prototype.addScopeListener=function(t){this._scopeListeners.push(t)},t.prototype.addEventProcessor=function(t){return this._eventProcessors.push(t),this},t.prototype.setUser=function(t){return this._user=t||{},this._session&&this._session.update({user:t}),this._notifyScopeListeners(),this},t.prototype.getUser=function(){return this._user},t.prototype.setTags=function(t){return this._tags=Object(c.a)(Object(c.a)({},this._tags),t),this._notifyScopeListeners(),this},t.prototype.setTag=function(t,e){var n;return this._tags=Object(c.a)(Object(c.a)({},this._tags),((n={})[t]=e,n)),this._notifyScopeListeners(),this},t.prototype.setExtras=function(t){return this._extra=Object(c.a)(Object(c.a)({},this._extra),t),this._notifyScopeListeners(),this},t.prototype.setExtra=function(t,e){var n;return this._extra=Object(c.a)(Object(c.a)({},this._extra),((n={})[t]=e,n)),this._notifyScopeListeners(),this},t.prototype.setFingerprint=function(t){return this._fingerprint=t,this._notifyScopeListeners(),this},t.prototype.setLevel=function(t){return this._level=t,this._notifyScopeListeners(),this},t.prototype.setTransactionName=function(t){return this._transactionName=t,this._notifyScopeListeners(),this},t.prototype.setTransaction=function(t){return this.setTransactionName(t)},t.prototype.setContext=function(t,e){var n;return null===e?delete this._contexts[t]:this._contexts=Object(c.a)(Object(c.a)({},this._contexts),((n={})[t]=e,n)),this._notifyScopeListeners(),this},t.prototype.setSpan=function(t){return this._span=t,this._notifyScopeListeners(),this},t.prototype.getSpan=function(){return this._span},t.prototype.getTransaction=function(){var t,e,n,r,i=this.getSpan();return(null===(t=i)||void 0===t?void 0:t.transaction)?null===(e=i)||void 0===e?void 0:e.transaction:(null===(r=null===(n=i)||void 0===n?void 0:n.spanRecorder)||void 0===r?void 0:r.spans[0])?i.spanRecorder.spans[0]:void 0},t.prototype.setSession=function(t){return t?this._session=t:delete this._session,this._notifyScopeListeners(),this},t.prototype.getSession=function(){return this._session},t.prototype.update=function(e){if(!e)return this;if("function"==typeof e){var n=e(this);return n instanceof t?n:this}return e instanceof t?(this._tags=Object(c.a)(Object(c.a)({},this._tags),e._tags),this._extra=Object(c.a)(Object(c.a)({},this._extra),e._extra),this._contexts=Object(c.a)(Object(c.a)({},this._contexts),e._contexts),e._user&&Object.keys(e._user).length&&(this._user=e._user),e._level&&(this._level=e._level),e._fingerprint&&(this._fingerprint=e._fingerprint)):Object(u.h)(e)&&(this._tags=Object(c.a)(Object(c.a)({},this._tags),e.tags),this._extra=Object(c.a)(Object(c.a)({},this._extra),e.extra),this._contexts=Object(c.a)(Object(c.a)({},this._contexts),e.contexts),e.user&&(this._user=e.user),e.level&&(this._level=e.level),e.fingerprint&&(this._fingerprint=e.fingerprint)),this},t.prototype.clear=function(){return this._breadcrumbs=[],this._tags={},this._extra={},this._user={},this._contexts={},this._level=void 0,this._transactionName=void 0,this._fingerprint=void 0,this._span=void 0,this._session=void 0,this._notifyScopeListeners(),this},t.prototype.addBreadcrumb=function(t,e){var n=Object(c.a)({timestamp:Object(l.a)()},t);return this._breadcrumbs=void 0!==e&&e>=0?Object(c.e)(this._breadcrumbs,[n]).slice(-e):Object(c.e)(this._breadcrumbs,[n]),this._notifyScopeListeners(),this},t.prototype.clearBreadcrumbs=function(){return this._breadcrumbs=[],this._notifyScopeListeners(),this},t.prototype.applyToEvent=function(t,e){var n;if(this._extra&&Object.keys(this._extra).length&&(t.extra=Object(c.a)(Object(c.a)({},this._extra),t.extra)),this._tags&&Object.keys(this._tags).length&&(t.tags=Object(c.a)(Object(c.a)({},this._tags),t.tags)),this._user&&Object.keys(this._user).length&&(t.user=Object(c.a)(Object(c.a)({},this._user),t.user)),this._contexts&&Object.keys(this._contexts).length&&(t.contexts=Object(c.a)(Object(c.a)({},this._contexts),t.contexts)),this._level&&(t.level=this._level),this._transactionName&&(t.transaction=this._transactionName),this._span){t.contexts=Object(c.a)({trace:this._span.getTraceContext()},t.contexts);var r=null===(n=this._span.transaction)||void 0===n?void 0:n.name;r&&(t.tags=Object(c.a)({transaction:r},t.tags))}return this._applyFingerprint(t),t.breadcrumbs=Object(c.e)(t.breadcrumbs||[],this._breadcrumbs),t.breadcrumbs=t.breadcrumbs.length>0?t.breadcrumbs:void 0,this._notifyEventProcessors(Object(c.e)(f(),this._eventProcessors),t,e)},t.prototype._notifyEventProcessors=function(t,e,n,r){var i=this;return void 0===r&&(r=0),new d((function(o,s){var a=t[r];if(null===e||"function"!=typeof a)o(e);else{var l=a(Object(c.a)({},e),n);Object(u.m)(l)?l.then((function(e){return i._notifyEventProcessors(t,e,n,r+1).then(o)})).then(null,s):i._notifyEventProcessors(t,l,n,r+1).then(o).then(null,s)}}))},t.prototype._notifyScopeListeners=function(){var t=this;this._notifyingListeners||(this._notifyingListeners=!0,this._scopeListeners.forEach((function(e){e(t)})),this._notifyingListeners=!1)},t.prototype._applyFingerprint=function(t){t.fingerprint=t.fingerprint?Array.isArray(t.fingerprint)?t.fingerprint:[t.fingerprint]:[],this._fingerprint&&(t.fingerprint=t.fingerprint.concat(this._fingerprint)),t.fingerprint&&!t.fingerprint.length&&delete t.fingerprint},t}();function f(){var t=Object(p.e)();return t.__SENTRY__=t.__SENTRY__||{},t.__SENTRY__.globalEventProcessors=t.__SENTRY__.globalEventProcessors||[],t.__SENTRY__.globalEventProcessors}function _(t){f().push(t)}var g=Object(p.e)(),y="Sentry Logger ",m=function(){function t(){this._enabled=!1}return t.prototype.disable=function(){this._enabled=!1},t.prototype.enable=function(){this._enabled=!0},t.prototype.log=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._enabled&&Object(p.c)((function(){g.console.log(y+"[Log]: "+t.join(" "))}))},t.prototype.warn=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._enabled&&Object(p.c)((function(){g.console.warn(y+"[Warn]: "+t.join(" "))}))},t.prototype.error=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._enabled&&Object(p.c)((function(){g.console.error(y+"[Error]: "+t.join(" "))}))},t}();g.__SENTRY__=g.__SENTRY__||{};var v,b=g.__SENTRY__.logger||(g.__SENTRY__.logger=new m),w=n(12);!function(t){t.Ok="ok",t.Exited="exited",t.Crashed="crashed",t.Abnormal="abnormal"}(v||(v={}));var S=n(5),O=function(){function t(t){this.errors=0,this.sid=Object(p.i)(),this.timestamp=Date.now(),this.started=Date.now(),this.duration=0,this.status=v.Ok,t&&this.update(t)}return t.prototype.update=function(t){void 0===t&&(t={}),t.user&&(t.user.ip_address&&(this.ipAddress=t.user.ip_address),t.did||(this.did=t.user.id||t.user.email||t.user.username)),this.timestamp=t.timestamp||Date.now(),t.sid&&(this.sid=32===t.sid.length?t.sid:Object(p.i)()),t.did&&(this.did=""+t.did),"number"==typeof t.started&&(this.started=t.started),"number"==typeof t.duration?this.duration=t.duration:this.duration=this.timestamp-this.started,t.release&&(this.release=t.release),t.environment&&(this.environment=t.environment),t.ipAddress&&(this.ipAddress=t.ipAddress),t.userAgent&&(this.userAgent=t.userAgent),"number"==typeof t.errors&&(this.errors=t.errors),t.status&&(this.status=t.status)},t.prototype.close=function(t){t?this.update({status:t}):this.status===v.Ok?this.update({status:v.Exited}):this.update()},t.prototype.toJSON=function(){return Object(S.a)({sid:""+this.sid,init:!0,started:new Date(this.started).toISOString(),timestamp:new Date(this.timestamp).toISOString(),status:this.status,errors:this.errors,did:"number"==typeof this.did||"string"==typeof this.did?""+this.did:void 0,duration:this.duration,attrs:Object(S.a)({release:this.release,environment:this.environment,ip_address:this.ipAddress,user_agent:this.userAgent})})},t}(),x=3,E=function(){function t(t,e,n){void 0===e&&(e=new h),void 0===n&&(n=x),this._version=n,this._stack=[{}],this.getStackTop().scope=e,this.bindClient(t)}return t.prototype.isOlderThan=function(t){return this._version<t},t.prototype.bindClient=function(t){this.getStackTop().client=t,t&&t.setupIntegrations&&t.setupIntegrations()},t.prototype.pushScope=function(){var t=h.clone(this.getScope());return this.getStack().push({client:this.getClient(),scope:t}),t},t.prototype.popScope=function(){return!(this.getStack().length<=1)&&!!this.getStack().pop()},t.prototype.withScope=function(t){var e=this.pushScope();try{t(e)}finally{this.popScope()}},t.prototype.getClient=function(){return this.getStackTop().client},t.prototype.getScope=function(){return this.getStackTop().scope},t.prototype.getStack=function(){return this._stack},t.prototype.getStackTop=function(){return this._stack[this._stack.length-1]},t.prototype.captureException=function(t,e){var n=this._lastEventId=Object(p.i)(),r=e;if(!e){var i=void 0;try{throw new Error("Sentry syntheticException")}catch(t){i=t}r={originalException:t,syntheticException:i}}return this._invokeClient("captureException",t,Object(c.a)(Object(c.a)({},r),{event_id:n})),n},t.prototype.captureMessage=function(t,e,n){var r=this._lastEventId=Object(p.i)(),i=n;if(!n){var o=void 0;try{throw new Error(t)}catch(t){o=t}i={originalException:t,syntheticException:o}}return this._invokeClient("captureMessage",t,e,Object(c.a)(Object(c.a)({},i),{event_id:r})),r},t.prototype.captureEvent=function(t,e){var n=this._lastEventId=Object(p.i)();return this._invokeClient("captureEvent",t,Object(c.a)(Object(c.a)({},e),{event_id:n})),n},t.prototype.lastEventId=function(){return this._lastEventId},t.prototype.addBreadcrumb=function(t,e){var n=this.getStackTop(),r=n.scope,i=n.client;if(r&&i){var o=i.getOptions&&i.getOptions()||{},s=o.beforeBreadcrumb,a=void 0===s?null:s,u=o.maxBreadcrumbs,d=void 0===u?100:u;if(!(d<=0)){var h=Object(l.a)(),f=Object(c.a)({timestamp:h},t),_=a?Object(p.c)((function(){return a(f,e)})):f;null!==_&&r.addBreadcrumb(_,Math.min(d,100))}}},t.prototype.setUser=function(t){var e=this.getScope();e&&e.setUser(t)},t.prototype.setTags=function(t){var e=this.getScope();e&&e.setTags(t)},t.prototype.setExtras=function(t){var e=this.getScope();e&&e.setExtras(t)},t.prototype.setTag=function(t,e){var n=this.getScope();n&&n.setTag(t,e)},t.prototype.setExtra=function(t,e){var n=this.getScope();n&&n.setExtra(t,e)},t.prototype.setContext=function(t,e){var n=this.getScope();n&&n.setContext(t,e)},t.prototype.configureScope=function(t){var e=this.getStackTop(),n=e.scope,r=e.client;n&&r&&t(n)},t.prototype.run=function(t){var e=j(this);try{t(this)}finally{j(e)}},t.prototype.getIntegration=function(t){var e=this.getClient();if(!e)return null;try{return e.getIntegration(t)}catch(e){return b.warn("Cannot retrieve integration "+t.id+" from the current Hub"),null}},t.prototype.startSpan=function(t){return this._callExtensionMethod("startSpan",t)},t.prototype.startTransaction=function(t,e){return this._callExtensionMethod("startTransaction",t,e)},t.prototype.traceHeaders=function(){return this._callExtensionMethod("traceHeaders")},t.prototype.startSession=function(t){this.endSession();var e=this.getStackTop(),n=e.scope,r=e.client,i=r&&r.getOptions()||{},o=i.release,s=i.environment,a=new O(Object(c.a)(Object(c.a)({release:o,environment:s},n&&{user:n.getUser()}),t));return n&&n.setSession(a),a},t.prototype.endSession=function(){var t=this.getStackTop(),e=t.scope,n=t.client;if(e){var r=e.getSession&&e.getSession();r&&(r.close(),n&&n.captureSession&&n.captureSession(r),e.setSession())}},t.prototype._invokeClient=function(t){for(var e,n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];var i=this.getStackTop(),o=i.scope,s=i.client;s&&s[t]&&(e=s)[t].apply(e,Object(c.e)(n,[o]))},t.prototype._callExtensionMethod=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var r=k().__SENTRY__;if(r&&r.extensions&&"function"==typeof r.extensions[t])return r.extensions[t].apply(this,e);b.warn("Extension method "+t+" couldn't be found, doing nothing.")},t}();function k(){var t=Object(p.e)();return t.__SENTRY__=t.__SENTRY__||{extensions:{},hub:void 0},t}function j(t){var e=k(),n=T(e);return A(e,t),n}function R(){var t=k();return I(t)&&!T(t).isOlderThan(x)||A(t,new E),Object(w.b)()?function(t){try{var e=(r=k().__SENTRY__)&&r.extensions&&r.extensions.domain&&r.extensions.domain.active;if(!e)return T(t);if(!I(e)||T(e).isOlderThan(x)){var n=T(t).getStackTop();A(e,new E(n.client,h.clone(n.scope)))}return T(e)}catch(e){return T(t)}var r}(t):T(t)}function I(t){return!!(t&&t.__SENTRY__&&t.__SENTRY__.hub)}function T(t){return t&&t.__SENTRY__&&t.__SENTRY__.hub||(t.__SENTRY__=t.__SENTRY__||{},t.__SENTRY__.hub=new E),t.__SENTRY__.hub}function A(t,e){return!!t&&(t.__SENTRY__=t.__SENTRY__||{},t.__SENTRY__.hub=e,!0)}var L=n(7),P=[/^Script error\.?$/,/^Javascript error: Script error\.? on line 0$/],C=function(){function t(e){void 0===e&&(e={}),this._options=e,this.name=t.id}return t.prototype.setupOnce=function(){_((function(e){var n=R();if(!n)return e;var r=n.getIntegration(t);if(r){var i=n.getClient(),o=i?i.getOptions():{},s=r._mergeOptions(o);if(r._shouldDropEvent(e,s))return null}return e}))},t.prototype._shouldDropEvent=function(t,e){return this._isSentryError(t,e)?(b.warn("Event dropped due to being internal Sentry Error.\nEvent: "+Object(p.d)(t)),!0):this._isIgnoredError(t,e)?(b.warn("Event dropped due to being matched by `ignoreErrors` option.\nEvent: "+Object(p.d)(t)),!0):this._isDeniedUrl(t,e)?(b.warn("Event dropped due to being matched by `denyUrls` option.\nEvent: "+Object(p.d)(t)+".\nUrl: "+this._getEventFilterUrl(t)),!0):!this._isAllowedUrl(t,e)&&(b.warn("Event dropped due to not being matched by `allowUrls` option.\nEvent: "+Object(p.d)(t)+".\nUrl: "+this._getEventFilterUrl(t)),!0)},t.prototype._isSentryError=function(t,e){if(!e.ignoreInternal)return!1;try{return t&&t.exception&&t.exception.values&&t.exception.values[0]&&"SentryError"===t.exception.values[0].type||!1}catch(t){return!1}},t.prototype._isIgnoredError=function(t,e){return!(!e.ignoreErrors||!e.ignoreErrors.length)&&this._getPossibleEventMessages(t).some((function(t){return e.ignoreErrors.some((function(e){return Object(L.a)(t,e)}))}))},t.prototype._isDeniedUrl=function(t,e){if(!e.denyUrls||!e.denyUrls.length)return!1;var n=this._getEventFilterUrl(t);return!!n&&e.denyUrls.some((function(t){return Object(L.a)(n,t)}))},t.prototype._isAllowedUrl=function(t,e){if(!e.allowUrls||!e.allowUrls.length)return!0;var n=this._getEventFilterUrl(t);return!n||e.allowUrls.some((function(t){return Object(L.a)(n,t)}))},t.prototype._mergeOptions=function(t){return void 0===t&&(t={}),{allowUrls:Object(c.e)(this._options.whitelistUrls||[],this._options.allowUrls||[],t.whitelistUrls||[],t.allowUrls||[]),denyUrls:Object(c.e)(this._options.blacklistUrls||[],this._options.denyUrls||[],t.blacklistUrls||[],t.denyUrls||[]),ignoreErrors:Object(c.e)(this._options.ignoreErrors||[],t.ignoreErrors||[],P),ignoreInternal:void 0===this._options.ignoreInternal||this._options.ignoreInternal}},t.prototype._getPossibleEventMessages=function(t){if(t.message)return[t.message];if(t.exception)try{var e=t.exception.values&&t.exception.values[0]||{},n=e.type,r=void 0===n?"":n,i=e.value,o=void 0===i?"":i;return[""+o,r+": "+o]}catch(e){return b.error("Cannot extract message for event "+Object(p.d)(t)),[]}return[]},t.prototype._getEventFilterUrl=function(t){try{if(t.stacktrace){var e=t.stacktrace.frames;return e&&e[e.length-1].filename||null}if(t.exception){var n=t.exception.values&&t.exception.values[0].stacktrace&&t.exception.values[0].stacktrace.frames;return n&&n[n.length-1].filename||null}return null}catch(e){return b.error("Cannot extract url for event "+Object(p.d)(t)),null}},t.id="InboundFilters",t}();var N=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){return t.__proto__=e,t}:function(t,e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n]);return t});var U=function(t){function e(e){var n=this.constructor,r=t.call(this,e)||this;return r.message=e,r.name=n.prototype.constructor.name,N(r,n.prototype),r}return Object(c.b)(e,t),e}(Error),W=/^(?:(\w+):)\/\/(?:(\w+)(?::(\w+))?@)([\w.-]+)(?::(\d+))?\/(.+)/,F="Invalid Dsn",M=function(){function t(t){"string"==typeof t?this._fromString(t):this._fromComponents(t),this._validate()}return t.prototype.toString=function(t){void 0===t&&(t=!1);var e=this,n=e.host,r=e.path,i=e.pass,o=e.port,s=e.projectId;return e.protocol+"://"+e.user+(t&&i?":"+i:"")+"@"+n+(o?":"+o:"")+"/"+(r?r+"/":r)+s},t.prototype._fromString=function(t){var e=W.exec(t);if(!e)throw new U(F);var n=Object(c.c)(e.slice(1),6),r=n[0],i=n[1],o=n[2],s=void 0===o?"":o,a=n[3],u=n[4],l=void 0===u?"":u,d="",p=n[5],h=p.split("/");if(h.length>1&&(d=h.slice(0,-1).join("/"),p=h.pop()),p){var f=p.match(/^\d+/);f&&(p=f[0])}this._fromComponents({host:a,pass:s,path:d,projectId:p,port:l,protocol:r,user:i})},t.prototype._fromComponents=function(t){this.protocol=t.protocol,this.user=t.user,this.pass=t.pass||"",this.host=t.host,this.port=t.port||"",this.path=t.path||"",this.projectId=t.projectId},t.prototype._validate=function(){var t=this;if(["protocol","user","host","projectId"].forEach((function(e){if(!t[e])throw new U(F+": "+e+" missing")})),!this.projectId.match(/^\d+$/))throw new U(F+": Invalid projectId "+this.projectId);if("http"!==this.protocol&&"https"!==this.protocol)throw new U(F+": Invalid protocol "+this.protocol);if(this.port&&isNaN(parseInt(this.port,10)))throw new U(F+": Invalid port "+this.port)},t}(),D=[];function B(t){var e={};return function(t){var e=t.defaultIntegrations&&Object(c.e)(t.defaultIntegrations)||[],n=t.integrations,r=[];if(Array.isArray(n)){var i=n.map((function(t){return t.name})),o=[];e.forEach((function(t){-1===i.indexOf(t.name)&&-1===o.indexOf(t.name)&&(r.push(t),o.push(t.name))})),n.forEach((function(t){-1===o.indexOf(t.name)&&(r.push(t),o.push(t.name))}))}else"function"==typeof n?(r=n(e),r=Array.isArray(r)?r:[r]):r=Object(c.e)(e);var s=r.map((function(t){return t.name})),a="Debug";return-1!==s.indexOf(a)&&r.push.apply(r,Object(c.e)(r.splice(s.indexOf(a),1))),r}(t).forEach((function(t){e[t.name]=t,function(t){-1===D.indexOf(t.name)&&(t.setupOnce(_,R),D.push(t.name),b.log("Integration installed: "+t.name))}(t)})),e}var Y,q=function(){function t(t,e){this._integrations={},this._processing=0,this._backend=new t(e),this._options=e,e.dsn&&(this._dsn=new M(e.dsn))}return t.prototype.captureException=function(t,e,n){var r=this,i=e&&e.event_id;return this._process(this._getBackend().eventFromException(t,e).then((function(t){return r._captureEvent(t,e,n)})).then((function(t){i=t}))),i},t.prototype.captureMessage=function(t,e,n,r){var i=this,o=n&&n.event_id,s=Object(u.i)(t)?this._getBackend().eventFromMessage(String(t),e,n):this._getBackend().eventFromException(t,n);return this._process(s.then((function(t){return i._captureEvent(t,n,r)})).then((function(t){o=t}))),o},t.prototype.captureEvent=function(t,e,n){var r=e&&e.event_id;return this._process(this._captureEvent(t,e,n).then((function(t){r=t}))),r},t.prototype.captureSession=function(t){t.release?this._sendSession(t):b.warn("Discarded session because of missing release")},t.prototype.getDsn=function(){return this._dsn},t.prototype.getOptions=function(){return this._options},t.prototype.flush=function(t){var e=this;return this._isClientProcessing(t).then((function(n){return e._getBackend().getTransport().close(t).then((function(t){return n&&t}))}))},t.prototype.close=function(t){var e=this;return this.flush(t).then((function(t){return e.getOptions().enabled=!1,t}))},t.prototype.setupIntegrations=function(){this._isEnabled()&&(this._integrations=B(this._options))},t.prototype.getIntegration=function(t){try{return this._integrations[t.id]||null}catch(e){return b.warn("Cannot retrieve integration "+t.id+" from the current Client"),null}},t.prototype._updateSessionFromEvent=function(t,e){var n,r,i,o=!1,s=!1,a=e.exception&&e.exception.values;if(a){s=!0;try{for(var u=Object(c.f)(a),l=u.next();!l.done;l=u.next()){var d=l.value.mechanism;if(d&&!1===d.handled){o=!0;break}}}catch(t){n={error:t}}finally{try{l&&!l.done&&(r=u.return)&&r.call(u)}finally{if(n)throw n.error}}}var p=e.user;if(!t.userAgent){var h=e.request?e.request.headers:{};for(var f in h)if("user-agent"===f.toLowerCase()){i=h[f];break}}t.update(Object(c.a)(Object(c.a)({},o&&{status:v.Crashed}),{user:p,userAgent:i,errors:t.errors+Number(s||o)}))},t.prototype._sendSession=function(t){this._getBackend().sendSession(t)},t.prototype._isClientProcessing=function(t){var e=this;return new d((function(n){var r=0,i=setInterval((function(){0==e._processing?(clearInterval(i),n(!0)):(r+=1,t&&r>=t&&(clearInterval(i),n(!1)))}),1)}))},t.prototype._getBackend=function(){return this._backend},t.prototype._isEnabled=function(){return!1!==this.getOptions().enabled&&void 0!==this._dsn},t.prototype._prepareEvent=function(t,e,n){var r=this,i=this.getOptions().normalizeDepth,o=void 0===i?3:i,s=Object(c.a)(Object(c.a)({},t),{event_id:t.event_id||(n&&n.event_id?n.event_id:Object(p.i)()),timestamp:t.timestamp||Object(l.a)()});this._applyClientOptions(s),this._applyIntegrationsMetadata(s);var a=e;n&&n.captureContext&&(a=h.clone(a).update(n.captureContext));var u=d.resolve(s);return a&&(u=a.applyToEvent(s,n)),u.then((function(t){return"number"==typeof o&&o>0?r._normalizeEvent(t,o):t}))},t.prototype._normalizeEvent=function(t,e){if(!t)return null;var n=Object(c.a)(Object(c.a)(Object(c.a)(Object(c.a)(Object(c.a)({},t),t.breadcrumbs&&{breadcrumbs:t.breadcrumbs.map((function(t){return Object(c.a)(Object(c.a)({},t),t.data&&{data:Object(S.d)(t.data,e)})}))}),t.user&&{user:Object(S.d)(t.user,e)}),t.contexts&&{contexts:Object(S.d)(t.contexts,e)}),t.extra&&{extra:Object(S.d)(t.extra,e)});return t.contexts&&t.contexts.trace&&(n.contexts.trace=t.contexts.trace),n},t.prototype._applyClientOptions=function(t){var e=this.getOptions(),n=e.environment,r=e.release,i=e.dist,o=e.maxValueLength,s=void 0===o?250:o;"environment"in t||(t.environment="environment"in e?n:"production"),void 0===t.release&&void 0!==r&&(t.release=r),void 0===t.dist&&void 0!==i&&(t.dist=i),t.message&&(t.message=Object(L.d)(t.message,s));var a=t.exception&&t.exception.values&&t.exception.values[0];a&&a.value&&(a.value=Object(L.d)(a.value,s));var c=t.request;c&&c.url&&(c.url=Object(L.d)(c.url,s))},t.prototype._applyIntegrationsMetadata=function(t){var e=t.sdk,n=Object.keys(this._integrations);e&&n.length>0&&(e.integrations=n)},t.prototype._sendEvent=function(t){this._getBackend().sendEvent(t)},t.prototype._captureEvent=function(t,e,n){return this._processEvent(t,e,n).then((function(t){return t.event_id}),(function(t){b.error(t)}))},t.prototype._processEvent=function(t,e,n){var r=this,i=this.getOptions(),o=i.beforeSend,s=i.sampleRate;if(!this._isEnabled())return d.reject(new U("SDK not enabled, will not send event."));var a="transaction"===t.type;return!a&&"number"==typeof s&&Math.random()>s?d.reject(new U("Discarding event because it's not included in the random sample (sampling rate = "+s+")")):this._prepareEvent(t,n,e).then((function(t){if(null===t)throw new U("An event processor returned null, will not send event.");if(e&&e.data&&!0===e.data.__sentry__||a||!o)return t;var n=o(t,e);if(void 0===n)throw new U("`beforeSend` method has to return `null` or a valid event.");return Object(u.m)(n)?n.then((function(t){return t}),(function(t){throw new U("beforeSend rejected with "+t)})):n})).then((function(t){if(null===t)throw new U("`beforeSend` returned `null`, will not send event.");var e=n&&n.getSession&&n.getSession();return!a&&e&&r._updateSessionFromEvent(e,t),r._sendEvent(t),t})).then(null,(function(t){if(t instanceof U)throw t;throw r.captureException(t,{data:{__sentry__:!0},originalException:t}),new U("Event processing pipeline threw an error, original event will not be sent. Details have been sent as a new event.\nReason: "+t)}))},t.prototype._process=function(t){var e=this;this._processing+=1,t.then((function(t){return e._processing-=1,t}),(function(t){return e._processing-=1,t}))},t}();!function(t){t.Unknown="unknown",t.Skipped="skipped",t.Success="success",t.RateLimit="rate_limit",t.Invalid="invalid",t.Failed="failed"}(Y||(Y={})),function(t){t.fromHttpCode=function(e){return e>=200&&e<300?t.Success:429===e?t.RateLimit:e>=400&&e<500?t.Invalid:e>=500?t.Failed:t.Unknown}}(Y||(Y={}));var $,H=function(){function t(){}return t.prototype.sendEvent=function(t){return d.resolve({reason:"NoopTransport: Event has been skipped because no Dsn is configured.",status:Y.Skipped})},t.prototype.close=function(t){return d.resolve(!0)},t}(),G=function(){function t(t){this._options=t,this._options.dsn||b.warn("No DSN provided, backend will not do anything."),this._transport=this._setupTransport()}return t.prototype.eventFromException=function(t,e){throw new U("Backend has to implement `eventFromException` method")},t.prototype.eventFromMessage=function(t,e,n){throw new U("Backend has to implement `eventFromMessage` method")},t.prototype.sendEvent=function(t){this._transport.sendEvent(t).then(null,(function(t){b.error("Error while sending event: "+t)}))},t.prototype.sendSession=function(t){this._transport.sendSession?this._transport.sendSession(t).then(null,(function(t){b.error("Error while sending session: "+t)})):b.warn("Dropping session because custom transport doesn't implement sendSession")},t.prototype.getTransport=function(){return this._transport},t.prototype._setupTransport=function(){return new H},t}();function z(){if(!("fetch"in Object(p.e)()))return!1;try{return new Headers,new Request(""),new Response,!0}catch(t){return!1}}function J(t){return t&&/^function fetch\(\)\s+\{\s+\[native code\]\s+\}$/.test(t.toString())}function X(){if(!z())return!1;try{return new Request("_",{referrerPolicy:"origin"}),!0}catch(t){return!1}}!function(t){t.Fatal="fatal",t.Error="error",t.Warning="warning",t.Log="log",t.Info="info",t.Debug="debug",t.Critical="critical"}($||($={})),function(t){t.fromString=function(e){switch(e){case"debug":return t.Debug;case"info":return t.Info;case"warn":case"warning":return t.Warning;case"error":return t.Error;case"fatal":return t.Fatal;case"critical":return t.Critical;default:return t.Log}}}($||($={}));var K="?",Z=/^\s*at (?:(.*?) ?\()?((?:file|https?|blob|chrome-extension|address|native|eval|webpack|<anonymous>|[-a-z]+:|.*bundle|\/).*?)(?::(\d+))?(?::(\d+))?\)?\s*$/i,V=/^\s*(.*?)(?:\((.*?)\))?(?:^|@)?((?:file|https?|blob|chrome|webpack|resource|moz-extension|capacitor).*?:\/.*?|\[native code\]|[^@]*(?:bundle|\d+\.js)|\/[\w\-. /=]+)(?::(\d+))?(?::(\d+))?\s*$/i,Q=/^\s*at (?:((?:\[object object\])?.+) )?\(?((?:file|ms-appx|https?|webpack|blob):.*?):(\d+)(?::(\d+))?\)?\s*$/i,tt=/(\S+) line (\d+)(?: > eval line \d+)* > eval/i,et=/\((\S*)(?::(\d+))(?::(\d+))\)/,nt=/Minified React error #\d+;/i;function rt(t){var e=null,n=0;t&&("number"==typeof t.framesToPop?n=t.framesToPop:nt.test(t.message)&&(n=1));try{if(e=function(t){if(!t||!t.stacktrace)return null;for(var e,n=t.stacktrace,r=/ line (\d+).*script (?:in )?(\S+)(?:: in function (\S+))?$/i,i=/ line (\d+), column (\d+)\s*(?:in (?:<anonymous function: ([^>]+)>|([^)]+))\((.*)\))? in (.*):\s*$/i,o=n.split("\n"),s=[],a=0;a<o.length;a+=2){var c=null;(e=r.exec(o[a]))?c={url:e[2],func:e[3],args:[],line:+e[1],column:null}:(e=i.exec(o[a]))&&(c={url:e[6],func:e[3]||e[4],args:e[5]?e[5].split(","):[],line:+e[1],column:+e[2]}),c&&(!c.func&&c.line&&(c.func=K),s.push(c))}if(!s.length)return null;return{message:ot(t),name:t.name,stack:s}}(t),e)return it(e,n)}catch(t){}try{if(e=function(t){if(!t||!t.stack)return null;for(var e,n,r,i=[],o=t.stack.split("\n"),s=0;s<o.length;++s){if(n=Z.exec(o[s])){var a=n[2]&&0===n[2].indexOf("native");n[2]&&0===n[2].indexOf("eval")&&(e=et.exec(n[2]))&&(n[2]=e[1],n[3]=e[2],n[4]=e[3]),r={url:n[2]&&0===n[2].indexOf("address at ")?n[2].substr(11):n[2],func:n[1]||K,args:a?[n[2]]:[],line:n[3]?+n[3]:null,column:n[4]?+n[4]:null}}else if(n=Q.exec(o[s]))r={url:n[2],func:n[1]||K,args:[],line:+n[3],column:n[4]?+n[4]:null};else{if(!(n=V.exec(o[s])))continue;n[3]&&n[3].indexOf(" > eval")>-1&&(e=tt.exec(n[3]))?(n[1]=n[1]||"eval",n[3]=e[1],n[4]=e[2],n[5]=""):0!==s||n[5]||void 0===t.columnNumber||(i[0].column=t.columnNumber+1),r={url:n[3],func:n[1]||K,args:n[2]?n[2].split(","):[],line:n[4]?+n[4]:null,column:n[5]?+n[5]:null}}!r.func&&r.line&&(r.func=K),i.push(r)}if(!i.length)return null;return{message:ot(t),name:t.name,stack:i}}(t),e)return it(e,n)}catch(t){}return{message:ot(t),name:t&&t.name,stack:[],failed:!0}}function it(t,e){try{return Object(c.a)(Object(c.a)({},t),{stack:t.stack.slice(e)})}catch(e){return t}}function ot(t){var e=t&&t.message;return e?e.error&&"string"==typeof e.error.message?e.error.message:e:"No error message"}var st=50;function at(t){var e=ut(t.stack),n={type:t.name,value:t.message};return e&&e.length&&(n.stacktrace={frames:e}),void 0===n.type&&""===n.value&&(n.value="Unrecoverable error caught"),n}function ct(t){return{exception:{values:[at(t)]}}}function ut(t){if(!t||!t.length)return[];var e=t,n=e[0].func||"",r=e[e.length-1].func||"";return-1===n.indexOf("captureMessage")&&-1===n.indexOf("captureException")||(e=e.slice(1)),-1!==r.indexOf("sentryWrapped")&&(e=e.slice(0,-1)),e.slice(0,st).map((function(t){return{colno:null===t.column?void 0:t.column,filename:t.url||e[0].url,function:t.func||"?",in_app:!0,lineno:null===t.line?void 0:t.line}})).reverse()}function lt(t,e,n){var r;if(void 0===n&&(n={}),Object(u.e)(t)&&t.error)return r=ct(rt(t=t.error));if(Object(u.a)(t)||Object(u.b)(t)){var i=t,o=i.name||(Object(u.a)(i)?"DOMError":"DOMException"),s=i.message?o+": "+i.message:o;return r=dt(s,e,n),Object(p.b)(r,s),"code"in i&&(r.tags=Object(c.a)(Object(c.a)({},r.tags),{"DOMException.code":""+i.code})),r}return Object(u.d)(t)?r=ct(rt(t)):Object(u.h)(t)||Object(u.f)(t)?(r=function(t,e,n){var r={exception:{values:[{type:Object(u.f)(t)?t.constructor.name:n?"UnhandledRejection":"Error",value:"Non-Error "+(n?"promise rejection":"exception")+" captured with keys: "+Object(S.b)(t)}]},extra:{__serialized__:Object(S.e)(t)}};if(e){var i=ut(rt(e).stack);r.stacktrace={frames:i}}return r}(t,e,n.rejection),Object(p.a)(r,{synthetic:!0}),r):(r=dt(t,e,n),Object(p.b)(r,""+t,void 0),Object(p.a)(r,{synthetic:!0}),r)}function dt(t,e,n){void 0===n&&(n={});var r={message:t};if(n.attachStacktrace&&e){var i=ut(rt(e).stack);r.stacktrace={frames:i}}return r}function pt(t,e){return{body:JSON.stringify({sent_at:(new Date).toISOString()})+"\n"+JSON.stringify({type:"session"})+"\n"+JSON.stringify(t),type:"session",url:e.getEnvelopeEndpointWithUrlEncodedAuth()}}function ht(t,e){var n=t.tags||{},r=n.__sentry_samplingMethod,i=n.__sentry_sampleRate,o=Object(c.d)(n,["__sentry_samplingMethod","__sentry_sampleRate"]);t.tags=o;var s="transaction"===t.type,a={body:JSON.stringify(t),type:t.type||"event",url:s?e.getEnvelopeEndpointWithUrlEncodedAuth():e.getStoreEndpointWithUrlEncodedAuth()};if(s){var u=JSON.stringify({event_id:t.event_id,sent_at:(new Date).toISOString()})+"\n"+JSON.stringify({type:t.type,sample_rates:[{id:r,rate:i}]})+"\n"+a.body;a.body=u}return a}var ft=function(){function t(t){this.dsn=t,this._dsnObject=new M(t)}return t.prototype.getDsn=function(){return this._dsnObject},t.prototype.getBaseApiEndpoint=function(){var t=this._dsnObject,e=t.protocol?t.protocol+":":"",n=t.port?":"+t.port:"";return e+"//"+t.host+n+(t.path?"/"+t.path:"")+"/api/"},t.prototype.getStoreEndpoint=function(){return this._getIngestEndpoint("store")},t.prototype.getStoreEndpointWithUrlEncodedAuth=function(){return this.getStoreEndpoint()+"?"+this._encodedAuth()},t.prototype.getEnvelopeEndpointWithUrlEncodedAuth=function(){return this._getEnvelopeEndpoint()+"?"+this._encodedAuth()},t.prototype.getStoreEndpointPath=function(){var t=this._dsnObject;return(t.path?"/"+t.path:"")+"/api/"+t.projectId+"/store/"},t.prototype.getRequestHeaders=function(t,e){var n=this._dsnObject,r=["Sentry sentry_version=7"];return r.push("sentry_client="+t+"/"+e),r.push("sentry_key="+n.user),n.pass&&r.push("sentry_secret="+n.pass),{"Content-Type":"application/json","X-Sentry-Auth":r.join(", ")}},t.prototype.getReportDialogEndpoint=function(t){void 0===t&&(t={});var e=this._dsnObject,n=this.getBaseApiEndpoint()+"embed/error-page/",r=[];for(var i in r.push("dsn="+e.toString()),t)if("dsn"!==i)if("user"===i){if(!t.user)continue;t.user.name&&r.push("name="+encodeURIComponent(t.user.name)),t.user.email&&r.push("email="+encodeURIComponent(t.user.email))}else r.push(encodeURIComponent(i)+"="+encodeURIComponent(t[i]));return r.length?n+"?"+r.join("&"):n},t.prototype._getEnvelopeEndpoint=function(){return this._getIngestEndpoint("envelope")},t.prototype._getIngestEndpoint=function(t){return""+this.getBaseApiEndpoint()+this._dsnObject.projectId+"/"+t+"/"},t.prototype._encodedAuth=function(){var t={sentry_key:this._dsnObject.user,sentry_version:"7"};return Object(S.f)(t)},t}(),_t=function(){function t(t){this._limit=t,this._buffer=[]}return t.prototype.isReady=function(){return void 0===this._limit||this.length()<this._limit},t.prototype.add=function(t){var e=this;return this.isReady()?(-1===this._buffer.indexOf(t)&&this._buffer.push(t),t.then((function(){return e.remove(t)})).then(null,(function(){return e.remove(t).then(null,(function(){}))})),t):d.reject(new U("Not adding Promise due to buffer limit reached."))},t.prototype.remove=function(t){return this._buffer.splice(this._buffer.indexOf(t),1)[0]},t.prototype.length=function(){return this._buffer.length},t.prototype.drain=function(t){var e=this;return new d((function(n){var r=setTimeout((function(){t&&t>0&&n(!1)}),t);d.all(e._buffer).then((function(){clearTimeout(r),n(!0)})).then(null,(function(){n(!0)}))}))},t}(),gt=function(){function t(t){this.options=t,this._buffer=new _t(30),this._rateLimits={},this._api=new ft(this.options.dsn),this.url=this._api.getStoreEndpointWithUrlEncodedAuth()}return t.prototype.sendEvent=function(t){throw new U("Transport Class has to implement `sendEvent` method")},t.prototype.close=function(t){return this._buffer.drain(t)},t.prototype._handleResponse=function(t){var e=t.requestType,n=t.response,r=t.headers,i=t.resolve,o=t.reject,s=Y.fromHttpCode(n.status);this._handleRateLimit(r)&&b.warn("Too many requests, backing off until: "+this._disabledUntil(e)),s!==Y.Success?o(n):i({status:s})},t.prototype._disabledUntil=function(t){return this._rateLimits[t]||this._rateLimits.all},t.prototype._isRateLimited=function(t){return this._disabledUntil(t)>new Date(Date.now())},t.prototype._handleRateLimit=function(t){var e,n,r,i,o=Date.now(),s=t["x-sentry-rate-limits"],a=t["retry-after"];if(s){try{for(var u=Object(c.f)(s.trim().split(",")),l=u.next();!l.done;l=u.next()){var d=l.value.split(":",2),h=parseInt(d[0],10),f=1e3*(isNaN(h)?60:h);try{for(var _=(r=void 0,Object(c.f)(d[1].split(";"))),g=_.next();!g.done;g=_.next()){var y=g.value;this._rateLimits[y||"all"]=new Date(o+f)}}catch(t){r={error:t}}finally{try{g&&!g.done&&(i=_.return)&&i.call(_)}finally{if(r)throw r.error}}}}catch(t){e={error:t}}finally{try{l&&!l.done&&(n=u.return)&&n.call(u)}finally{if(e)throw e.error}}return!0}return!!a&&(this._rateLimits.all=new Date(o+Object(p.g)(o,a)),!0)},t}(),yt=Object(p.e)(),mt=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(c.b)(e,t),e.prototype.sendEvent=function(t){return this._sendRequest(ht(t,this._api),t)},e.prototype.sendSession=function(t){return this._sendRequest(pt(t,this._api),t)},e.prototype._sendRequest=function(t,e){var n=this;if(this._isRateLimited(t.type))return Promise.reject({event:e,type:t.type,reason:"Transport locked till "+this._disabledUntil(t.type)+" due to too many requests.",status:429});var r={body:t.body,method:"POST",referrerPolicy:X()?"origin":""};return void 0!==this.options.fetchParameters&&Object.assign(r,this.options.fetchParameters),void 0!==this.options.headers&&(r.headers=this.options.headers),this._buffer.add(new d((function(e,i){yt.fetch(t.url,r).then((function(r){var o={"x-sentry-rate-limits":r.headers.get("X-Sentry-Rate-Limits"),"retry-after":r.headers.get("Retry-After")};n._handleResponse({requestType:t.type,response:r,headers:o,resolve:e,reject:i})})).catch(i)})))},e}(gt),vt=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(c.b)(e,t),e.prototype.sendEvent=function(t){return this._sendRequest(ht(t,this._api),t)},e.prototype.sendSession=function(t){return this._sendRequest(pt(t,this._api),t)},e.prototype._sendRequest=function(t,e){var n=this;return this._isRateLimited(t.type)?Promise.reject({event:e,type:t.type,reason:"Transport locked till "+this._disabledUntil(t.type)+" due to too many requests.",status:429}):this._buffer.add(new d((function(e,r){var i=new XMLHttpRequest;for(var o in i.onreadystatechange=function(){if(4===i.readyState){var o={"x-sentry-rate-limits":i.getResponseHeader("X-Sentry-Rate-Limits"),"retry-after":i.getResponseHeader("Retry-After")};n._handleResponse({requestType:t.type,response:i,headers:o,resolve:e,reject:r})}},i.open("POST",t.url),n.options.headers)n.options.headers.hasOwnProperty(o)&&i.setRequestHeader(o,n.options.headers[o]);i.send(t.body)})))},e}(gt),bt=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(c.b)(e,t),e.prototype.eventFromException=function(t,e){return function(t,e,n){var r=lt(e,n&&n.syntheticException||void 0,{attachStacktrace:t.attachStacktrace});return Object(p.a)(r,{handled:!0,type:"generic"}),r.level=$.Error,n&&n.event_id&&(r.event_id=n.event_id),d.resolve(r)}(this._options,t,e)},e.prototype.eventFromMessage=function(t,e,n){return void 0===e&&(e=$.Info),function(t,e,n,r){void 0===n&&(n=$.Info);var i=dt(e,r&&r.syntheticException||void 0,{attachStacktrace:t.attachStacktrace});return i.level=n,r&&r.event_id&&(i.event_id=r.event_id),d.resolve(i)}(this._options,t,e,n)},e.prototype._setupTransport=function(){if(!this._options.dsn)return t.prototype._setupTransport.call(this);var e=Object(c.a)(Object(c.a)({},this._options.transportOptions),{dsn:this._options.dsn});return this._options.transport?new this._options.transport(e):z()?new mt(e):new vt(e)},e}(G);function wt(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var r=R();if(r&&r[t])return r[t].apply(r,Object(c.e)(e));throw new Error("No hub defined or "+t+" was not found on the hub, please open a bug report.")}function St(t,e){var n;try{throw new Error("Sentry syntheticException")}catch(t){n=t}return wt("captureException",t,{captureContext:e,originalException:t,syntheticException:n})}function Ot(t,e){var n;try{throw new Error(t)}catch(t){n=t}var r="string"!=typeof e?{captureContext:e}:void 0;return wt("captureMessage",t,"string"==typeof e?e:void 0,Object(c.a)({originalException:t,syntheticException:n},r))}function xt(t){wt("configureScope",t)}function Et(t){wt("addBreadcrumb",t)}var kt=0;function jt(){return kt>0}function Rt(t,e,n){if(void 0===e&&(e={}),"function"!=typeof t)return t;try{if(t.__sentry__)return t;if(t.__sentry_wrapped__)return t.__sentry_wrapped__}catch(e){return t}var r=function(){var r=Array.prototype.slice.call(arguments);try{n&&"function"==typeof n&&n.apply(this,arguments);var i=r.map((function(t){return Rt(t,e)}));return t.handleEvent?t.handleEvent.apply(this,i):t.apply(this,i)}catch(t){throw kt+=1,setTimeout((function(){kt-=1})),wt("withScope",(function(n){n.addEventProcessor((function(t){var n=Object(c.a)({},t);return e.mechanism&&(Object(p.b)(n,void 0,void 0),Object(p.a)(n,e.mechanism)),n.extra=Object(c.a)(Object(c.a)({},n.extra),{arguments:r}),n})),St(t)})),t}};try{for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=t[i])}catch(t){}t.prototype=t.prototype||{},r.prototype=t.prototype,Object.defineProperty(t,"__sentry_wrapped__",{enumerable:!1,value:r}),Object.defineProperties(r,{__sentry__:{enumerable:!1,value:!0},__sentry_original__:{enumerable:!1,value:t}});try{Object.getOwnPropertyDescriptor(r,"name").configurable&&Object.defineProperty(r,"name",{get:function(){return t.name}})}catch(t){}return r}function It(t){if(void 0===t&&(t={}),t.eventId)if(t.dsn){var e=document.createElement("script");e.async=!0,e.src=new ft(t.dsn).getReportDialogEndpoint(t),t.onLoad&&(e.onload=t.onLoad),(document.head||document.body).appendChild(e)}else b.error("Missing dsn option in showReportDialog call");else b.error("Missing eventId option in showReportDialog call")}var Tt,At=n(14),Lt=Object(p.e)(),Pt={},Ct={};function Nt(t){if(!Ct[t])switch(Ct[t]=!0,t){case"console":!function(){if(!("console"in Lt))return;["debug","info","warn","error","log","assert"].forEach((function(t){t in Lt.console&&Object(S.c)(Lt.console,t,(function(e){return function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];Wt("console",{args:n,level:t}),e&&Function.prototype.apply.call(e,Lt.console,n)}}))}))}();break;case"dom":!function(){if(!("document"in Lt))return;Lt.document.addEventListener("click",$t("click",Wt.bind(null,"dom")),!1),Lt.document.addEventListener("keypress",Ht(Wt.bind(null,"dom")),!1),["EventTarget","Node"].forEach((function(t){var e=Lt[t]&&Lt[t].prototype;e&&e.hasOwnProperty&&e.hasOwnProperty("addEventListener")&&(Object(S.c)(e,"addEventListener",(function(t){return function(e,n,r){return n&&n.handleEvent?("click"===e&&Object(S.c)(n,"handleEvent",(function(t){return function(e){return $t("click",Wt.bind(null,"dom"))(e),t.call(this,e)}})),"keypress"===e&&Object(S.c)(n,"handleEvent",(function(t){return function(e){return Ht(Wt.bind(null,"dom"))(e),t.call(this,e)}}))):("click"===e&&$t("click",Wt.bind(null,"dom"),!0)(this),"keypress"===e&&Ht(Wt.bind(null,"dom"))(this)),t.call(this,e,n,r)}})),Object(S.c)(e,"removeEventListener",(function(t){return function(e,n,r){try{t.call(this,e,n.__sentry_wrapped__,r)}catch(t){}return t.call(this,e,n,r)}})))}))}();break;case"xhr":!function(){if(!("XMLHttpRequest"in Lt))return;var t=[],e=[],n=XMLHttpRequest.prototype;Object(S.c)(n,"open",(function(n){return function(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];var o=this,s=r[1];o.__sentry_xhr__={method:Object(u.k)(r[0])?r[0].toUpperCase():r[0],url:r[1]},Object(u.k)(s)&&"POST"===o.__sentry_xhr__.method&&s.match(/sentry_key/)&&(o.__sentry_own_request__=!0);var a=function(){if(4===o.readyState){try{o.__sentry_xhr__&&(o.__sentry_xhr__.status_code=o.status)}catch(t){}try{var n=t.indexOf(o);if(-1!==n){t.splice(n);var i=e.splice(n)[0];o.__sentry_xhr__&&void 0!==i[0]&&(o.__sentry_xhr__.body=i[0])}}catch(t){}Wt("xhr",{args:r,endTimestamp:Date.now(),startTimestamp:Date.now(),xhr:o})}};return"onreadystatechange"in o&&"function"==typeof o.onreadystatechange?Object(S.c)(o,"onreadystatechange",(function(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return a(),t.apply(o,e)}})):o.addEventListener("readystatechange",a),n.apply(o,r)}})),Object(S.c)(n,"send",(function(n){return function(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];return t.push(this),e.push(r),Wt("xhr",{args:r,startTimestamp:Date.now(),xhr:this}),n.apply(this,r)}}))}();break;case"fetch":!function(){if(!function(){if(!z())return!1;var t=Object(p.e)();if(J(t.fetch))return!0;var e=!1,n=t.document;if(n&&"function"==typeof n.createElement)try{var r=n.createElement("iframe");r.hidden=!0,n.head.appendChild(r),r.contentWindow&&r.contentWindow.fetch&&(e=J(r.contentWindow.fetch)),n.head.removeChild(r)}catch(t){b.warn("Could not create sandbox iframe for pure fetch check, bailing to window.fetch: ",t)}return e}())return;Object(S.c)(Lt,"fetch",(function(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r={args:e,fetchData:{method:Ft(e),url:Mt(e)},startTimestamp:Date.now()};return Wt("fetch",Object(c.a)({},r)),t.apply(Lt,e).then((function(t){return Wt("fetch",Object(c.a)(Object(c.a)({},r),{endTimestamp:Date.now(),response:t})),t}),(function(t){throw Wt("fetch",Object(c.a)(Object(c.a)({},r),{endTimestamp:Date.now(),error:t})),t}))}}))}();break;case"history":!function(){if(t=Object(p.e)(),e=t.chrome,n=e&&e.app&&e.app.runtime,r="history"in t&&!!t.history.pushState&&!!t.history.replaceState,n||!r)return;var t,e,n,r;var i=Lt.onpopstate;function o(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=e.length>2?e[2]:void 0;if(r){var i=Tt,o=String(r);Tt=o,Wt("history",{from:i,to:o})}return t.apply(this,e)}}Lt.onpopstate=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=Lt.location.href,r=Tt;if(Tt=n,Wt("history",{from:r,to:n}),i)return i.apply(this,t)},Object(S.c)(Lt.history,"pushState",o),Object(S.c)(Lt.history,"replaceState",o)}();break;case"error":Gt=Lt.onerror,Lt.onerror=function(t,e,n,r,i){return Wt("error",{column:r,error:i,line:n,msg:t,url:e}),!!Gt&&Gt.apply(this,arguments)};break;case"unhandledrejection":zt=Lt.onunhandledrejection,Lt.onunhandledrejection=function(t){return Wt("unhandledrejection",t),!zt||zt.apply(this,arguments)};break;default:b.warn("unknown instrumentation type:",t)}}function Ut(t){t&&"string"==typeof t.type&&"function"==typeof t.callback&&(Pt[t.type]=Pt[t.type]||[],Pt[t.type].push(t.callback),Nt(t.type))}function Wt(t,e){var n,r;if(t&&Pt[t])try{for(var i=Object(c.f)(Pt[t]||[]),o=i.next();!o.done;o=i.next()){var s=o.value;try{s(e)}catch(e){b.error("Error while triggering instrumentation handler.\nType: "+t+"\nName: "+Object(At.a)(s)+"\nError: "+e)}}}catch(t){n={error:t}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}}function Ft(t){return void 0===t&&(t=[]),"Request"in Lt&&Object(u.g)(t[0],Request)&&t[0].method?String(t[0].method).toUpperCase():t[1]&&t[1].method?String(t[1].method).toUpperCase():"GET"}function Mt(t){return void 0===t&&(t=[]),"string"==typeof t[0]?t[0]:"Request"in Lt&&Object(u.g)(t[0],Request)?t[0].url:String(t[0])}var Dt,Bt,Yt=1e3,qt=0;function $t(t,e,n){return void 0===n&&(n=!1),function(r){Dt=void 0,r&&Bt!==r&&(Bt=r,qt&&clearTimeout(qt),n?qt=setTimeout((function(){e({event:r,name:t})})):e({event:r,name:t}))}}function Ht(t){return function(e){var n;try{n=e.target}catch(t){return}var r=n&&n.tagName;r&&("INPUT"===r||"TEXTAREA"===r||n.isContentEditable)&&(Dt||$t("input",t)(e),clearTimeout(Dt),Dt=setTimeout((function(){Dt=void 0}),Yt))}}var Gt=null;var zt=null;var Jt=n(18),Xt=function(){function t(e){this.name=t.id,this._options=Object(c.a)({console:!0,dom:!0,fetch:!0,history:!0,sentry:!0,xhr:!0},e)}return t.prototype.addSentryBreadcrumb=function(t){this._options.sentry&&R().addBreadcrumb({category:"sentry."+("transaction"===t.type?"transaction":"event"),event_id:t.event_id,level:t.level,message:Object(p.d)(t)},{event:t})},t.prototype.setupOnce=function(){var t=this;this._options.console&&Ut({callback:function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];t._consoleBreadcrumb.apply(t,Object(c.e)(e))},type:"console"}),this._options.dom&&Ut({callback:function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];t._domBreadcrumb.apply(t,Object(c.e)(e))},type:"dom"}),this._options.xhr&&Ut({callback:function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];t._xhrBreadcrumb.apply(t,Object(c.e)(e))},type:"xhr"}),this._options.fetch&&Ut({callback:function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];t._fetchBreadcrumb.apply(t,Object(c.e)(e))},type:"fetch"}),this._options.history&&Ut({callback:function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];t._historyBreadcrumb.apply(t,Object(c.e)(e))},type:"history"})},t.prototype._consoleBreadcrumb=function(t){var e={category:"console",data:{arguments:t.args,logger:"console"},level:$.fromString(t.level),message:Object(L.b)(t.args," ")};if("assert"===t.level){if(!1!==t.args[0])return;e.message="Assertion failed: "+(Object(L.b)(t.args.slice(1)," ")||"console.assert"),e.data.arguments=t.args.slice(1)}R().addBreadcrumb(e,{input:t.args,level:t.level})},t.prototype._domBreadcrumb=function(t){var e;try{e=t.event.target?Object(Jt.a)(t.event.target):Object(Jt.a)(t.event)}catch(t){e="<unknown>"}0!==e.length&&R().addBreadcrumb({category:"ui."+t.name,message:e},{event:t.event,name:t.name})},t.prototype._xhrBreadcrumb=function(t){if(t.endTimestamp){if(t.xhr.__sentry_own_request__)return;var e=t.xhr.__sentry_xhr__||{},n=e.method,r=e.url,i=e.status_code,o=e.body;R().addBreadcrumb({category:"xhr",data:{method:n,url:r,status_code:i},type:"http"},{xhr:t.xhr,input:o})}else;},t.prototype._fetchBreadcrumb=function(t){t.endTimestamp&&(t.fetchData.url.match(/sentry_key/)&&"POST"===t.fetchData.method||(t.error?R().addBreadcrumb({category:"fetch",data:t.fetchData,level:$.Error,type:"http"},{data:t.error,input:t.args}):R().addBreadcrumb({category:"fetch",data:Object(c.a)(Object(c.a)({},t.fetchData),{status_code:t.response.status}),type:"http"},{input:t.args,response:t.response})))},t.prototype._historyBreadcrumb=function(t){var e=Object(p.e)(),n=t.from,r=t.to,i=Object(p.h)(e.location.href),o=Object(p.h)(n),s=Object(p.h)(r);o.path||(o=i),i.protocol===s.protocol&&i.host===s.host&&(r=s.relative),i.protocol===o.protocol&&i.host===o.host&&(n=o.relative),R().addBreadcrumb({category:"navigation",data:{from:n,to:r}})},t.id="Breadcrumbs",t}(),Kt="5.30.0",Zt=function(t){function e(e){return void 0===e&&(e={}),t.call(this,bt,e)||this}return Object(c.b)(e,t),e.prototype.showReportDialog=function(t){void 0===t&&(t={}),Object(p.e)().document&&(this._isEnabled()?It(Object(c.a)(Object(c.a)({},t),{dsn:t.dsn||this.getDsn()})):b.error("Trying to call showReportDialog with Sentry Client disabled"))},e.prototype._prepareEvent=function(e,n,r){return e.platform=e.platform||"javascript",e.sdk=Object(c.a)(Object(c.a)({},e.sdk),{name:"sentry.javascript.browser",packages:Object(c.e)(e.sdk&&e.sdk.packages||[],[{name:"npm:@sentry/browser",version:Kt}]),version:Kt}),t.prototype._prepareEvent.call(this,e,n,r)},e.prototype._sendEvent=function(e){var n=this.getIntegration(Xt);n&&n.addSentryBreadcrumb(e),t.prototype._sendEvent.call(this,e)},e}(q),Vt=["EventTarget","Window","Node","ApplicationCache","AudioTrackList","ChannelMergerNode","CryptoOperation","EventSource","FileReader","HTMLUnknownElement","IDBDatabase","IDBRequest","IDBTransaction","KeyOperation","MediaController","MessagePort","ModalWindow","Notification","SVGElementInstance","Screen","TextTrack","TextTrackCue","TextTrackList","WebSocket","WebSocketWorker","Worker","XMLHttpRequest","XMLHttpRequestEventTarget","XMLHttpRequestUpload"],Qt=function(){function t(e){this.name=t.id,this._options=Object(c.a)({XMLHttpRequest:!0,eventTarget:!0,requestAnimationFrame:!0,setInterval:!0,setTimeout:!0},e)}return t.prototype.setupOnce=function(){var t=Object(p.e)();(this._options.setTimeout&&Object(S.c)(t,"setTimeout",this._wrapTimeFunction.bind(this)),this._options.setInterval&&Object(S.c)(t,"setInterval",this._wrapTimeFunction.bind(this)),this._options.requestAnimationFrame&&Object(S.c)(t,"requestAnimationFrame",this._wrapRAF.bind(this)),this._options.XMLHttpRequest&&"XMLHttpRequest"in t&&Object(S.c)(XMLHttpRequest.prototype,"send",this._wrapXHR.bind(this)),this._options.eventTarget)&&(Array.isArray(this._options.eventTarget)?this._options.eventTarget:Vt).forEach(this._wrapEventTarget.bind(this))},t.prototype._wrapTimeFunction=function(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=e[0];return e[0]=Rt(r,{mechanism:{data:{function:Object(At.a)(t)},handled:!0,type:"instrument"}}),t.apply(this,e)}},t.prototype._wrapRAF=function(t){return function(e){return t.call(this,Rt(e,{mechanism:{data:{function:"requestAnimationFrame",handler:Object(At.a)(t)},handled:!0,type:"instrument"}}))}},t.prototype._wrapEventTarget=function(t){var e=Object(p.e)(),n=e[t]&&e[t].prototype;n&&n.hasOwnProperty&&n.hasOwnProperty("addEventListener")&&(Object(S.c)(n,"addEventListener",(function(e){return function(n,r,i){try{"function"==typeof r.handleEvent&&(r.handleEvent=Rt(r.handleEvent.bind(r),{mechanism:{data:{function:"handleEvent",handler:Object(At.a)(r),target:t},handled:!0,type:"instrument"}}))}catch(t){}return e.call(this,n,Rt(r,{mechanism:{data:{function:"addEventListener",handler:Object(At.a)(r),target:t},handled:!0,type:"instrument"}}),i)}})),Object(S.c)(n,"removeEventListener",(function(t){return function(e,n,r){var i,o=n;try{var s=null===(i=o)||void 0===i?void 0:i.__sentry_wrapped__;s&&t.call(this,e,s,r)}catch(t){}return t.call(this,e,o,r)}})))},t.prototype._wrapXHR=function(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=this;return["onload","onerror","onprogress","onreadystatechange"].forEach((function(t){t in r&&"function"==typeof r[t]&&Object(S.c)(r,t,(function(e){var n={mechanism:{data:{function:t,handler:Object(At.a)(e)},handled:!0,type:"instrument"}};return e.__sentry_original__&&(n.mechanism.data.handler=Object(At.a)(e.__sentry_original__)),Rt(e,n)}))})),t.apply(this,e)}},t.id="TryCatch",t}(),te=function(){function t(e){this.name=t.id,this._onErrorHandlerInstalled=!1,this._onUnhandledRejectionHandlerInstalled=!1,this._options=Object(c.a)({onerror:!0,onunhandledrejection:!0},e)}return t.prototype.setupOnce=function(){Error.stackTraceLimit=50,this._options.onerror&&(b.log("Global Handler attached: onerror"),this._installGlobalOnErrorHandler()),this._options.onunhandledrejection&&(b.log("Global Handler attached: onunhandledrejection"),this._installGlobalOnUnhandledRejectionHandler())},t.prototype._installGlobalOnErrorHandler=function(){var e=this;this._onErrorHandlerInstalled||(Ut({callback:function(n){var r=n.error,i=R(),o=i.getIntegration(t),s=r&&!0===r.__sentry_own_request__;if(o&&!jt()&&!s){var a=i.getClient(),c=Object(u.i)(r)?e._eventFromIncompleteOnError(n.msg,n.url,n.line,n.column):e._enhanceEventWithInitialFrame(lt(r,void 0,{attachStacktrace:a&&a.getOptions().attachStacktrace,rejection:!1}),n.url,n.line,n.column);Object(p.a)(c,{handled:!1,type:"onerror"}),i.captureEvent(c,{originalException:r})}},type:"error"}),this._onErrorHandlerInstalled=!0)},t.prototype._installGlobalOnUnhandledRejectionHandler=function(){var e=this;this._onUnhandledRejectionHandlerInstalled||(Ut({callback:function(n){var r=n;try{"reason"in n?r=n.reason:"detail"in n&&"reason"in n.detail&&(r=n.detail.reason)}catch(t){}var i=R(),o=i.getIntegration(t),s=r&&!0===r.__sentry_own_request__;if(!o||jt()||s)return!0;var a=i.getClient(),c=Object(u.i)(r)?e._eventFromRejectionWithPrimitive(r):lt(r,void 0,{attachStacktrace:a&&a.getOptions().attachStacktrace,rejection:!0});c.level=$.Error,Object(p.a)(c,{handled:!1,type:"onunhandledrejection"}),i.captureEvent(c,{originalException:r})},type:"unhandledrejection"}),this._onUnhandledRejectionHandlerInstalled=!0)},t.prototype._eventFromIncompleteOnError=function(t,e,n,r){var i,o=Object(u.e)(t)?t.message:t;if(Object(u.k)(o)){var s=o.match(/^(?:[Uu]ncaught (?:exception: )?)?(?:((?:Eval|Internal|Range|Reference|Syntax|Type|URI|)Error): )?(.*)$/i);s&&(i=s[1],o=s[2])}var a={exception:{values:[{type:i||"Error",value:o}]}};return this._enhanceEventWithInitialFrame(a,e,n,r)},t.prototype._eventFromRejectionWithPrimitive=function(t){return{exception:{values:[{type:"UnhandledRejection",value:"Non-Error promise rejection captured with value: "+String(t)}]}}},t.prototype._enhanceEventWithInitialFrame=function(t,e,n,r){t.exception=t.exception||{},t.exception.values=t.exception.values||[],t.exception.values[0]=t.exception.values[0]||{},t.exception.values[0].stacktrace=t.exception.values[0].stacktrace||{},t.exception.values[0].stacktrace.frames=t.exception.values[0].stacktrace.frames||[];var i=isNaN(parseInt(r,10))?void 0:r,o=isNaN(parseInt(n,10))?void 0:n,s=Object(u.k)(e)&&e.length>0?e:Object(p.f)();return 0===t.exception.values[0].stacktrace.frames.length&&t.exception.values[0].stacktrace.frames.push({colno:i,filename:s,function:"?",in_app:!0,lineno:o}),t},t.id="GlobalHandlers",t}(),ee=function(){function t(e){void 0===e&&(e={}),this.name=t.id,this._key=e.key||"cause",this._limit=e.limit||5}return t.prototype.setupOnce=function(){_((function(e,n){var r=R().getIntegration(t);return r?r._handler(e,n):e}))},t.prototype._handler=function(t,e){if(!(t.exception&&t.exception.values&&e&&Object(u.g)(e.originalException,Error)))return t;var n=this._walkErrorTree(e.originalException,this._key);return t.exception.values=Object(c.e)(n,t.exception.values),t},t.prototype._walkErrorTree=function(t,e,n){if(void 0===n&&(n=[]),!Object(u.g)(t[e],Error)||n.length+1>=this._limit)return n;var r=at(rt(t[e]));return this._walkErrorTree(t[e],e,Object(c.e)([r],n))},t.id="LinkedErrors",t}(),ne=Object(p.e)(),re=function(){function t(){this.name=t.id}return t.prototype.setupOnce=function(){_((function(e){var n,r,i;if(R().getIntegration(t)){if(!ne.navigator&&!ne.location&&!ne.document)return e;var o=(null===(n=e.request)||void 0===n?void 0:n.url)||(null===(r=ne.location)||void 0===r?void 0:r.href),s=(ne.document||{}).referrer,a=(ne.navigator||{}).userAgent,u=Object(c.a)(Object(c.a)(Object(c.a)({},null===(i=e.request)||void 0===i?void 0:i.headers),s&&{Referer:s}),a&&{"User-Agent":a}),l=Object(c.a)(Object(c.a)({},o&&{url:o}),{headers:u});return Object(c.a)(Object(c.a)({},e),{request:l})}return e}))},t.id="UserAgent",t}(),ie=[new r.InboundFilters,new r.FunctionToString,new Qt,new Xt,new te,new ee,new re];var oe={},se=Object(p.e)();se.Sentry&&se.Sentry.Integrations&&(oe=se.Sentry.Integrations);var ae=Object(c.a)(Object(c.a)(Object(c.a)({},oe),r),o);function ce(t,e){for(var n=0,r=t.length-1;r>=0;r--){var i=t[r];"."===i?t.splice(r,1):".."===i?(t.splice(r,1),n++):n&&(t.splice(r,1),n--)}if(e)for(;n--;n)t.unshift("..");return t}var ue=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^/]+?|)(\.[^./]*|))(?:[/]*)$/;function le(t){var e=ue.exec(t);return e?e.slice(1):[]}function de(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n="",r=!1,i=t.length-1;i>=-1&&!r;i--){var o=i>=0?t[i]:"/";o&&(n=o+"/"+n,r="/"===o.charAt(0))}return(r?"/":"")+(n=ce(n.split("/").filter((function(t){return!!t})),!r).join("/"))||"."}function pe(t){for(var e=0;e<t.length&&""===t[e];e++);for(var n=t.length-1;n>=0&&""===t[n];n--);return e>n?[]:t.slice(e,n-e+1)}var he=function(){function t(e){var n=this;void 0===e&&(e={}),this.name=t.id,this._iteratee=function(t){if(!t.filename)return t;var e,r,i=/^[A-Z]:\\/.test(t.filename),o=/^\//.test(t.filename);if(i||o){var s=i?t.filename.replace(/^[A-Z]:/,"").replace(/\\/g,"/"):t.filename,a=n._root?function(t,e){t=de(t).substr(1),e=de(e).substr(1);for(var n=pe(t.split("/")),r=pe(e.split("/")),i=Math.min(n.length,r.length),o=i,s=0;s<i;s++)if(n[s]!==r[s]){o=s;break}var a=[];for(s=o;s<n.length;s++)a.push("..");return(a=a.concat(r.slice(o))).join("/")}(n._root,s):(r=le(s)[2],e&&r.substr(-1*e.length)===e&&(r=r.substr(0,r.length-e.length)),r);t.filename="app:///"+a}return t},e.root&&(this._root=e.root),e.iteratee&&(this._iteratee=e.iteratee)}return t.prototype.setupOnce=function(e,n){e((function(e){var r=n().getIntegration(t);return r?r.process(e):e}))},t.prototype.process=function(t){return t.exception&&Array.isArray(t.exception.values)?this._processExceptionsEvent(t):t.stacktrace?this._processStacktraceEvent(t):t},t.prototype._processExceptionsEvent=function(t){var e=this;try{return Object(c.a)(Object(c.a)({},t),{exception:Object(c.a)(Object(c.a)({},t.exception),{values:t.exception.values.map((function(t){return Object(c.a)(Object(c.a)({},t),{stacktrace:e._processStacktrace(t.stacktrace)})}))})})}catch(e){return t}},t.prototype._processStacktraceEvent=function(t){try{return Object(c.a)(Object(c.a)({},t),{stacktrace:this._processStacktrace(t.stacktrace)})}catch(e){return t}},t.prototype._processStacktrace=function(t){var e=this;return Object(c.a)(Object(c.a)({},t),{frames:t&&t.frames&&t.frames.map((function(t){return e._iteratee(t)}))})},t.id="RewriteFrames",t}();let fe;fe=self;var _e=fe,ge=n(35);class ye extends ge.EventEmitter{__emitToSubscription(t,e,...n){try{t.listener.apply(t.context,n)}catch(t){console.error(`Exception in ${e} event handler`,t)}}}const me=["file_download","session_created","session_loaded","session_queued","session_started","viewer_joined","participant_joined","viewer_left","participant_left","session_pre_end","session_ended","session_ended_soft","session_paused","session_resumed","tab_paused","tab_resumed","message","user_activity","relocate_start","relocated","error","control","tab_control","host_changed","yt_notification","tab_activated","annotation_start","annotation_end","active_speaker_changed","chat_message","get_session_info","take_screenshot"],ve=["file_download","session_created","session_loaded","session_queued","session_started","viewer_joined","participant_joined","viewer_left","participant_left","session_pre_end","session_ended","session_ended_soft","session_paused","session_resumed","tab_paused","tab_resumed","relocated","error","control","tab_control","host_changed","yt_notification"],be=["agent_status","session_restored"];be.concat(me);var we=n(36),Se=n.n(we);let Oe,xe=!1;function Ee(t){return xe&&Oe?Oe.t(t):t}n(63);(function(){const t=_e.navigator.userAgent.toLowerCase(),e=_e.navigator.appName;"Microsoft Internet Explorer"===e||"Netscape"===e&&t.indexOf("trident")})(),Boolean(/Android/g.test(_e.navigator.userAgent));const ke=Boolean(_e.navigator.userAgent.match(/Chrome/)),je=Boolean(_e.navigator.userAgent.match(/Safari/))&&"Apple Computer, Inc."===_e.navigator.vendor,Re=Boolean(_e.navigator.userAgent.match(/iPad|iPhone|iPod/));/Safari\//g.test(_e.navigator.userAgent)&&/Chrom/g.test(_e.navigator.userAgent);const Ie=_e.navigator.maxTouchPoints&&_e.navigator.maxTouchPoints>2&&/MacIntel/.test(_e.navigator.platform),Te=(Re&&15===function(){const t=/CPU( iPad| iPhone| iPod)? OS (\d*)_(\d*)/g.exec(navigator.userAgent);return{minor:Re?parseInt(t.pop()):NaN,major:Re?parseInt(t.pop()):NaN}}().major||(Ie||je)&&_e.navigator.userAgent.includes("Version/15."),Boolean(_e.navigator.mediaDevices&&_e.navigator.mediaDevices.getUserMedia&&("function"==typeof RTCPeerConnection||"object"==typeof RTCPeerConnection)),_e.navigator.userAgent.indexOf("Firefox"),_e.navigator.userAgent.indexOf("Edg")>-1),Ae=_e.navigator.userAgent.indexOf("Opera")>-1||_e.navigator.userAgent.indexOf("OPR")>-1,Le=ke||Te||Ae;var Pe=n(37),Ce=n.n(Pe);function Ne(){return _e.mainWindow&&_e.mainWindow.surflyApiFrame?_e.mainWindow.surflyApiFrame:null}function Ue(t){t||(t="surfly-invisible"),_e.mainWindow&&_e.mainWindow.surflyApiFrame&&(_e.mainWindow.surflyApiFrame.className=t)}function We(t){let e=document.querySelector("style#surfly-branding");if(!e)return e=document.createElement("style"),e.id="surfly-branding",e.appendChild(document.createTextNode(`\n        .surfly-button {\n            background-color: ${t.branding_primary_color};\n            color:            ${t.branding_primary_text_color};\n            fill:             ${t.branding_primary_text_color};\n        }\n\n        .surfly-modal button, .surfly-modal .title {\n            background-color: ${t.branding_primary_color};\n            color:            ${t.branding_primary_text_color};\n        }\n\n        .surfly-modal button:hover {\n            background-color: ${t.branding_secondary_color};\n            color:            ${t.branding_secondary_text_color};\n        }\n\n        .surfly-modal button.cancel .spin {\n            border-color: #555;\n            border-top-color: ${t.branding_primary_color};\n        }\n\n        .surfly-modal button.accept .spin {\n            border-color: ${t.branding_secondary_color};\n            border-top-color: ${t.branding_primary_color};\n        }\n    `)),window.document.head.appendChild(e),e}function Fe(t,e){const n=document.querySelector(".surfly-modal"),r=!n;We(t);const i=window.document.createElement("div");i.classList.add("surfly-modal"),r&&i.classList.add("fadein");const o=window.document.createElement("div");if(o.classList.add("content"),r&&o.classList.add("easein"),i.appendChild(o),e.title){const t=window.document.createElement("div");t.classList.add("title"),t.appendChild(window.document.createTextNode(e.title())),o.appendChild(t)}const s=window.document.createElement("div");if(s.classList.add("body"),o.appendChild(s),e.body){const t=window.document.createElement("p");t.innerHTML=e.body(),s.appendChild(t)}const a=window.document.createElement("div");let c;return a.classList.add("buttons"),s.appendChild(a),e.cancel?(c=window.document.createElement("button"),c.classList.add("cancel"),c.appendChild(window.document.createTextNode(e.cancel())),a.appendChild(c)):(c=document.createElement("span"),c.className="cancel surfly-popup-close",s.append(c)),e.accept&&(c=window.document.createElement("button"),c.classList.add("accept"),c.appendChild(window.document.createTextNode(e.accept())),a.appendChild(c)),n?n.parentNode.replaceChild(i,n):window.document.body.appendChild(i),i}let Me=null;function De(t){if(t)return t.parentNode.removeChild(t),!1}function Be(t){if(!document.querySelector(".surfly-popup-iframe")){const e=document.createElement("iframe");e.className="surfly-popup-iframe",e.frameborder=0,e.src=t;const n=document.createElement("div");n.className="surfly-transparent-div",document.body.appendChild(n);const r=document.createElement("div");r.className="surfly-popup-iframe-div",r.appendChild(e);const i=document.createElement("div");i.className="surfly-popup-close",i.onclick=function(){De(document.querySelector(".surfly-transparent-div")),De(document.querySelector(".surfly-popup-iframe-div")),_e.mainWindow.location.reload()},n.onclick=function(){De(document.querySelector(".surfly-transparent-div")),De(document.querySelector(".surfly-popup-iframe-div")),_e.mainWindow.location.reload()},r.appendChild(i),document.body.appendChild(r)}Ue("surfly-popup")}let Ye=Be;function qe(t){let e=document.querySelector(".surfly-button");e&&e.parentNode.removeChild(e),We(t),e=document.createElement("div"),e.className="surfly-button surfly-button-hidden";const n="surfly-button-position-"+(t.support_button_position||"bottomleft");e.classList.add(n);const r=document.createElement("span");r.innerHTML=Ce.a,e.appendChild(r);const i=document.createElement("span");return i.textContent=Ee("Get Live Help"),e.appendChild(i),document.body.appendChild(e),Ue("surfly-button "+n),e}function $e(t,e){const n=_e.open(void 0,"_blank");n?t(n):e(new Error("Could not open a new window"))}function He(t){return new Promise(((e,n)=>{let r;t._api.settings.session_start_confirmation||(r=_e.open(void 0,"_blank")),r?e(r):(Ot("Popup window blocked","info"),t?t.show().then((()=>{$e(e,n)})).catch((t=>{n(t)})).finally((()=>{t.hide()})):$e(e,n))}))}let Ge=He;function ze(){return Ge.apply(this,arguments)}function Je(t){this.name="ModalDismissed",this.message=t,this.stack=(new Error).stack}Je.prototype=new Error;class Xe{constructor(t,e){this._api=t,this._node=null,this._click_listeners=[],this._ignore_clickout=!1,this._localize={cancel:()=>Ee("Cancel"),title:()=>Ee("Start session")}}show(){return this._node=this._node||Fe(this._api.settings,this._localize),new Promise(((t,e)=>{const n=Ne(),r=this._node.querySelector(".content"),i=this._node.querySelector("button.cancel")||this._node.querySelector(".surfly-popup-close"),o=this._node.querySelector("button.accept");n.className="surfly-popup",this._listen_click(r,(t=>t.stopPropagation())),this._ignore_clickout||this._listen_click(this._node,(t=>{t.stopPropagation(),i&&this.spin(i),e(new Je("User clicked out of modal"))})),i&&this._listen_click(i,(t=>{t.stopPropagation(),this.spin(i),e(new Je("Cancel button pressed"))})),o&&this._listen_click(o,(e=>{e.stopPropagation(),this.spin(o),t()}))}))}hide(){if(this._node){this._node.parentNode&&this._node.parentNode.removeChild(this._node),this._node=null;Ne().className="surfly-invisible",this._remove_listeners()}}release(){this._node=null}spin(t){t.style.cssText=`width: ${t.clientWidth}px; height: ${t.clientHeight}px;`,t.innerHTML="",t.appendChild(function(){const t=document.createElement("div");return t.classList.add("spin"),t}())}_listen_click(t,e){this._click_listeners.push([t,e]),t.addEventListener("click",e)}_remove_listeners(){for(;this._click_listeners.length;){const[t,e]=this._click_listeners.pop();t.removeEventListener("click",e)}}}class Ke extends Xe{constructor(t){super(t,null),this._localize={body:()=>t._escapeHTML(t.settings.confirmation_modal_body)||"<p>"+Ee("You’ve requested assistance and a secure co-browsing session will be prepared to facilitate this request.")+"</p><p>"+Ee("The agent that will assist you will not be able to see any open tabs in your browser or sensitive information such as passwords.")+"</p><p>"+Ee("Do you want to proceed to connect with the agent?")+"</p>",accept:()=>Ee("Connect"),cancel:null,title:null}}show(){return this._node=this._node||Fe(this._api.settings,this._localize),super.show()}}class Ze extends Xe{constructor(t){super(t,null),this._ignore_clickout=!0,this._localize={body:()=>Ee("Your support pin is:")+'<p class="pin" data-t="pin-modal"></p>'+Ee("Please wait until a support agent joins your session"),cancel:()=>Ee("End session")},this.pin="…"}show(){return this._node=this._node||Fe(this._api.settings,this._localize),this._node.querySelector(".pin").innerHTML=this.pin,super.show()}}class Ve extends Xe{constructor(t){super(t,null),this._ignore_clickout=!0,this._localize={body:()=>Ee("Cobrowsing session is opened in a separate tab.")+" "+Ee("Please do not close this window while it is active."),cancel:()=>Ee("End session")}}}var Qe=(t=>(t.TYPE_TOP="T",t.TYPE_FRAME="F",t.TYPE_SCRIPT="S",t.TYPE_MODULE="M",t.TYPE_LINK="L",t.TYPE_XHR="X",t.TYPE_RESOURCE="R",t.TYPE_WORKER="W",t.TYPE_WORKER_SCOPE="Y",t.TYPE_WORKER_MODULE="Z",t.TYPE_REDIRECT="D",t.TYPE_PAWS="P",t.TYPE_CONTINUATION="C",t.TYPE_UNKNOWN="U",t))(Qe||{});const tn="TFSMLXRWZYDPCU";var en=n(13),nn=n.n(en),rn=n(38),on=n.n(rn);const sn="ss-surfly-blob-";String.prototype.trim;const an=t=>{const e=new on.a("SHA-1","TEXT");return e.update(t),e.getHash("HEX")};const cn={9:"0",Z:"A",z:"a"};const un={0:"9",A:"Z",a:"z"};function ln(t,e,n){if("string"!=typeof t)throw new TypeError("String expected in mangler");return Array.prototype.map.call(t,(function(t){return function(t){const e=t.charCodeAt(0);return e>=97&&e<=122||e>=65&&e<=90||e>=48&&e<=57}(t)?e[t]||String.fromCharCode(t.charCodeAt(0)+n):t})).reverse().join("")}var dn={encode:function(t){return ln(t,cn,1)},decode:function(t){return ln(t,un,-1)}};const pn=new Array(10).join("/"),hn="SURFLYROOT"+new Array(10).join("/"),fn="((?:/[_ %a-zA-Z0-9-]+)*)(?:/(:\\d+))?/([HS])(["+tn+"])/(?:[a-zA-Z0-9]+)/{1,9}",_n=/^\s*(?:https?:|\/\/)/,gn=/^(\s*)(https?:)?[\/\\]*([_ %a-z0-9.-]+\.[a-z0-9-]{1,63})(:[0-9]{0,5})?(\/blob)?([/#?]|\s*$)/i,yn=/^(?:https?:[\/\\]*|\/\/)([^\/:?#]{3,63})(?:[\/:?#]|$)/i,mn=new RegExp("[?&]SURFLY=(["+tn+"])"),vn=new RegExp("[?&]SURFLY_TAB_PREFIX=([a-zA-Z0-9_$%*.!~`)(-]+)"),bn=new RegExp("[?&]SURFLY_TOP_FRAME_DEPTH=([0-9]*)"),wn=new RegExp(fn),Sn=new RegExp(fn,"g"),On=new RegExp("^\\s*(\\w{3,10})(&colon;|:)","i"),xn=/^https?:[\/\\]*/,En=new RegExp(`[^.]+\\.(?:${["co.uk","w3c-test.org"].join("|")}|[^.]+)$`),kn=/^https?:[\/\\]*(localhost|127.0.0.1)/i,jn="/[mfs][a-zA-Z0-9]+/hidden_tab/{0,1}$";function Rn(t){return t?"-m":"-p"}function In(t){return t.replace(/\./g,"\\.")}function Tn(t){return"([- %\\w]+[ %\\w]+)-[pm]\\."+In(t)}function An(t){return new RegExp("https://"+Tn(t)+"(?:"+fn+"(.?))?","g")}function Ln(t){const e=yn.exec(t);if(e&&2===e.length)return e[1]}function Pn(t,e){let n=t.split("/").slice(1).reverse();return e&&(n=n.map(dn.decode)),n.join(".")}const Cn=class t{constructor(t){var e,n,r;this.adBlockingRules=[["_analytics.js?","___SURFLY_a__nalytics.js?"]],this.server_name=t.server_name,this.urltoken=t.urltoken,this.session_id=t.session_id,this.parent_session_id=t.parent_session_id,this.url_mangling=null!=(e=t.url_mangling)&&e,this.isPrivacyHeaders=null!=(n=t.isPrivacyHeaders)&&n,this.isLocalhostAllowed=null!=(r=t.isLocalhostAllowed)&&r,this.sessionURLRegExp=new RegExp(this.getSessionURLRegExpString())}getDomainSuffix(){return Rn(this.url_mangling)+"."+this.server_name}getSessionURLRegExpString(){return`session[0-9]{0,2}\\.${this.server_name}`}isProxified(t){return new RegExp(`${Rn(this.url_mangling)}\\.${In(this.server_name)}`,"i").test(t)}unproxifyPort(t){if("string"==typeof t)try{const e=An(this.server_name).exec(t);return e&&e[3]?e[3]:""}catch(t){this.reportError(t)}return t}unproxifyHostname(t){let e;if("string"==typeof t)try{const n=this.externalResourcePattern();0===t.indexOf(n)&&(t=t.replace(n,""));let r=An(this.server_name).exec(t);const i=null==r?void 0:r[2];i?e=Pn(i,this.url_mangling):(r=gn.exec(t),r&&(e=r[3]))}catch(e){return this.reportError(e),t}return e}unproxifyHost(t){if("string"==typeof t)try{let e=this.unproxifyHostname(t);if(void 0===e)return;const n=this.unproxifyPort(t);return void 0!==n&&(e+=n),e}catch(t){this.reportError(t)}return t}unproxifyProtocol(t){if("string"==typeof t)try{if(t.includes(sn))return"blob:";const e=this.externalResourcePattern();t.startsWith(e)&&(t=t.replace(e,""));let n=An(this.server_name).exec(t);if(n){if("S"===n[4])return"https:";if("H"===n[4])return"http:"}if(n=gn.exec(t),n){const t=n[2];if(t)return t.toLowerCase()}return}catch(t){this.reportError(t)}return t}removeSurflyroot(t){if(-1!==t.indexOf(hn)){const e=Un(t),n=t.indexOf(this.urltoken);-1!==n&&(t=t.substring(0,n+this.urltoken.length)+"/".repeat(9)+e)}return t}unproxifyUrls(t){if("string"!=typeof t)return t;try{const n=this.externalResourcePattern();if(0===t.indexOf(n))return t.replace(n,"");const r=(e=this.server_name,new RegExp("https://"+Tn(e)+jn,"g")).exec(t);if(r)return r[0];const i=On.exec(t);if(i&&["data","blob"].includes(i[1]))return t;t=this.removeSearchSuffixes(t);let o=!1;if(t=Un(t=(t=t.replace(An(this.server_name),((t,...e)=>(o=!0,function(t,e,n,r,i,o,s,a){const c="S"===o?"https:":"http:";let u;if(void 0===r){throw"Surfly: url "+e+" has no domainpath. cannot be unproxified."}a&&!/^[\s'"?#\/)]/.test(a[0])&&(a=`/${a}`);return u=c+"//"+Pn(r,t)+(i||""),u=function(t){const e=Ln(t);e&&(t=t.replace(nn.a.toASCII(e),nn.a.toUnicode(e)));return t}(u),u+(a||"")}(this.url_mangling,t,...e))))).replace(Gn,"$1/")),!o){const e=t.replace(Sn,"");t=e!==t&&"/"!==e[0]?"/"+e:e}return"m"===this.urltoken[0]&&(t=t.replace(this.urltoken,"")),t.includes(sn)&&(t=`blob:${t.replace(sn,"")}`),t}catch(t){this.reportError(t)}var e;return t}removeSearchSuffixes(t){return t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=t.replace(Wn,"")).replace(Dn,"")).replace(Bn,"")).replace(Yn,"")).replace(qn,"")).replace(vn,"")).replace(bn,"")).replace(Fn,"")).replace(Mn,"")).replace($n,"")).replace(Hn,""),t=this.decodeAdBlocking(t)}proxifyDomain(t){return function(t,e,n){const r=t.match(En);if(!r){throw"No match for check_domain_re on domain "+t}let i=function(t){return t.replace(/0/g,"00").replace(/-/g,"-0-").replace(/\./g,"-")}(r[0]);n&&(i=function(t,e){return an(t.toLowerCase()+e)}(i,e));return i}(t,this.parent_session_id||this.session_id,this.url_mangling)+this.getDomainSuffix()}toDomainPath(t){let e=t.split(".");return this.url_mangling&&(e=e.map(dn.encode)),"/"+e.reverse().join("/")}proxifyOrigin(t){const e=/^https?:[\/\\]*([\w-.]+)/.exec(t);return(null==e?void 0:e[1])?"https://"+this.proxifyDomain(e[1]):(this.reportError(`Unable to extract domain from provided origin: ${t}`),null)}getUnproxifiedOrigin(t){const e=this.unproxifyProtocol(t.location.href),n=this.unproxifyHost(t.location.href);return e&&n?e+"//"+n:""}insertSuffix(t,e){var n;const r=null==(n=/\?(?<suffixName>[A-Z_0-9]+)=(?<suffixValue>[^\?\&]+)/.exec(e))?void 0:n.groups;if(!r)return t;if(t.includes(`?${r.suffixName}=`)){const e=new RegExp(`(${r.suffixName})=([^?&#]*)`);return t.replace(e,`$1=${r.suffixValue}`)}{const n=this._getURLProtocol(t);return n&&"http"!==n?t:t.replace(zn,`${e}$1`)}}getSuffixValue(t,e){if(t.includes(`${e}=`)){const[n,r=""]=t.split(`${e}=`),[i]=r.split(/[&?]/);return i}return null}setType(t,e){return Zn(t)===e&&e!==Qe.TYPE_MODULE?t:(t=t.replace(mn,""),this.insertSuffix(t,"?SURFLY="+e))}insertCharset(t,e){return t=t.replace($n,""),e&&(t=this.insertSuffix(t,"?SURFLY_CHARSET="+e)),t}proxifyUrl(t,e,n,r=!1){let i,o;if(null===t)return t;if(i="object"==typeof t?t+"":t,this.isLocalhostAllowed&&this.isLocalURL(i))return this.removeSearchSuffixes(i);try{o=this._proxifyUrl(i,e,n,r),o=this.encodeAdBlocking(o)}catch(e){return this.reportError(e),t}return o===i?t:o}_getURLProtocol(t){var e;const n=null==(e=On.exec(t))?void 0:e[1];return n?n.slice(0,4):null}_proxifyUrl(t,e,n,r){if(t=function(t){const e=Ln(t);return e&&(t=t.replace(nn.a.toUnicode(e),nn.a.toASCII(e))),t}(t=function(t){return/^https?:\/[^\/\\]/.test(t)?t.replace(/^https?:\//,"/"):t}(t=function(t){const e=t.indexOf(":");if(-1===e||e>10||t.startsWith("/"))return t;const n=t.substring(0,e);return t.replace(n,n.toLowerCase())}(t=t.trim()))),n===Qe.TYPE_REDIRECT&&xn.test(t))return this.externalResourcePattern()+t;const i=this._getURLProtocol(t);if(i&&"http"!==i)return t;if(n===Qe.TYPE_TOP||n===Qe.TYPE_FRAME){if(e&&e===n&&"#"===t[0])return t;{const e=this.getTabPrefix();e&&!vn.exec(t)&&(t=this.insertSuffix(t,"?SURFLY_TAB_PREFIX="+e)),t=this.insertFrameoriginSuffix(t)}}let o=!1,s=!1;return _n.test(t)&&(t=t.replace(gn,((t,e,i,a,c,u,l)=>{if(o=!0,this.isProxified(a))return s=!0,t;if(u&&a.match(this.sessionURLRegExp))return t;const d="https:"===(i=i?i.toLowerCase():this.getDefaultProtocol()).toLowerCase()?"S":"H";if(c&&":"!==c){c=":443"===c&&"S"===d||":80"===c&&"H"===d?"":"/"+c}else c="";let p=this.toDomainPath(a);if(p&&r&&(p=p.toLowerCase()),!a)return t;return`${e}https://${this.proxifyDomain(a)+p+c}/${d}${n}/${this.urltoken}${pn}${l}`}))),o?((s||n===Qe.TYPE_MODULE)&&(t=this.setType(t,n)),t):("/"===t[0]&&(t=hn+t,n===Qe.TYPE_MODULE&&(t="./"+t)),this.setType(t,n))}proxifyCssUrls(t,e){return t.replace(Jn,((t,n,r,i,o,s,a)=>{let c;if(n){const s="@"===n[0]?Qe.TYPE_LINK:e;return c=i.trim(),c?"#"===c[0]||0===i.indexOf("data:")?t:n+r+this.proxifyUrl(Kn(i),null,s,!1)+o:t}return r=a[0],a=a.slice(1,-1),c=(a=this.proxifyUrl(Kn(a),null,Qe.TYPE_LINK,!1)).trim(),c?"#"===c[0]||0===a.indexOf("data:")?t:s+r+a+r:t}))}replaceUrlPart(t,e,n,r){const i=null!=t?t:Zn(e);return"object"==typeof r&&r.hasOwnProperty("toString")&&(r=r.toString()),"href"===n?Qn.test(r)?this.proxifyUrl(r,t,i,!1):"/"===r[0]?hn+r:r:(e=function(t,e,n){return t.replace(Qn,(function(t,r,i,o,s){switch(e){case"protocol":i=function(t,e){if(t[t.length-1]!==e)return t+e;return t}(n,":");break;case"host":case"hostname":o=n}return r+i+"//"+o+function(t,e,n){return t.replace(tr,(function(t,r,i,o){switch(i=i||"",o=o||"",e){case"pathname":r=Vn("/",n);break;case"search":i=Vn("?",n);break;case"hash":o=Vn("#",n)}return r+i+o}))}(s,e,n)}))}(e=this.unproxifyUrls(e),n,r),this.proxifyUrl(e,t,i,!1))}isLocalURL(t){return kn.test(t.toString())}reportError(t){console.error(t)}escapeRegExp(t){return t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}encodeAdBlocking(t){return this.encodeOrDecodeAdBlocking(t,((t,e,n)=>{const r=new RegExp(this.escapeRegExp(e),"g");return t.replace(r,n)}))}decodeAdBlocking(t){return this.encodeOrDecodeAdBlocking(t,((t,e,n)=>{const r=new RegExp(this.escapeRegExp(n),"g");return t.replace(r,e)}))}encodeOrDecodeAdBlocking(t,e){let n=t;for(const[t,r]of this.adBlockingRules)n=e(n,t,r);return n}externalResourcePattern(){return`https://external${this.getServerId(this.session_id)}.${this.server_name}/external_resource/?is_ph=${this.isPrivacyHeaders}&url=`}getServerId(e){var n;const r=null==(n=t.serverIdRegexp.exec(e))?void 0:n.groups;return r?r.serverId:""}getSurflyOrigin(t,e){return e.startsWith("https://")&&t&&!e.toLowerCase().startsWith(t)?`?SURFLYORIGIN=${t}`:"?SURFLYORIGIN=same"}};Cn.serverIdRegexp=/[mfs]((?<serverId>\d\d))[a-zA-Z0-9]+/;let Nn=Cn;function Un(t){const e="SURFLYROOT",n={" ":1,"\n":1,"\t":1,"'":1,'"':1,"?":1,"#":1,"(":1,")":1,"\f":1,"\r":1,"\v":1};let r,i,o,s;for(;(i=t.lastIndexOf(e))>-1;){r="",o="";for(let e=0;e<=9&&"/"===t[i+10+e];e++)r+="/";for(s=1;i-s>-1&&!(t[i-s]in n);)s++;o=t.substring(i-s+1,i),t=t.replace(o+e+r,"/")}return t}const Wn=new RegExp(`[?&]SURFLY=([${tn}])`,"g"),Fn=new RegExp("[?&]SURFLY_ORPHAN=[a-zA-Z0-9_]+","g"),Mn=new RegExp("[?&]SURFLY_NEW_TAB=[a-zA-Z0-9_]+","g"),Dn=new RegExp("[?&]SURFLYORIGIN=([^?&#]*)","g"),Bn=new RegExp("[?&]SURFLYFRAMEORIGIN=([^?&#'\"]*)","g"),Yn=new RegExp("[?&]SURFLY_DOWNLOAD=([^?&#]*)","g"),qn=new RegExp("[?&]SURFLYOPENER=[0-9_]*","g"),$n=new RegExp("[?&]SURFLY_CHARSET=([^?&#]*)","g"),Hn=new RegExp("[?&]SURFLY_BOOT_ID=-?d*","g"),Gn=/(https?:\/\/[a-z0-9.-]+\.[a-z0-9-]{1,63}(:[0-9]{0,5})?)(\/(?:[^\s'"?#()]*?SURFLYROOT\/{0,10})+)/g;const zn=/(#|\?|$)/,Jn=/((?:@import\s+)?url\s*\(\s*)(['"]?)(\s*.*?)(\2\s*\))|(@import\s*)((?:"(?:[^"]+)")|(?:\'(?:[^\']+)\'))/gi,Xn=/\\([0-9a-fA-F]+) ?/g,Kn=t=>t.replace(Xn,((t,e)=>String.fromCharCode(parseInt(e,16))));function Zn(t){if("string"==typeof t&&"data:"===t.slice(0,5))return null;let e=mn.exec(t);return e?e[1]:(e=wn.exec(t),e?e[4]:"string"==typeof t&&t.includes("/hidden_tab")?Qe.TYPE_TOP:null)}function Vn(t,e){return e[0]!==t?"/"!==t&&""===e?e:t+e:e}const Qn=/^(\s*)(https?:)?\/\/([^\/]+)(.*)\s*/i;const tr=/([^?#]+)(\?[^#]*)?(#.*)?/;class er extends Nn{constructor(t){super(t),this.protocol=null,this.protocol=t.protocol}getDefaultProtocol(){return this.protocol||"https:"}getTabPrefix(){return null}insertFrameoriginSuffix(t){return t}insertOriginSuffix(t){return t}}var nr=n(2);const rr={file_download:function(t){return{url:t.url,filename:t.filename}},viewer_joined:function(t){return{count:t.count,userData:t.userdata,clientIndex:t.origin}},participant_joined:function(t){return{userData:t.userdata,clientIndex:t.origin}},viewer_left:function(t){return{count:t.count,userData:t.userdata,clientIndex:t.origin}},participant_left:function(t){return{userData:t.userdata,clientIndex:t.origin}},error:function(t){const e={reason:t.reason};return t.details&&(e.details=t.details),e},host_rights_requested:function(t){return{clientIndex:t.clientIndex}},control:function(t){return{to:t.to,gained:t.gain,myIndex:t.my_index}},host_changed:function(t){return{to:t.to,gained:t.gain,myIndex:t.my_index}},tab_control_requested:function(t){return{clientIndex:t.clientIndex}},tab_control:function(t){return{tabIndex:t.tabIndex,leaderIndex:t.leaderIndex,controlIndex:t.controlIndex}},session_ended:function(t){let e=null;return t.final_location&&Object(nr.b)(t.final_location)&&(e=t.final_location),{final_location:e}},session_pre_end:function(t){return{final_location:t.final_location}},tab_paused:function(t){return{leaderIndex:t.leaderIndex,tabIndex:t.tabIndex}},tab_resumed:function(t){return{leaderIndex:t.leaderIndex,tabIndex:t.tabIndex}},tab_activated:function(t){return{ssid:t.ssid}},annotation_start:function(t){return{clientIndex:t.clientIndex}},annotation_end:function(t){return{clientIndex:t.clientIndex}},active_speaker_changed:function(t){return{clientIndex:t.clientIndex}},relocated:function(t){return{url:t.url}},relocate_start:function(t){return{url:t.url}},message:function(t){return{origin:t.srcOrigin,data:t.msg}},chat_message:function(t){return{clientIndex:t.clientIndex,message:t.msg}}};class ir{constructor(){this._notadummy=!0,this._initStatus={started:!1,finished:!1,successful:null,message:"Not initialized"},this._userSettings=null,this._defaultSettings=null,this._currentSession=null,this._allSessions=[],this._features={},this._globalEventsEmitter=new ye,this._sessionEventHandlers={},this._restoredSessionId=null,this._pinModal=new Ze(this),this._thirdPartyCookiesModal=new Ve(this),this._sessionStartModal=new Ke(this),me.forEach((t=>{this._sessionEventHandlers[t]=[]}))}get settings(){return new Proxy({...this._defaultSettings,...this._userSettings},{set:(t,e,n)=>(this._userSettings[e]=n,!0)})}_emit(t,e){ve.indexOf(t)>=0&&Et({category:"JS API",message:"global event",data:{eventName:t,eventData:JSON.stringify(e)},level:$.Info}),e&&rr[t]&&(e=rr[t](e)),this._globalEventsEmitter.emit(t,e)}_widgetKeyProvided(t){return!(!("widget_key"in this._userSettings)||!this._userSettings.widget_key)||(console.warn("Can't "+t+" without a widget key. To allow this, provide a widget key when calling init()."),!1)}_assertInitialized(t){return!!this._initStatus.successful||(console.error(`Not initialized properly: ${this._initStatus.message}.`),Ot(t+" called with uninitialized API: "+this._initStatus.message,"info"),!1)}_shouldSkip3rdCookie(){return Le&&this._userSettings.widget_key&&871459203===function(t){let e=0,n=0;if(t.length>0)for(;n<t.length;)e=(e<<5)-e+t.charCodeAt(n++)|0;return e}(this._userSettings.widget_key)}get currentSession(){if(this._initStatus.successful&&_e.mainWindow.__surfly)return this._currentSession}get isInsideSession(){return Boolean(_e.mainWindow.__surfly)}testConnection(t){console.warn("testConnection() is deprecated: WebSocket connection is not required anymore"),Ot("testConnection() called","info"),t.call(this,{success:!0,errorMsg:null})}listSessions(t={}){return this._assertInitialized("listSessions()")?t.active?this._allSessions.filter((t=>!t.ended)):this._allSessions:null}proxifyUrl(t,e,n,r,i=!1){var o;return new er({server_name:r,session_id:n,parent_session_id:null==(o=_e.mainWindow.__surfly_top_frame)?void 0:o.ss_bootstrap_config.PARENT_SESSION_ID,url_mangling:i,urltoken:e}).proxifyUrl(t,null,Qe.TYPE_TOP)}_escapeHTML(t){return t?t.toString().replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;"):t}}async function or(t,e={}){const n=(null==e?void 0:e.headers)||new Headers;n.append("Accept","application/json"),e.body&&n.append("Content-Type","application/json"),e.headers=n;const r=await fetch(t,e),i=await r.text(),o=i?JSON.parse(i):null;if(r.ok)return o;const s=new Error(null==o?void 0:o.detail);throw s.code=null==o?void 0:o.code,s}let sr=or;async function ar(){return sr.apply(this,arguments)}function cr(){return document.cookie.split(/;\s*/).map((function(t){const e=t.trim(),n=e.indexOf("=");let r,i="";return n>0?(r=e.slice(0,n),i=e.slice(n+1)):r=e,[r,i]}))}let ur=cr;function lr(){return ur.apply(this,arguments)}function dr(t,e){const n=[];return t.forEach((t=>{const r=t[0],i=t[1];e&&e.length>0?e.forEach((t=>{t.name===r&&n.push({name:r,value:i,path:t.path||"/",domain:"."===t.domain[0]?t.domain:null})})):n.push({name:r,value:i,path:"/"})})),n}let pr=dr;function hr(){return pr.apply(this,arguments)}function fr(){const t=[window.location.hostname],e=/^www\.(.*)/.exec(window.location.hostname);e&&t.push(e[1]);lr().forEach((function(e){t.forEach((function(t){document.cookie=e[0]+"=;expires=Thu, 01 Jan 1970 00:00:00 GMT;path=/;domain=."+t}))}))}function _r(){lr().forEach((function(t){document.cookie=t[0]+"=;expires=Thu, 01 Jan 1970 00:00:00 GMT;path=/"}))}const gr="surfly_restore_session",yr="surfly_leader_link_",mr="surfly_init_restore_urls_",vr="surfly_state_transferred_";function br(t){try{const e=sessionStorage.getItem(t);return JSON.parse(e)}catch(t){return null}}function wr(t,e){try{return sessionStorage.setItem(t,JSON.stringify(e))}catch(t){return null}}function Sr(t){try{return sessionStorage.removeItem(t)}catch(t){return null}}function Or(t){try{const e=localStorage.getItem(t);return JSON.parse(e)}catch(t){return null}}function xr(t,e){try{return localStorage.setItem(t,JSON.stringify(e))}catch(t){return null}}function Er(t){return new Blob([t],{type:"text/plain"}).size}function kr(){const t="surfly_storage_test",e="surfly";try{if(sessionStorage.setItem(t,e),localStorage.setItem(t,e),sessionStorage.getItem(t)===e&&localStorage.getItem(t)===e)return sessionStorage.removeItem(t),localStorage.removeItem(t),!0}catch(t){}return!1}function jr(t,e){t.clear(),Object.keys(e).forEach((function(n){t.setItem(n,e[n])}))}const Rr={localStorage:function(t){kr()?jr(window.mainWindow.localStorage,t.value):console.error("webstorage is not available")},sessionStorage:function(t){kr()?jr(window.mainWindow.sessionStorage,t.value):console.error("webstorage is not available")},scroll:function(t,e){let n=e.body;const r=t.value;n&&n&&(n.scrollLeft=r.left,n.scrollTop=r.top,n=null)},input:function t(e,n){const r=Lr(e.identifier,n);r?(r.value!==e.value&&(r.value=e.value),r.value=e.value,r.checked=e.checked,r.disabled=e.disabled,r.selected=e.selected):Date.now()-window.mainWindow.performance.timing.domContentLoadedEventEnd<15e3&&setTimeout((function(){t(e,n)}),250)},contentEditable:function t(e,n){const r=Lr(e.identifier,n);r?r.innerHTML=e.value:Date.now()-window.mainWindow.performance.timing.domContentLoadedEventEnd<15e3&&setTimeout((function(){t(e,n)}),250)},iframe:function t(e,n){const r=Lr(e.identifier,n);r?e.current_states.forEach((t=>{Ir(t,r.contentDocument||r.contentWindow.document)})):Date.now()-window.mainWindow.performance.timing.domContentLoadedEventEnd<15e3&&setTimeout((function(){t(e,n)}),250)}};function Ir(t,e){if(e||(e=window.mainWindow.document),Rr.hasOwnProperty(t.type))try{Rr[t.type](t,e)}catch(e){console.warn("Data chunk was not restored:",t,e)}else console.error("Cannot restore data",t)}function Tr(t){return{type:"iframe",identifier:Pr(t),current_states:Ar(t.contentDocument||t.contentWindow.document)}}function Ar(t){return[].concat(function(t){return Array.from(t.querySelectorAll("input, select, textarea")).filter((t=>{const{name:e}=t;return!Cr.includes(e)||(console.info("The element excluded from state transfer: ",t),!1)})).reduce(((t,e)=>{const n=Pr(e);return n?t.push({type:"input",value:e.value,checked:e.checked,disabled:e.disabled,selected:e.selected,identifier:n}):console.log("Couldn't unambiguously transfer input: ",e),t}),[])}(t),function(t){const e=[],n=t.querySelectorAll("[contentEditable]");for(let t=n.length;t--;){const r=n[t];if("true"!==r.contentEditable){console.log("ContentEditable not enabled, skip",r);continue}const i=Pr(r);i?e.push({type:"contentEditable",value:r.innerHTML,identifier:i}):console.log("Couldn't unambiguously transfer input:",r)}return e}(t),function(t){const e=[],n=window.mainWindow.document.body;if(n){const t=n.scrollLeft,r=n.scrollTop;e.push({type:"scroll",value:{top:r,left:t}})}return e}())}function Lr(t,e){return e.evaluate(t,e,null,XPathResult.FIRST_ORDERED_NODE_TYPE,null).singleNodeValue}function Pr(t){return t&&t.id?'//*[@id="'+t.id+'"]':function(t){const e=[];for(;t&&1===t.nodeType;t=t.parentNode){let n=0;for(let e=t.previousSibling;e;e=e.previousSibling)e.nodeType!==Node.DOCUMENT_TYPE_NODE&&e.nodeName===t.nodeName&&++n;const r=t.nodeName.toLowerCase(),i=n?"["+(n+1)+"]":"";e.splice(0,0,r+i)}return e.length?"/"+e.join("/"):null}(t)}const Cr=["_csrf"];function Nr(t){const e=[];try{const n=Fr(window.mainWindow.localStorage);Object.keys(n).length>0&&e.push({type:"localStorage",value:n}),t&&window.mainWindow.localStorage.clear()}catch(t){}try{const n=Fr(window.mainWindow.sessionStorage);Object.keys(n).length>0&&e.push({type:"sessionStorage",value:n}),t&&window.mainWindow.sessionStorage.clear()}catch(t){}return e}let Ur=Nr;function Wr(){return Ur.apply(this,arguments)}function Fr(t){try{const e=Object.keys(t),n={};return e.forEach((function(e){0!==e.indexOf("surfly_")&&(n[e]=t[e])})),n}catch(t){return null}}let Mr=!1,Dr=!1,Br=null;function Yr(t){const e=_e.mainWindow.location;t=t.replace(/^(.*?)(#surflystart)?$/,"$1");const n=Object(nr.c)(e.href),r=Object(nr.c)(t),i=n==r&&r!==t;if(Br){const e=new URL(Br);e.searchParams.append("redirect",encodeURIComponent(t)),t=e.href}e.href=t,i&&e.reload()}const qr={transfer_state:function(t){_e.mainWindow.__surfly&&t.params.srcOrigin===_e.mainWindow.location.origin&&t.params.state.forEach((t=>Ir(t)))},restore_cookies:function(t){if(_e.mainWindow.__surfly)return;const e=t.params.srcOrigin;console.log("Restore cookies received",t,e,_e.mainWindow.location.origin);const n=Object(nr.g)(_e.mainWindow.location.host);if(e===_e.mainWindow.location.origin||e.substr(-n.length-1)==="."+n)this.settings.cookie_transfer_enabled&&(this._restoreCookies(t.params.cookies),t.params.storage.forEach((t=>Ir(t)))),Mr=!0,this.settings.cookie_transfer_proxying&&!Dr||this._sendApiMessage("widget_event",{event_type:"cookie_transfer_done"});else{const n=function(t,e){if(!t.settings.cookie_transfer_enabled)return null;const n=t.settings.cookie_transfer_urls;for(const t of n)if(t.startsWith(e))return t}(this,e);n?function(t,e,n){if(!n.storage)return;const r=n.storage.filter((({type:t})=>"sessionStorage"===t)),i=JSON.stringify(r);Br=`${e}backtransfer_apply/?data=${btoa(i)}`}(0,n,t.params):console.log("Cookie restoring failed: calling origin is different:",e)}},end_session:function(t){_e.mainWindow.__surfly||this.end(t.params.redirect)}},$r={download:function(t){this._emit("file_download",t.params)},tabframe_ready:function(){this._started=!0,this._startTimeout&&(clearTimeout(this._startTimeout),this._startTimeout=null),this._openTs&&xt((t=>{t.setTags({cf_load_time:(new Date-this._openTs)/1e3})})),this.settings.verbose_console&&console.log(`Session ${this._sessionId} started`),this._isLeader&&this._emitter.listeners("session_pre_end").length>0&&this._sendApiMessage("widget_event",{event_type:"pre_end_subscribed"}),this._emit("session_started",{})},error:function(t){this._emit("error",t.params)},host_rights_requested:function(t){this._emit("host_rights_requested",t.params)},control:function(t){this._emit("control",t.params)},host_changed:function(t){this._emit("host_changed",t.params)},tab_control_requested:function(t){this._emit("tab_control_requested",t.params)},tab_control:function(t){this._emit("tab_control",t.params)},about_to_end:function(t){const{cookie_transfer_enabled:e,cookie_transfer_proxying:n,cookie_transfer_scopes:r,enable_cookie_backtransfer:i}=this.settings;if(e)if(_e.mainWindow.__surfly){let t=[];const e=Wr(!1);n||(this._sendApiMessage("widget_event",{event_type:"wait_for_cookie_transfer"}),t=hr(lr(),r)),this._sendApiMessage("widget_message",{srcOrigin:_e.mainWindow.location.origin,targetOrigin:"*",target:"widget",msg:"restore_cookies",cookies:t,storage:e})}else n&&i&&(this._sendApiMessage("widget_event",{event_type:"wait_for_cookie_transfer"}),this._cookieTransferFullRev().then((()=>{Dr=!0,Mr?this._sendApiMessage("widget_event",{event_type:"cookie_transfer_done"}):setTimeout((()=>{Mr||console.error("Webstorage contents was not received, probably inner widget is not available"),this._sendApiMessage("widget_event",{event_type:"cookie_transfer_done"})}),1e3)})))},session_ended:function(t){if(Et({category:"JS API",message:"session_ended postMsg",data:{msg:JSON.stringify(t)},level:$.Info}),this._isLeader?Ot("Leader ended","info"):Ot("Follower ended","info"),this._ended=!0,_e.mainWindow.__surfly)return this.settings.cookie_transfer_scopes.forEach((t=>{const e=";path="+(t.path||"/");let n="";t.domain&&(n=";domain="+t.domain),document.cookie=t.name+"=;expires=Thu, 01 Jan 1970 00:00:00 GMT"+e+n})),fr(),_r(),void Wr(!0);Sr(gr);let e=null;t.params.redirect&&Object(nr.b)(t.params.redirect)&&(e=t.params.redirect);let n=null;t.params.final_location&&Object(nr.b)(t.params.final_location)&&(n=t.params.final_location),this._emit("session_ended",t.params),this._halt(),this.settings.end_of_session_popup_url&&this._answered?function(){Re&&_e.mainWindow.document.body.classList.remove("surfly-hide-ios"),Ye.apply(this,arguments)}(this.settings.end_of_session_popup_url):this._isLeader?e&&"leader_ended"===t.params.reason?Yr(e):this.settings.leader_redirect_url?Yr(this.settings.leader_redirect_url):this.settings.end_redirect_enabled?n?Yr(n):this.settings.cookie_transfer_enabled&&_e.mainWindow.location.reload():(this._api._sessionStartModal&&this._api._sessionStartModal.hide(),this._api._pinModal&&this._api._pinModal.hide(),this._api._thirdPartyCookiesModal&&this._api._thirdPartyCookiesModal.hide()):e&&"follower_ended"===t.params.reason?Yr(e):this.settings.follower_redirect_url?Yr(this.settings.follower_redirect_url):this.settings.end_redirect_enabled&&t.params.final_location&&Object(nr.b)(t.params.final_location)&&Yr(t.params.final_location)},session_ended_soft:function(t){Et({category:"JS API",message:"session_ended_soft postMsg",data:{msg:JSON.stringify(t)},level:$.Info}),this._emit("session_ended_soft",{}),this._ended_soft=!0,Sr(gr)},viewer_joined:function(t){this._emit("viewer_joined",t.params)},participant_joined:function(t){_e.mainWindow.__surfly||this._showWindow(),0!==t.params.origin&&(this._answered=!0),this._emit("participant_joined",t.params)},viewer_left:function(t){this._emit("viewer_left",t.params)},participant_left:function(t){this._emit("participant_left",t.params)},page_ready:function(){this._isLeader||this._loaded||(this._loaded=!0,this._emit("session_loaded"),this._openTs&&xt((t=>{t.setTags({load_time:(new Date-this._openTs)/1e3})})),Ot("Follower loaded","info"))},session_pre_end:function(t){this._emit("session_pre_end",t.params)},session_paused:function(){this._paused=!0,this._emit("session_paused")},tab_paused:function(t){this._emit("tab_paused",t.params)},session_resumed:function(){this._paused=!1,this._emit("session_resumed")},tab_resumed:function(t){this._emit("tab_resumed",t.params)},yt_notification:function(){this._emit("yt_notification")},tab_activated:function(t){this._emit("tab_activated",t.params)},annotation_start:function(t){this._emit("annotation_start",t.params)},annotation_end:function(t){this._emit("annotation_end",t.params)},active_speaker_changed:function(t){this._emit("active_speaker_changed",t.params)},chat_message:function(t){this._emit("chat_message",t.params)}},Hr={relocated:function(t){this._emit("relocated",t.params),this._loaded||(this._loaded=!0,this._emit("session_loaded"),this._openTs&&xt((t=>{t.setTags({load_time:(new Date-this._openTs)/1e3})})),Ot("Leader loaded","info"))},relocate_start:function(t){this._emit("relocate_start",t.params)},user_activity:function(){this._emit("user_activity")},widget_ready:function(t){_e.mainWindow.__surfly||(this._otherSideReady=!0,this._transferState(),this._messageBuffer.forEach((t=>{this._sendApiMessage("widget_message",t)})))},leave_session_redirect:function(t){this._cancelAutoRestore&&this._cancelAutoRestore(),_e.mainWindow.location.assign(t.params.url)}},Gr={widget_message:function(t){"*"!==t.params.targetOrigin&&t.params.targetOrigin!==_e.mainWindow.location.origin||("user"===t.params.target?this._emit("message",t.params):"widget"===t.params.target&&(qr.hasOwnProperty(t.params.msg)?qr[t.params.msg].call(this,t):console.log("Got unknown widget message",t)))},cobro_event:function(t){$r.hasOwnProperty(t.params.event_type)&&$r[t.params.event_type].call(this,t)},widget_event:function(t){Hr.hasOwnProperty(t.params.event_type)&&Hr[t.params.event_type].call(this,t)}};function zr(t,e,n){if(!n){const t=br("surfly_3rdcookies");if(null!==t)return Promise.resolve(t)}return new Promise(((n,r)=>{let i=t+"/3rdpartycookietest/";e&&(i+="?show_loader=1");const o=_e.document.createElement("iframe");o.src=i,o.style.display="none";const s=function(e){e.origin===t&&e.data.hasOwnProperty("cookies_enabled")&&(wr("surfly_3rdcookies",e.data.cookies_enabled),e.data.cookies_enabled||console.error("3rd-party cookies disabled"),window.removeEventListener("message",s),o.parentNode.removeChild(o),n(e.data.cookies_enabled))};window.addEventListener("message",s),setTimeout((function(){window.document.body.appendChild(o)}),0)}))}function Jr(t){const e=Or("surfly_MO");let n;null!==e?n=e:void 0===window.WebKitMutationObserver&&"undefined"==typeof MutationObserver?(console.error("MutationObserver is not available"),n=!1,xr("surfly_MO",n)):(n=!0,xr("surfly_MO",n)),t(n)}function Xr(t){const e=Or("surfly_WS");let n;null!==e?n=e:window.WebSocket||window.MozWebSocket?(n=!0,xr("surfly_WS",n)):(n=!1,xr("surfly_WS",n)),t(n)}function Kr(t,e,n){return new Promise(((r,i)=>{const o=i=>{i.source===t&&(t.opener.removeEventListener("message",o),zr(e,n,!0).then((t=>{r(t)})))};t.opener.addEventListener("message",o);let s=e+"/3rdpartycookietest/";n&&(s+="?show_loader=1"),t.location=s}))}let Zr=Kr;function Vr(){return Zr.apply(this,arguments)}const Qr=2e4;function ti(){this.ended||this.ended_soft||(this.settings.verbose_console&&console.log(`Saving session ${this._sessionId} for restoring later`),wr(gr,this._sessionId),wr(yr+this._sessionId,this.leaderLink))}class ei{constructor(t,e,n,r){if(this._answered=!1,this._api=t,this._start_initiated=!1,this._create_initiated=!1,this._cobroServerName=null,this._cookieRestoreUrls=[],this._cookies_forwarded=!1,this.queued=!1,this._restore_initiated=!1,this._started=!1,this._loaded=!1,this._created=!1,this._paused=!1,this._ended=!1,this._ended_soft=!1,this._isLeader=null,this._sessionSettings=e,this.leaderLink=null,this.followerLink=null,this.pin=null,this.node=null,this.window=null,this._pipelineFailed=!1,this._pipeline=Promise.resolve("init"),this._state_transferred=!1,this._sessionId=r||null,this._formattedId=null,this._otherSideReady=!1,this._messageBuffer=[],this._startTimeout=null,this._preferred_server_id="",this._openTs=null,this._tryCookieTrick=Re||je||Ie,this._pageHideHandler=ti.bind(this),this._screenshotCaptureStream=null,this._emitter=new ye,r||n){this._restore_initiated=!0,this._created=!0,this._create_initiated=!0;const t=r||this._extractToken(n);"m"===t[0]?this.leaderLink=n||_e.mainWindow.SURFLY_COBRO_ORIGIN+"/"+t:this.followerLink=n,this._schedule(this._restoreSession.bind(this,t))}_e.mainWindow.addEventListener("message",(t=>{var e;const n=_e.mainWindow;if(!(t.origin===n.SURFLY_COBRO_ORIGIN))return;const r=n.__surfly,i=t.source===(null==(e=n.__surfly_top_frame)?void 0:e.ss_ctx.native.parentGet.call(n.__surfly_top_frame));(!r&&t.source&&t.source===this.window||r&&i)&&Gr.hasOwnProperty(t.data.type)&&Gr[t.data.type].call(this,t.data)}))}_extractToken(t){return Object(nr.f)(t).pathname.split("/")[1]}get settings(){return new Proxy({...this._api.settings,...this._sessionSettings},{set:(t,e,n)=>(this._sessionSettings[e]=n,!0)})}get started(){return this._started}get ended(){return this._ended}get ended_soft(){return this._ended_soft}get paused(){return this._paused}get created(){return this._created}get stateTransferEndpoint(){return`${_e.mainWindow.SURFLY_COBRO_ORIGIN}/v2/sessions/?api_key=${this.settings.widget_key}`}get sessionContEndpoint(){return`/surfly_cookie_transfer/create/?api_key=${this.settings.widget_key}`}on(t,e){return this._emitter.addListener(t,e.bind(this,this)),this._isLeader&&this.started&&"session_pre_end"===t&&this._sendApiMessage("widget_event",{event_type:"pre_end_subscribed"}),this}_emit(t,e){ve.indexOf(t)>=0&&Et({category:"JS API",message:"session event",data:{eventName:t,eventData:JSON.stringify(e)},level:$.Info}),"error"===t&&console.error("Surfly JS API",e),e&&rr[t]&&(e=rr[t](e)),this._emitter.emit(t,e)}_schedule(t){this._pipelineFailed?console.error("Surfly cannot proceed due to an error"):this._pipeline=this._pipeline.then(t).catch((t=>{throw this._pipelineFailed||(this._pipelineFailed=!0,St(new Error(t)),console.error(t)),t}))}_sessionContinuationEnabled(){return!(!this.settings.cookie_transfer_enabled||!this.settings.cookie_transfer_proxying)&&(Et({category:"JS API",message:"SC started",level:$.Info}),!(!this.settings.cookie_transfer_urls||0===this.settings.cookie_transfer_urls.length||!this.settings.cookie_transfer_scopes||0===this.settings.cookie_transfer_scopes.length)||(console.error("You must specify cookie_transfer_urls and cookie_transfer_scopes in order to use full session continuation"),!1))}async _getPreferredServerId(){return ar(_e.mainWindow.SURFLY_COBRO_ORIGIN+"/v2/servers/_closest/")}async _cookieTransferFullFwd(){const t=this.settings.cookie_transfer_urls.filter((t=>{const e=Object(nr.f)(t);return(Object(nr.a)(e.hostname,_e.mainWindow.location.hostname).match(/\./g)||[]).length>=2}));if(0===t.length)throw new Error("No suitable continuation points found");const e=t[0];await ar(e+"init/",{credentials:"include"});const n=t.map((t=>ar(t+"store/",{method:"POST",body:JSON.stringify(this.settings.cookie_transfer_scopes),credentials:"include"})));await Promise.all(n);try{this._preferred_server_id=await this._getPreferredServerId()}catch(t){console.warn("Failed to get preferred server id")}Et({category:"JS API",message:"SC finished",level:$.Info})}_cookieTransferFullRev(){Et({category:"JS API",message:"Reverse SC started",level:$.Info});const t=[];return this._cookieRestoreUrls.forEach((e=>{const n=new Promise(((t,n)=>{const r=_e.mainWindow.document.createElement("iframe");r.style.cssText="display:none";const i=function(e){e.source===r.contentWindow&&e.data.ready&&(_e.mainWindow.removeEventListener("message",i),t())};_e.mainWindow.addEventListener("message",i),_e.mainWindow.document.body.appendChild(r),r.src=e}));t.push(n)})),Promise.all(t)}_transferState(){if(!_e.mainWindow.__surfly&&!this._state_transferred){this._state_transferred=!0,wr(vr+this._sessionId,!0);const t=function(){const t=Ar(window.mainWindow.document),e=function(t){const e=[],n=window.mainWindow.document.querySelectorAll("iframe");for(const t in n)if(n[t])try{const r=n[t];(r.contentDocument||r.contentWindow.document).body.innerHTML,e.push(r)}catch(t){continue}return e}();for(const n in e)if(e[n]){const r=Tr(e[n]);t.push(r)}return t}(),{origin:e}=_e.mainWindow.location;this._sendApiMessage("widget_message",{target:"widget",srcOrigin:e,targetOrigin:e,msg:"transfer_state",state:t})}}_restoreCookies(t){this.settings.cookie_transfer_enabled&&!this.settings.cookie_transfer_proxying?(!function(t,e=!0,n=!0){t&&t.length>0&&(n&&fr(),e&&_r(),t.forEach((function(t){const e=";path="+(t.path||"/");let n="";t.expires&&(n=";expires="+t.expires);let r="";"domain"in t?null!==t.domain&&(r=";domain="+t.domain):r=";domain=."+Object(nr.g)(window.location.hostname),document.cookie=t.name+"="+t.value+n+e+r})))}(t),this.settings.verbose_console&&console.log("Cookies set")):this.settings.verbose_console&&console.log("Soft session continuation is disabled")}_newSessionData(t={}){const e=Object.assign({url:_e.mainWindow.location.href,...this._api._userSettings,...this._sessionSettings});e.cookies=[],e.webstorage=[];const{cookie_transfer_enabled:n,cookie_transfer_proxying:r,cookie_transfer_scopes:i}=this.settings;n&&(r||(e.cookies=hr(lr(),i),fr()),e.webstorage=Wr());const o=Er(JSON.stringify(e.webstorage)),s=Er(JSON.stringify(e.cookies));return xt((t=>{t.setTags({storage_size:o,cookies_size:s})})),o>5e6&&(e.webstorage=[],console.error("Webstorage content is too large"),Ot("Webstorage too large","warning")),s>5e6&&(e.cookies=[],console.error("Cookies are too large, consider using cookie_transfer_scopes"),Ot("Cookies too large","warning")),e.meta=JSON.stringify(t),e.preferred_server_id=this._preferred_server_id,e}_logCreateError(t){this._emit("error",{reason:"create_failed",details:t})}async _makeCreateRequest(t,e){return ar(t,{method:"POST",body:JSON.stringify(e)})}async _createSession(t,e,n){let r;if(t&&!e)try{return r=await this._makeCreateRequest(this.sessionContEndpoint,n),this._cookies_forwarded=!0,r}catch(t){const e=`Session continuation failed: ${t.message}. Trying to start a session without transferring cookies.`;this._logCreateError(e)}try{r=await this._makeCreateRequest(this.stateTransferEndpoint,n)}catch(t){return this._logCreateError(t.message),Promise.reject(t.message)}return r}async _createCall(t){const e=this._sessionContinuationEnabled();this._state_transferred=!1;let n=!1;if(e)try{await this._cookieTransferFullFwd()}catch(t){console.error("Cookie transfer error:",t),n=!0}const r=this._newSessionData(t),i=await this._createSession(e,n,r);this.leaderLink=i.leader_link,this.followerLink=i.follower_link,this.pin=i.pin,this._cobroServerName=i.cobro_server_name,this._sessionId=i.id,this._formattedId=i.formatted_id,this.queued=!0,this._state_transferred=br(vr+this._sessionId)||!1,this._created=!0,this._cookieRestoreUrls=[...new Set(i.init_restore_urls)],wr(mr+this._sessionId,this._cookieRestoreUrls);window.document.querySelector("#surfly-splash")&&(window.document.getElementById("surfly-qpin").textContent=" - "+Ee("Your Queue PIN is")+" "+this.pin),this._emit("session_created",{}),this._emit("session_queued",{}),this._emitter.listeners("session_queued").length>0&&Ot("Expects session_queued event","info"),xt((t=>{t.setTag("sessionId",this._sessionId),t.setExtra("settings",this.settings)}))}_restoreSession(t){let e=_e.mainWindow.SURFLY_COBRO_ORIGIN+`/v2/sessions/${t}`;return"widget_key"in this.settings&&(e+=`/?api_key=${this.settings.widget_key}`),ar(e).then((e=>{this.settings.verbose_console&&console.log(`Session restored ${t}`),this._ended=Boolean(e.duration),this.followerLink=e.follower_link,this._cobroServerName=e.cobro_server_name,this._sessionId=e.session_id,this._formattedId=e.formatted_id,this.queued=e.queued,this._cookieRestoreUrls=br(mr+this._sessionId)||[],this.leaderLink=this.leaderLink||br(yr+this._sessionId),this._state_transferred=br(vr+this._sessionId)||!1,this._sessionSettings=Object.assign(e.options,{widget_key:this.settings.widget_key}),this.pin=e.pin,_e.mainWindow.__surfly&&(this._started=!0,this._otherSideReady=!0,this._emitter.listeners("session_pre_end").length>0&&this._sendApiMessage("widget_event",{event_type:"pre_end_subscribed"}),this._sendApiMessage("widget_event",{event_type:"widget_ready"})),this._emit("session_created",{})}))}_openIframe(t){if(this._nodeSelector)this.node=_e.mainWindow.document.querySelector(this._nodeSelector),this.node&&this.node.contentWindow||console.error("Could not find an iframe by CSS selector:",this._nodeSelector),this.window=this.node.contentWindow;else{this.node&&this.node.parentNode.removeChild(this.node);const t=_e.mainWindow.document.createElement("iframe");t.id="surfly-iframe",t.name="surfly-iframe",t.classList.add("surfly-ignore"),t.style.cssText="display:block; background-color:rgb(255, 255, 255);\n                height:100%; width:100%;\n                left:99999999px;\n                position:fixed;\n                top:0px;\n                z-index:2147483547;\n                visibility: initial;\n                border:0",_e.mainWindow.document.body.appendChild(t),this.node=t,this.window=t.contentWindow}this.node.allow=`microphone ${_e.mainWindow.SURFLY_COBRO_ORIGIN}; camera ${_e.mainWindow.SURFLY_COBRO_ORIGIN}; display-capture ${_e.mainWindow.SURFLY_COBRO_ORIGIN}; autoplay;`,t()}_openWindow(t){this.settings.session_start_confirmation?this._handleThirdPartyCookiesTrickResult(this._api._features["3rdcookies"],t):this._api._features["3rdcookies"]?this._openIframe(t):(this.node=null,this.window&&this.window.close(),ze(this._api._sessionStartModal).then((t=>(this.window=t,Vr(t,_e.mainWindow.SURFLY_COBRO_ORIGIN,!this.settings.hide_session_ui&&this.settings.start_with_loading_screen)))).then((e=>{this._api._features["3rdcookies"]=e,this._handleThirdPartyCookiesTrickResult(e,t)})))}_handleThirdPartyCookiesTrickResult(t,e){t?(Ot("3rd-party cookies trick succeeded","info"),this.window&&(this.window.close(),this.window=null),this._openIframe(e)):this.settings.embedded_sessions_only||this._nodeSelector?(this.window&&(this.window.close(),this.window=null),console.error("3rd-party cookies are disabled, cannot start a session in an iframe.")):(console.log("3rd-party cookies are disabled, opening session in a separate tab"),Ot("3rd-party cookies trick failed","info"),this._api._thirdPartyCookiesModal.show().catch((()=>this.end())),e())}_showWindow(){this.node&&(null===Me&&(Me=_e.mainWindow.document.documentElement.style.overflow),_e.mainWindow.document.documentElement.style.overflow="hidden",this._nodeSelector||(this.node.style.left="0px",Re&&_e.mainWindow.document.body.classList.add("surfly-hide-ios")))}_openLeader(t){if(!this.leaderLink)throw new Error("Cannot open a leader window without a leader link");let e="";const n=Object(nr.f)(this.leaderLink);(t=t||Object(nr.e)(n.search))&&(e=Object(nr.d)(t));let r=n.protocol+"//"+n.host+n.pathname+e;this.settings.cookie_transfer_enabled&&this.settings.cookie_transfer_proxying&&(this._cookies_forwarded?r="/surfly_cookie_transfer/start/"+this._extractToken(this.leaderLink)+e:(console.error("There was a problem with cookie transfer, session continuation skipped"),Ot("Cookie transfer failure","warning"))),this.window.location=r,this.settings.hide_until_agent_joins||this._showWindow(),this.window.focus(),this._isLeader=!0,Et({category:"JS API",message:"Leader started",data:t,level:$.Info}),this._setStartTimeout()}_openFollower(t){if(!this.followerLink)throw new Error("Cannot open a follower window without a follower link");let e="";const n=Object(nr.f)(this.followerLink);(t=t||Object(nr.e)(n.search))&&(e=Object(nr.d)(t)),this._showWindow(),this.window.location=n.protocol+"//"+n.host+n.pathname+e,this.window.focus(),this._isLeader=!1,Ot("Follower started","info"),this._setStartTimeout()}_setStartTimeout(){this._openTs=new Date,this._startTimeout&&_e.clearTimeout(this._startTimeout),this._startTimeout=_e.setTimeout((()=>{Ot("Session did not start within 20000 ms","warning"),console.warn("Session did not start within 20000 ms"),this._startTimeout=null}),Qr)}_attachListeners(){_e.mainWindow.__surfly||this._nodeSelector||this.settings.session_autorestore_enabled&&this._isLeader&&_e.mainWindow.addEventListener("pagehide",this._pageHideHandler)}_cancelAutoRestore(){Sr(gr),this.settings.session_autorestore_enabled&&this._isLeader&&_e.mainWindow.removeEventListener("pagehide",this._pageHideHandler)}_checkUserDataType(t){if(t){if("function"==typeof t)return!1;const e=JSON.parse(JSON.stringify(t));if(Array.isArray(e)||e.constructor!==Object)return console.warn("Wrong user data format. Object is expected"),Ot("Wrong user data format","warning"),!1}return!0}_canStart(t,e){return _e.mainWindow.__surfly?(this._emit("error",{reason:"start_failed",details:"Not available under Surfly session"}),!1):this._start_initiated||this.started?(this._emit("error",{reason:"start_failed",details:"Session already started, SurflySession.startLeader() does nothing"}),!1):this._api._restoredSessionId&&this._api._restoredSessionId!==this._sessionId&&!e?(this._emit("error",{reason:"start_failed",details:"Refused to start a new session because a previously active session has been restored. Consider disabling `session_autorestore_enabled` option, or start the session with a custom CSS selector"}),!1):(this._checkUserDataType(t),!0)}_block_until_agent_joins(){return new Promise(((t,e)=>{this.queued&&(this.on("participant_joined",(e=>{e._answered&&t()})),this._api._pinModal.pin=this.pin,this._api._pinModal.show().catch((t=>{this.window&&this.end(),this.on("session_loaded",(()=>this.end())),e(t)})))}))}_ask_start(t,e,n,r){const i=this.settings.session_start_confirmation,o=!n&&this.settings.block_until_agent_joins&&!this.settings.hide_until_agent_joins;if(!this._canStart(e,t))return Promise.reject(new Error("Can't start session!"));xt((t=>{t.setExtra("user_data",e)}));let s=Promise.resolve();if(i){if(this._api._features["3rdcookies"])s=s.then((()=>this._api._sessionStartModal.show()));else{if(this.settings.embedded_sessions_only&&!this._tryCookieTrick)return this._handleThirdPartyCookiesTrickResult(!1);s=s.then((()=>ze(this._api._sessionStartModal).then((t=>(this.window=t,Vr(t,_e.mainWindow.SURFLY_COBRO_ORIGIN,!this.settings.hide_session_ui&&this.settings.start_with_loading_screen)))).then((t=>{this._api._features["3rdcookies"]=t}))))}s=o?s.then((()=>this._api._sessionStartModal.release())):s.then((()=>this._api._sessionStartModal.hide())),s=s.catch((t=>{throw this._api._sessionStartModal.hide(),r&&r(t),console.debug("After calling permission denied cb, error object is",t),t}))}else if(!this._api._features["3rdcookies"]&&this.settings.embedded_sessions_only&&!this._tryCookieTrick)return this._handleThirdPartyCookiesTrickResult(!1);return s=s.then((()=>this._start(t,e,n))),o&&(s=s.then((()=>this._block_until_agent_joins())).then((()=>this._api._pinModal.hide()))),s=s.catch((t=>{if(!(t instanceof Je))throw t;console.log(t.message)})),s}_start(t,e,n){if(!this._canStart(e,t))return Promise.reject(new Error("Can't start session!"));let r=Promise.resolve();if(this._nodeSelector=t||null,this._create_initiated||!n&&this.created||(this._create_initiated=!0,r=n?r.then((()=>this._createCall())):r.then((()=>this._createCall(e)))),this._start_initiated=!0,!n&&_e.navigator.standalone)_e.mainWindow.location.href=this.leaderLink;else{const t=n?()=>this._openFollower(e):()=>this._openLeader(e);r=r.then((()=>new Promise((t=>this._openWindow(t))))).then(t).then((()=>this._attachListeners()))}return r}_halt(){_e.mainWindow.__surfly||(this.window&&(this.window.close(),this.window=null),this.node&&(this.node.parentNode.removeChild(this.node),this.node=null),null!==Me&&(_e.mainWindow.document.documentElement.style.overflow=Me,Me=null),function(){let t=document.querySelector("#surfly-blocker"),e=document.querySelector("#surfly-splash");t&&(t.style.opacity="0"),e&&(e.style.top="-100%"),setTimeout((()=>{t&&(t.parentNode.removeChild(t),t=null),e&&(e.parentNode.removeChild(e),e=null)}),333)}())}end(t){this._schedule((()=>{_e.mainWindow.__surfly?this._sendApiMessage("widget_message",{srcOrigin:_e.mainWindow.location.origin,targetOrigin:"*",target:"widget",msg:"end_session",redirect:t}):this._sendApiMessage("api_request",{cmd:"end",redirect:t})}))}_sendApiMessage(t,e){const n={sessionId:this._sessionId,type:t,params:e};if(_e.mainWindow.__surfly){_e.mainWindow.__surfly_top_frame.ss_ctx.native.parentGet.call(_e.mainWindow.__surfly_top_frame).postMessage(n,_e.mainWindow.SURFLY_COBRO_ORIGIN)}else this.window.postMessage(n,_e.mainWindow.SURFLY_COBRO_ORIGIN)}sendMessage(t,e){this._otherSideReady?this._sendApiMessage("widget_message",{target:"user",msg:t,srcOrigin:_e.mainWindow.location.origin,targetOrigin:e||_e.mainWindow.location.origin}):this._messageBuffer.push({target:"user",msg:t,targetOrigin:e||_e.mainWindow.location.origin})}log(t){const e="Invalid audit log format, please provide a plain JSON object",n=["var0","var1","var2","var3","var4","var5","var6","var7","var8","var9"];let r={};try{if(r=JSON.parse(JSON.stringify(t)),"object"!=typeof t)throw new Error("log data is not an object");n.forEach((t=>{if(r.hasOwnProperty(t)&&"string"!=typeof r[t])throw new Error(`variable ${t} is not a string`)}))}catch(t){throw console.error(e,t),Ot("Invalid audit log used","warning"),new Error(e)}_e.mainWindow.__surfly?_e.mainWindow.__surfly_client_log(r):this._api._widgetKeyProvided("create session logs")&&(this.created?this.window.postMessage({type:"api_request",params:{cmd:"log",msg:r}},_e.mainWindow.SURFLY_COBRO_ORIGIN):console.warn("Cannot create log records on a session that has not been created yet.\nPlease call .create() or one of the .start*() methods first."))}giveControl(t){this.makeHost(t)}openTab(t){this.started?this.window.postMessage({type:"api_request",params:{cmd:"open_tab",url:t}},_e.mainWindow.SURFLY_COBRO_ORIGIN):console.error("Session is not started yet")}makeHost(t){this.started?this.window.postMessage({type:"api_request",params:{cmd:"make_host",to:t}},_e.mainWindow.SURFLY_COBRO_ORIGIN):console.error("Session is not started yet")}requestControl(){this.requestToHost()}requestToHost(){this.started?this.window.postMessage({type:"api_request",params:{cmd:"request_to_host"}},_e.mainWindow.SURFLY_COBRO_ORIGIN):console.error("Session is not started yet")}requestTabControl(){this.started?this.window.postMessage({type:"api_request",params:{cmd:"request_tab_control"}},_e.mainWindow.SURFLY_COBRO_ORIGIN):console.error("Session is not started yet")}transferTabControl(t){this.started?this.window.postMessage({type:"api_request",params:{cmd:"transfer_tab_control",to:t}},_e.mainWindow.SURFLY_COBRO_ORIGIN):console.error("Session is not started yet")}async getParticipants(){if(!this.started)return console.error("Session is not started yet");return await new Promise((t=>{_e.mainWindow.addEventListener("message",(function e({data:n}){"widget_message"===n.type&&"get_session_participants"===n.params.msg&&(_e.mainWindow.removeEventListener("message",e),t(n.params.participants))})),this.window.postMessage({type:"api_request",params:{cmd:"get_session_participants"}},_e.mainWindow.SURFLY_COBRO_ORIGIN)}))}revokeTabControl(){this.started?this.window.postMessage({type:"api_request",params:{cmd:"revoke_tab_control"}},_e.mainWindow.SURFLY_COBRO_ORIGIN):console.error("Session is not started yet")}returnTabControl(){this.started?this.window.postMessage({type:"api_request",params:{cmd:"return_tab_control"}},_e.mainWindow.SURFLY_COBRO_ORIGIN):console.error("Session is not started yet")}relocate(t,e){/^[a-zA-Z0-9+.\-]+:/.test(t)?this.started?this.window.postMessage({type:"api_request",params:{cmd:"relocate",url:t,newTab:Boolean(e)}},_e.mainWindow.SURFLY_COBRO_ORIGIN):console.error("Session is not started yet"):console.error("Relocate URL must contain protocol, e.g. https://"+t)}pause(){this.pauseTabs()}pauseTabs(){this.started?this.window.postMessage({type:"api_request",params:{cmd:"pause_tabs"}},_e.mainWindow.SURFLY_COBRO_ORIGIN):console.error("Session is not started yet")}resume(){this.resumeTabs()}resumeTabs(){this.started?this.window.postMessage({type:"api_request",params:{cmd:"resume_tabs"}},_e.mainWindow.SURFLY_COBRO_ORIGIN):console.error("Session is not started yet")}setDrawingSettings(){console.warn("setDrawingSettings is deprecated"),Ot(`[deprecated][session_id=${this._sessionId}] setDrawingSettings is used`,"warning")}toggleVideochatFullscreen(){this.started?this.window.postMessage({type:"api_request",params:{cmd:"toggle_videochat_fullscreen"}},_e.mainWindow.SURFLY_COBRO_ORIGIN):console.error("Session is not started yet")}toggleVideochatMode(t){this.started?this.window.postMessage({type:"api_request",params:{cmd:"toggle_videochat_mode",mode:t}},_e.mainWindow.SURFLY_COBRO_ORIGIN):console.error("Session is not started yet")}toggleVideochatMicrophone(){this.started?this.window.postMessage({type:"api_request",params:{cmd:"toggle_videochat_microphone"}},_e.mainWindow.SURFLY_COBRO_ORIGIN):console.error("Session is not started yet")}startScreensharing(){this.started?this.window.postMessage({type:"api_request",params:{cmd:"start_screensharing"}},_e.mainWindow.SURFLY_COBRO_ORIGIN):console.error("Session is not started yet")}toggleDrawing(){this.started?this.window.postMessage({type:"api_request",params:{cmd:"toggle_drawing"}},_e.mainWindow.SURFLY_COBRO_ORIGIN):console.error("Session is not started yet")}async getTabs(){if(!this.started)return void console.error("Session is not started yet");return await new Promise((t=>{_e.mainWindow.addEventListener("message",(function e({data:n}){"widget_message"===n.type&&"get_session_tabs"===n.params.msg&&(_e.mainWindow.removeEventListener("message",e),t(n.params.tabs))})),this.window.postMessage({type:"api_request",params:{cmd:"get_session_tabs"}},_e.mainWindow.SURFLY_COBRO_ORIGIN)}))}activateTab(t){this.started?this.window.postMessage({type:"api_request",params:{cmd:"activate_tab",ssid:t}},_e.mainWindow.SURFLY_COBRO_ORIGIN):console.error("Session is not started yet")}uploadFile(t){this.started?this.window.postMessage({type:"api_request",params:{cmd:"upload_file",file:t}},_e.mainWindow.SURFLY_COBRO_ORIGIN):console.error("Session is not started yet")}sendChatMessage(t){this.started?this.window.postMessage({type:"api_request",params:{cmd:"send_chat_message",message:t.trim()}},_e.mainWindow.SURFLY_COBRO_ORIGIN):console.error("Session is not started yet")}broadcastMessage(t){this.started?this.window.postMessage({type:"api_request",params:{cmd:"broadcast_message",message:t}},_e.mainWindow.SURFLY_COBRO_ORIGIN):console.error("Session is not started yet")}async getSessionInfo(){if(!this.started)return void console.error("Session is not started yet");return await new Promise((t=>{_e.mainWindow.addEventListener("message",(function e({data:n}){"widget_message"===n.type&&"get_session_info"===n.params.msg&&(_e.mainWindow.removeEventListener("message",e),t(n.params.sessionInfo))})),this.window.postMessage({type:"api_request",params:{cmd:"get_session_info"}},_e.mainWindow.SURFLY_COBRO_ORIGIN)}))}takeScreenshot(t=!0){this.started?this.window.postMessage({type:"api_request",params:{cmd:"take_screenshot",keepStreamOpened:t}},_e.mainWindow.SURFLY_COBRO_ORIGIN):console.error("Session is not started yet")}}class ni extends ei{constructor(t,e,n,r){super(t,e,n,r)}startLeader(t,e){return this._schedule((()=>this._ask_start(t,e))),this}startFollower(t,e){return this._schedule((()=>this._ask_start(t,e,!0))),this}create(){return _e.mainWindow.__surfly?(console.error("SurflySession.create() is not available under Surfly session"),this):this._create_initiated||this.created||this._restore_initiated?(console.log("Session already initialized, SurflySession.create() does nothing"),this):this._api._widgetKeyProvided("create a new session (without a link or session ID)")?(this._create_initiated=!0,this._schedule(this._createCall.bind(this)),this):this}}class ri{constructor(t,e){this._api=t,this._buttonSettings=e;const n=Ne();n.classList.add("surfly-button-position-"+this.settings.support_button_position),this._frame_classes=n.className,this._node=qe(this.settings),this._node.onclick=()=>this._click(),this._refresh()}get settings(){return new Proxy({...this._api.settings,...this._buttonSettings},{set:(t,e,n)=>(this._buttonSettings[e]=n,!0)})}_click(){Et({category:"JS API",message:"Surfly button clicked",level:$.Info}),this._hide();const t=this._api.session(this._buttonSettings),e=()=>{Ne().className=this._frame_classes,this._show()};t._schedule((()=>t._ask_start(void 0,void 0,!1,e)))}_refresh(){this.settings.hide_support_button?this._hide():(!this.settings.hide_support_button_when_unavailable||this._api.agentAvailable?this._show():this._hide(),this.settings.hide_support_button_when_unavailable&&setTimeout(this._refresh.bind(this),1e3))}_show(){this._node.classList.remove("surfly-button-hidden"),this._node.classList.add("surfly-button-visible");const t=Ne();t&&t.classList.contains("surfly-invisible")&&(t.classList.remove("surfly-invisible"),t.classList.add("surfly-button"),this._frame_classes=t.className)}_hide(){this._node.classList.remove("surfly-button-visible"),this._node.classList.add("surfly-button-hidden");const t=Ne();t&&t.classList.contains("surfly-button")&&(t.classList.remove("surfly-button"),t.classList.add("surfly-invisible"),this._frame_classes=t.className)}}function ii(t){if(!_e.DeviceMotionEvent)return;const e=3,n=30;let r=0;const i={x:0,y:0,z:0};let o=new Date;_e.mainWindow.addEventListener("devicemotion",(function(s){const a=s.accelerationIncludingGravity,c=i.x-a.x,u=i.y-a.y,l=i.z-a.z,d=Math.sqrt(c*c+u*u+l*l),p=(new Date).getTime()-o.getTime();d>n&&100<p&&(1e3>p?r++:r=1,o=new Date,r>=e&&(r=0,t())),i.x=a.x,i.y=a.y,i.z=a.z}),!1)}let oi=ii;function si(){return oi.apply(this,arguments)}const ai=new Set(["SCRIPT","STYLE","INPUT","TEXTAREA"]);function ci(t){function e(t){try{if(t.contentWindow===_e)return;t.onload=function(){var e;const r=null==(e=t.contentDocument)?void 0:e.body;r&&n.observe(r,{childList:!0,subtree:!0})},n.observe(t.contentDocument,{subtree:!0,childList:!0})}catch(t){}}const n=new MutationObserver((function(n){for(let r=0;r<n.length;r++){const i=n[r];if(!ai.has(i.target.nodeName))for(let n=0;n<i.addedNodes.length;n++){const r=i.addedNodes[n];if(!ai.has(r.nodeName)){if(r.nodeType===Node.ELEMENT_NODE){const t=r.querySelectorAll("iframe");for(let n=0;n<t.length;n++)e(t[n]);"IFRAME"===r.tagName&&e(r)}t(r)}}}}));n.observe(_e.mainWindow.document,{subtree:!0,childList:!0});const r=_e.mainWindow.document.querySelectorAll("iframe");for(let t=0;t<r.length;t++)e(r[t]);return n}let ui=ci;var li=function(t){return ui(t)};const di=["^surfly","!surfly"],pi=["^video"];function hi(t={}){0===_e.mainWindow.Surfly.listSessions().length&&_e.mainWindow.Surfly.session(t).on("session_started",(t=>{if(_e.mainWindow.Intercom){const e={surfly_link:t.followerLink,surfly_starturl:_e.mainWindow.location.href,surfly_sessionid:t._sessionId};_e.mainWindow.Intercom("trackEvent","Surfly session started",e)}})).startLeader()}function fi(t){if(t){const e=t.textContent.trim();di.indexOf(e)>=0?hi():pi.indexOf(e)>=0&&hi({start_with_chat_open:!1,videochat_enabled:!0,start_with_videochat_on:!0})}}function _i(t){if(t.nodeType===Node.ELEMENT_NODE){if(t.className.indexOf&&t.className.indexOf("intercom-conversation-part-")>=0){fi(t.querySelector(".intercom-comment .intercom-block-paragraph"))}const e=t.querySelectorAll("iframe.intercom-borderless-frame");for(let t=0;t<e.length;t++)try{const n=e[t].contentDocument.querySelectorAll(".intercom-conversation-part .intercom-chat-card-body");for(let t=0;t<n.length;t++)fi(n[t])}catch(t){}}}function gi(){li(_i)}function yi(){const t=_e.setInterval((function(){_e.mainWindow.Intercom&&(_e.clearInterval(t),_e.mainWindow.Intercom("shutdown"))}),1e3)}let mi=gi,vi=yi;const bi="^surfly",wi="^video";function Si(t={}){0===_e.mainWindow.Surfly.listSessions().length&&_e.mainWindow.Surfly.session(t).startLeader()}function Oi(t){(function(t){var e,n,r,i,o;const s=!!(null==(e=t.innerText)?void 0:e.includes(bi))||!!(null==(n=t.innerText)?void 0:n.includes(wi)),a=(null==(r=t.innerHTML)?void 0:r.includes("button"))||(null==(i=t.innerHTML)?void 0:i.includes("input"))||(null==(o=t.innerHTML)?void 0:o.includes("textarea"));return s&&!a})(t)&&function(t){if(t){const e=t.innerText.trim();e.includes(bi)?Si():e.includes(wi)&&Si({start_with_chat_open:!1,videochat_enabled:!0,start_with_videochat_on:!0})}}(t)}const xi="^surfly",Ei="^video";function ki(t={}){0===_e.mainWindow.Surfly.listSessions().length&&_e.mainWindow.Surfly.session(t).startLeader()}function ji(t){t.message.body===xi?ki():t.message.body===Ei&&ki({start_with_chat_open:!1,videochat_enabled:!0,start_with_videochat_on:!0})}function Ri(){const t=function(){const t=_e.mainWindow.olark;return t||console.warn("Olark API was not found"),t}();t&&(t("api.chat.onMessageToOperator",ji),t("api.chat.onMessageToVisitor",ji))}const Ii="^surfly",Ti="^video",Ai=`type "${Ii}" to start a co-browsing session, or "${Ti}" for a videochat.`;function Li(){const t=_e.mainWindow.LC_API;return t||console.warn("LiveChat API was not found"),t}function Pi(t={}){const e=Li();e&&(_e.document.hidden?console.warn("Ignoring cobrowsing request because the current browser tab is not active"):0===_e.mainWindow.Surfly.listSessions({active:!0}).length&&_e.mainWindow.Surfly.session(t).on("session_created",(t=>{e.set_custom_variables([{name:"Co-browse URL",value:t.followerLink}])})).on("session_ended",(t=>{e.set_custom_variables([{name:"Co-browse URL",value:Ai}])})).startLeader())}const Ci="surfly_default_settings:";function Ni(t,e){if(!kr())return;const n=Ci+t;localStorage.setItem(n,JSON.stringify(e))}const Ui={branding_primary_text_color:{aliases:["branding_primary_fg_color"]},branding_secondary_text_color:{aliases:["branding_secondary_fg_color"]},session_start_confirmation:{aliases:["confirm_session_start"]},start_with_loading_screen:{aliases:["show_loading_screen"]},start_with_invite_modal:{aliases:["splash"]},hide_session_ui:{aliases:["ui_off"]},session_autorestore_enabled:{aliases:["auto_restore"]},hide_support_button_when_unavailable:{aliases:["autohide_button"]},end_redirect_enabled:{aliases:["disable_end_redirect"],flip_alias_value:!0},hide_support_button:{aliases:["hidden"]},embedded_sessions_only:{aliases:["only_embedded_sessions"]},support_button_position:{aliases:["position"]},key_combo_to_start:{aliases:["stealth_mode"]},hide_element_by_selector:{aliases:["hide_selector"]}};let Wi=ni;class Fi extends ir{constructor(){super(),this._agentAvailable=null,this._readyCallback=null,this._translationLoaded=!1,this._initStatus.message="Surfly.init() not called"}init(t,e){this._initStatus.started?console.error("Surfly.init() has already been called!"):(this._initStatus.started=!0,this._initStatus.message="Started","widgetkey"in t&&(t.widget_key=t.widgetkey,delete t.widgetkey),this._userSettings=Object.assign({},t),this._userSettings=this._normalizeWidgetSettingsName(this._userSettings),xt((t=>{t.setTags({user_settings:JSON.stringify(this._userSettings),inside_session:this.isInsideSession})})),Et({category:"JS API",message:"Surfly.init() called",level:$.Info}),this._readyCallback=e,this._checkBrowserFeatures(),this._getDefaultSettings(),"widget_key"in t?xt((e=>{e.setTag("widget_key",t.widget_key)})):this._userSettings.verbose_console&&console.warn("No widget_key provided in settings. You won't be able to create sessions, queue sessions, or check agent status from the JS API. See https://docs.surfly.com/advanced-integration.html#header-full-featured-custom-session-id-approach for more details."))}_checkReady(){if(!this._initStatus.finished&&void 0!==this._features.WS&&void 0!==this._features.MO&&void 0!==this._features["3rdcookies"]&&(!("widget_key"in this._userSettings)||null!==this._defaultSettings)&&this._translationLoaded){this.settings.verbose_console&&console.log("Surfly widget initialized, calling callback"),this._initStatus.finished=!0;let t,e=!0;if(!1===this._features.WS?(this._initStatus.message="WebSockets support is required",e=!1):!1===this._features.MO?(this._initStatus.message="MutationObserver support is required",e=!1):!1===this._defaultSettings&&(this._initStatus.message="Could not retrieve default settings from server",e=!1),e?this._initStatus.message="Success":console.error(this._initStatus.message),this.settings.block_until_agent_joins&&!this.settings.hide_until_agent_joins&&(this.settings.start_with_loading_screen=this.settings.start_with_invite_modal=!1),_e.mainWindow.__surfly){const t=_e.mainWindow.__surfly_top_frame.ss_bootstrap_config.PARENT_SESSION_ID;this._currentSession=new Wi(this,this._userSettings,null,t),this._currentSession._isLeader=!0,me.forEach((t=>{this._sessionEventHandlers[t].forEach((e=>{this._currentSession.on(t,e)}))})),this._allSessions.push(this._currentSession)}if(this.settings.key_combo_to_start&&!_e.mainWindow.__surfly&&_e.mainWindow.document.addEventListener("keydown",(t=>{if(t.ctrlKey&&13===t.keyCode){this.listSessions().some((t=>t.started&&!t.ended))?console.warn("There is an active session already, ignoring the keystroke"):this.session().startLeader()}})),_e.mainWindow.addEventListener("hashchange",(()=>{"#surflystart"===_e.mainWindow.location.hash&&(Et({category:"JS API",message:"#surflystart hashchange",level:$.Info}),this.session().startLeader())})),this._initStatus.successful=e,this._features["3rdcookies"]&&(t=br(gr)),!_e.mainWindow.__surfly)if(t){this.settings.verbose_console&&console.log(`Found a session to restore ${t}`),Sr(gr);const e=this.session({},null,t);this._restoredSessionId=t,this._emit("session_restored",{session:e}),e.on("session_created",(e=>{e.ended?(console.warn("Session is already ended, nothing to restore"),Et({category:"JS API",message:"restore_session expired",data:{id:t},level:$.Info}),this._restoredSessionId=null):(Et({category:"JS API",message:"Restoring active session",data:{id:t},level:$.Info}),e.settings.session_start_confirmation=!1,e.startLeader())}))}else"#surflystart"===_e.mainWindow.location.hash&&(Et({category:"JS API",message:"#surflystart detected",level:$.Info}),this.session().startLeader());this.settings.shake_to_start&&!_e.mainWindow.__surfly&&si((()=>{0===this.listSessions().length&&(this.session().startLeader(),Et({category:"JS API",message:"Shook to start",level:$.Info}))})),this._initChatIntegration(),Et({category:"JS API",message:"JS API initialized",data:{success:e,errorMsg:this._initStatus.message},level:$.Info});try{this._readyCallback({success:e,errorMsg:this._initStatus.message})}catch(t){throw Et({category:"JS API",message:"Exception in user callback",data:{error:""+t},level:$.Warning}),t}}}get agentAvailable(){if(this._widgetKeyProvided("check agent availability"))return null===this._agentAvailable&&this._startAgentPoll(),this._agentAvailable}_initChatIntegration(){"intercom"===this.settings.chat_integration?_e.mainWindow.__surfly?function(){vi.apply(this,arguments)}():(!function(){mi.apply(this,arguments)}(),Et({category:"JS API",message:"Intercom integration started",level:$.Info})):"zendesk"===this.settings.chat_integration?_e.mainWindow.__surfly?_e.setInterval((function(){try{const t=_e.mainWindow.document.querySelectorAll(".zopim,.zEWidget-launcher,#launcher");for(let e=0;e<t.length;e++)t[e].style.display="none"}catch(t){}}),2e3):(li(Oi),Et({category:"JS API",message:"Zendesk integration started",level:$.Info})):"olark"===this.settings.chat_integration?_e.mainWindow.__surfly?_e.setInterval((function(){_e.mainWindow.olark&&_e.mainWindow.olark("api.box.hide")}),2e3):(Ri(),Et({category:"JS API",message:"Olark integration started",level:$.Info})):"livechat"===this.settings.chat_integration&&(_e.mainWindow.__surfly?function(){const t=Li();t&&(t.on_before_load=function(){t.hide_chat_window()})}():(!function(){const t=Li();t&&(t.on_chat_started=function(){t.set_custom_variables([{name:"Co-browse URL",value:Ai}])},t.on_message=function(t){const e=t.timestamp,n=Math.floor(Date.now()/1e3);Math.abs(e-n)>3||(t.text===Ii?Pi():t.text===Ti&&Pi({start_with_chat_open:!1,videochat_enabled:!0,start_with_videochat_on:!0}))})}(),Et({category:"JS API",message:"Livechat integration started",level:$.Info})))}_startAgentPoll(){null===this._agentAvailable&&(this._agentAvailable=void 0);ar(_e.mainWindow.SURFLY_COBRO_ORIGIN+"/v2/queue/status/?api_key="+this._userSettings.widget_key).then((t=>{const e=this._agentAvailable;this._agentAvailable=t.agent_available,this._checkReady(),e!==this._agentAvailable&&this._emit("agent_status",{available:this._agentAvailable}),setTimeout(this._startAgentPoll.bind(this),5e3)}),(t=>{const e=this._agentAvailable;console.error(t.detail||t),St(new Error(t.detail||t)),this._agentAvailable=!1,this._checkReady(),e!==this._agentAvailable&&this._emit("agent_status",{available:this._agentAvailable})}))}_checkBrowserFeatures(){this._shouldSkip3rdCookie()&&(console.debug("skipping 3rdpartycookietest"),wr("surfly_3rdcookies",!0)),zr(_e.mainWindow.SURFLY_COBRO_ORIGIN,!1,!1).then((t=>{this._features["3rdcookies"]=t,xt((t=>{t.setTags({thirdPartyCookies:this._features["3rdcookies"]})})),this._checkReady()})),Jr((t=>{this._features.MO=t,xt((t=>{t.setTags({MutationObserver:this._features.MO})})),this._checkReady()})),Xr((t=>{this._features.WS=t,xt((t=>{t.setTags({ws:this._features.WS})})),this._checkReady()}))}_normalizeWidgetSettingsName(t){const e=[];for(const[t,n]of Object.entries(Ui)){const r=[t,...n.aliases];e.push(r)}const n=Object.assign({},t);for(const[r,i]of Object.entries(t))for(const t of e){const e=t[0];r===t[1]&&(delete n[r],n[e]=Ui[e].flip_alias_value?!i:i,console.info(`Alias ${e} of ${r} is used with value ${n[e]}`))}return n}_getDefaultSettings(){if(null!==this._defaultSettings)return;const t=t=>{this._defaultSettings=t,this.settings.language||(console.warn("No language setting or widget key provided, defaulting to english language"),this.settings.language="en"),this._fetchTranslation(this.settings.language),this._checkReady()};if(this._widgetKeyProvided("get default settings from server")){const e=function(t){if(!kr())return null;const e=Ci+t;let n=localStorage.getItem(e);try{n=JSON.parse(n)}catch(t){n=null}return n}(this._userSettings.widget_key);e?(t(e),this._fetchDefaultSettingsInBackground()):this._fetchDefaultSettings(t)}else t({})}_fetchDefaultSettings(t){ar(_e.mainWindow.SURFLY_COBRO_ORIGIN+"/v2/company/options/?api_key="+this._userSettings.widget_key).then((e=>{Ni(this._userSettings.widget_key,e),t(e)}),(t=>{this._defaultSettings=!1,console.error("Couldn't retrieve default settings: "+t),this._checkReady()}))}_fetchDefaultSettingsInBackground(){ar(_e.mainWindow.SURFLY_COBRO_ORIGIN+"/v2/company/options/?api_key="+this._userSettings.widget_key).then((t=>{Ni(this._userSettings.widget_key,t)}),(t=>{console.error("Error retrieving default settings: ",t)}))}_fetchTranslation(t){if("en"===t)return this._translationLoaded=!0,void this._checkReady();5===(t=t.replace("-","_")).length&&(t=t.substring(0,3)+t.substring(3).toUpperCase()),7===t.length&&(t=t.substring(0,3)+t[3].toUpperCase()+t.substring(4));ar(`${_e.mainWindow.SURFLY_COBRO_ORIGIN}/static/dashboard/translations/${t}.json`).then((t=>{var e,n;e=t,n=this.settings.verbose_console,Oe=new Se.a({allowMissing:!n}),Oe.extend(e),xe=!0,this._translationLoaded=!0,this._checkReady()}),(t=>{this._translationLoaded=!0,console.error("Error retrieving translation: "+t),this._checkReady()}))}on(t,e){if(Et({category:"JS API",message:`Attaching to ${t}`,level:$.Info}),-1!==me.indexOf(t))this._sessionEventHandlers[t].push(e),this.listSessions().forEach((n=>{n.on(t,e)}));else if(-1!==be.indexOf(t)){const n="agent_status"===t&&null===this._agentAvailable;if(n&&!this._widgetKeyProvided("listen for agent_status"))return this;this._globalEventsEmitter.addListener(t,e.bind(this,this)),n&&this._startAgentPoll()}else console.warn("Unknown event",t);return this}session(t,e,n){if(!this._assertInitialized("Surfly.session()"))return null;if(!e&&!n&&!this._widgetKeyProvided("create a new session (without a link or session ID)"))return;if(_e.mainWindow.__surfly)return console.error("Cannot create sessions inside a session"),null;const r=new Wi(this,t,e,n);return me.forEach((t=>{this._sessionEventHandlers[t].forEach((e=>{r.on(t,e)}))})),this._allSessions.push(r),r}button(t){return this._assertInitialized("Surfly.button()")&&this._widgetKeyProvided("create sessions with a button")?_e.mainWindow.__surfly?null:(Et({category:"JS API",message:"Surfly button added",level:$.Info}),new ri(this,t)):null}}class Mi{constructor(t,e={}){this._api=t,this._buttonSettings={...this._api._integrationSettings,...e};const n=Ne();n.classList.add("surfly-button-position-"+this.settings.support_button_position||!1),this._frame_classes=n.className,this._node=qe(this.settings),this._node.onclick=()=>this._click(),this._refresh()}get settings(){return new Proxy(this._buttonSettings,{set:(t,e,n)=>(this._buttonSettings[e]=n,!0)})}_click(){this._hide();const t=this._api._currentSpace;if(!t)return console.error("No active space found"),void this._show();const e=t.session(this._buttonSettings),n=()=>{Ne().className=this._frame_classes,this._show()};e._schedule((()=>e._ask_start(void 0,void 0,!1,n)))}_refresh(){this.settings.hide_support_button?this._hide():this._show()}_show(){this._node.classList.remove("surfly-button-hidden"),this._node.classList.add("surfly-button-visible");const t=Ne();t&&t.classList.contains("surfly-invisible")&&(t.classList.remove("surfly-invisible"),t.classList.add("surfly-button"),this._frame_classes=t.className)}_hide(){this._node.classList.remove("surfly-button-visible"),this._node.classList.add("surfly-button-hidden");const t=Ne();t&&t.classList.contains("surfly-button")&&(t.classList.remove("surfly-button"),t.classList.add("surfly-invisible"),this._frame_classes=t.className)}}class Di extends ei{constructor(t,e,n,r,i){super(t,e,n,r),this.start=async t=>(this._schedule((()=>this._ask_start(t))),this),this._space=i,t._allSessions.push(this)}get settings(){return new Proxy({...this._api._integrationSettings,...this._sessionSettings},{set:(t,e,n)=>(this._sessionSettings[e]=n,!0)})}create(){return new Promise(((t,e)=>{this._schedule((async()=>{try{const e=await this._createCall();t(e)}catch(t){e(t)}}))}))}async _createSession(t,e,n){if(!this._api._widgetKey)throw new Error("Widget key not available in space context.");try{const t=await this._api._sendRequest(`+${this._space.slug}/`,{method:"GET"},!1);if(!t||!t.link)throw new Error("Invalid response from activateSpace");return this.followerLink=t.link,this._sessionId=t.session_id,this.leaderLink=t.link,this.pin=t.pin,this._cookieRestoreUrls=[...new Set(t.init_restore_urls||[])],wr(mr+this._sessionId,this._cookieRestoreUrls),this._state_transferred=br(vr+this._sessionId)||!1,{leader_link:t.link,follower_link:t.link,pin:t.pin,id:t.session_id,init_restore_urls:t.init_restore_urls||[]}}catch(t){throw console.error("Failed to create session:",t),t}}_restoreSession(t){return this._api._sendRequest(`spaces/${this._space.id}/sessions/${t}`,{},!0).then((e=>{this.settings.verbose_console&&console.log(`Session restored ${t}`),this._ended=Boolean(e.duration),this.followerLink=e.link,this._sessionId=e.session_id,this._cookieRestoreUrls=br(mr+this._sessionId)||[],this.leaderLink=e.link||br(yr+this._sessionId),this._state_transferred=br(vr+this._sessionId)||!1,this.pin=e.pin,_e.mainWindow.__surfly&&(this._started=!0,this._otherSideReady=!0,this._emitter.listeners("session_pre_end").length>0&&this._sendApiMessage("widget_event",{event_type:"pre_end_subscribed"}),this._sendApiMessage("widget_event",{event_type:"widget_ready"})),this._emit("session_created",{})}))}}class Bi{constructor(t,e){this.id=t.id,this.slug=t.slug,this._webfuse=e,this._integrationSettings=e._integrationSettings}button(t={}){if(_e.mainWindow.__surfly)return null;const e={...this._integrationSettings,...t};return new Mi(this._webfuse,e)}session(t={},e=null,n=null){const r={...this._integrationSettings,...t,widget_key:this._webfuse._widgetKey};return new Di(this._webfuse,r,e,n,this)}}class Yi extends ir{constructor(){if(super(),this.baseUrl=`${_e.mainWindow.SURFLY_COBRO_ORIGIN}/`,this.apiBaseUrl=`${this.baseUrl}api/`,this._integrationSettings={},this._initStatus.message="Webfuse.initSpace() not called",this._currentSpace=null,this._readyCallback=null,this._pendingRestoration=null,window.Webfuse&&window.Webfuse.q){const t=window.Webfuse.q,e=window.Webfuse.resolve;t&&e&&this.initSpace.apply(this,t).then((t=>e(t)))}}_handleSessionRestoration(t){if(!this._currentSpace)return;Sr(gr),this._restoredSessionId=t;const e=this._currentSpace.session(this._integrationSettings,null,t);this._emit("session_restored",{session:e}),e.on("session_created",(e=>{e.ended?(console.warn("Session is already ended, nothing to restore"),this._restoredSessionId=null):(console.log("Restoring active session:",t),e.start())}))}initSpace(t,e,n={}){return new Promise(((r,i)=>{t?e?(this._initStatus.started=!0,this._widgetKey=t,this._spaceId=e,this._integrationSettings=n,this._checkBrowserFeatures().then((()=>{if(!1===this._initStatus.successful)throw new Error(this._initStatus.message);return this._fetchSpaceData()})).then((t=>{if(this._currentSpace=new Bi(t,this),_e.mainWindow.__surfly){const t=_e.mainWindow.__surfly_top_frame.ss_bootstrap_config.PARENT_SESSION_ID,e=this._currentSpace.session(this._integrationSettings,null,t);this._currentSession=e,me.forEach((t=>{this._sessionEventHandlers[t].forEach((n=>{e.on(t,n)}))}))}this._pendingRestoration&&this._handleSessionRestoration(this._pendingRestoration),r(this._currentSpace)})).catch((t=>{console.error("Failed to initialize space:",t),i(t)}))):i(new Error("Space ID is required")):i(new Error("Widget key is required"))}))}async _fetchSpaceData(){const t=`spaces/${this._spaceId}`;return await this._sendRequest(t)}async _sendRequest(t,e={},n=!0){"object"!=typeof e.headers&&(e.headers=new Headers),e.headers.append("Authorization",`Token ${this._widgetKey}`);return ar(`${n?this.apiBaseUrl:this.baseUrl}${t}`,e)}listSessions(){return this._allSessions}_checkBrowserFeatures(){return this._shouldSkip3rdCookie()&&(wr("surfly_3rdcookies",!0),this._features["3rdcookies"]=!0),Promise.all([this._features["3rdcookies"]?Promise.resolve():zr(_e.mainWindow.SURFLY_COBRO_ORIGIN,!1,!1).then((t=>{this._features["3rdcookies"]=t,this._checkReady()})),new Promise((t=>{Jr((e=>{this._features.MO=e,this._checkReady(),t()}))})),new Promise((t=>{Xr((e=>{this._features.WS=e,this._checkReady(),t()}))}))])}_shouldSkip3rdCookie(){return Le&&this._widgetKey&&871459203===function(t){let e=0,n=0;if(t.length>0)for(;n<t.length;)e=(e<<5)-e+t.charCodeAt(n++)|0;return e}(this._widgetKey)}_checkReady(){if(!this._initStatus.finished){if(void 0!==this._features.WS&&void 0!==this._features.MO&&void 0!==this._features["3rdcookies"]){this._initStatus.finished=!0;let t=!0;if(!1===this._features.WS?(this._initStatus.message="WebSockets support is required",t=!1):!1===this._features.MO&&(this._initStatus.message="MutationObserver support is required",t=!1),t){if(this._initStatus.message="Success",this._features["3rdcookies"]){const t=br(gr);t&&(this._pendingRestoration=t)}this._integrationSettings.key_combo_to_start&&!_e.mainWindow.__surfly&&_e.mainWindow.document.addEventListener("keydown",(t=>{if(t.ctrlKey&&13===t.keyCode){this.listSessions().some((t=>t.started&&!t.ended))?console.warn("There is an active session already, ignoring the keystroke"):this._currentSpace.session().start()}})),_e.mainWindow.addEventListener("hashchange",(()=>{"#webfusestart"===_e.mainWindow.location.hash&&this._currentSpace.session().start()})),this._integrationSettings.shake_to_start&&!_e.mainWindow.__surfly&&si((()=>{0===this.listSessions().length&&this._currentSpace.session().start()}))}else console.error("Feature check failed:",this._initStatus.message);this._initStatus.successful=t}}}on(t,e){return-1!==me.indexOf(t)?(this._sessionEventHandlers[t].push(e),this.listSessions().forEach((n=>{n.on(t,e)}))):-1!==be.indexOf(t)?this._globalEventsEmitter.addListener(t,e.bind(this,this)):console.warn("Unknown event",t),this}}if(window.mainWindow=window.parent,!window.__surfly){const t="https://510f80906f4d429ba882cf65fdfbbca6@sentry.io/1545691",e=!/^#\{SENTRY_DSN\}$/.test(t);e||console.info("SENTRY_DSN environment variable is not replaced. Default value is used."),function(t){if(void 0===t&&(t={}),void 0===t.defaultIntegrations&&(t.defaultIntegrations=ie),void 0===t.release){var e=Object(p.e)();e.SENTRY_RELEASE&&e.SENTRY_RELEASE.id&&(t.release=e.SENTRY_RELEASE.id)}void 0===t.autoSessionTracking&&(t.autoSessionTracking=!1),function(t,e){!0===e.debug&&b.enable();var n=R(),r=new t(e);n.bindClient(r)}(Zt,t),t.autoSessionTracking&&function(){var t=Object(p.e)(),e=R(),n="complete"===document.readyState,r=!1,i=function(){r&&n&&e.endSession()},o=function(){n=!0,i(),t.removeEventListener("load",o)};e.startSession(),n||t.addEventListener("load",o);try{var s=new PerformanceObserver((function(t,e){t.getEntries().forEach((function(t){"first-contentful-paint"===t.name&&t.startTime<a&&(e.disconnect(),r=!0,i())}))})),a="hidden"===document.visibilityState?0:1/0;document.addEventListener("visibilitychange",(function(t){a=Math.min(a,t.timeStamp)}),{once:!0}),s.observe({type:"paint",buffered:!0})}catch(t){r=!0,i()}}()}({dsn:e?t:"",release:"unknown",integrations:[new ae.GlobalHandlers({onunhandledrejection:!1}),new he({iteratee:t=>("<anonymous>"===t.filename&&(t.filename="~/static/bundles/widget/apiframe.js"),t)})]}),xt((t=>{t.setTag("logger","jsapi")}))}if(window.mainWindow.Webfuse){const t=new Yi;if(window.mainWindow.Webfuse.q){const e=window.mainWindow.Webfuse.resolve;t.initSpace.apply(t,window.mainWindow.Webfuse.q).then((t=>(e&&e(t),t))).catch((t=>{throw console.error("Failed to initialize space:",t),t}))}window.mainWindow.Webfuse=t}else if(window.mainWindow.Surfly&&window.mainWindow.Surfly._notadummy);else{const t=new Fi;window.mainWindow.Surfly&&window.mainWindow.Surfly.q&&t.init.apply(t,window.mainWindow.Surfly.q),window.mainWindow.Surfly=t}},,function(t,e,n){"use strict";(function(t){n.d(e,"a",(function(){return c}));var r=n(4),i=n(12),o={nowSeconds:function(){return Date.now()/1e3}};var s=Object(i.b)()?function(){try{return Object(i.a)(t,"perf_hooks").performance}catch(t){return}}():function(){var t=Object(r.e)().performance;if(t&&t.now)return{now:function(){return t.now()},timeOrigin:Date.now()-t.now()}}(),a=void 0===s?o:{nowSeconds:function(){return(s.timeOrigin+s.now())/1e3}},c=o.nowSeconds.bind(o);a.nowSeconds.bind(a),function(){var t=Object(r.e)().performance;if(t)t.timeOrigin?t.timeOrigin:t.timing&&t.timing.navigationStart||Date.now()}()}).call(this,n(20)(t))}]);